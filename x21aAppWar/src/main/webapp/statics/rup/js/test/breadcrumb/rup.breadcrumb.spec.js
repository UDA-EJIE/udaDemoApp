import"jquery";import"rup.base";import*as testutils from"../common/specCommonUtils.js";import"jasmine-jquery";import"rup.breadCrumb";describe("Test BreadCrumb >",(()=>{var e,r;beforeAll((e=>{testutils.loadCss(e),r=window.location.href,window.history.pushState({urlPath:"/x21aResponsive/patrones/ptrUno"},"","/x21aResponsive/patrones/ptrUno")})),afterAll((()=>{window.history.pushState({urlPath:r},"",r)})),beforeEach((r=>{$("#content").append('<div id="exampleBreadcrumb" class="container-fluid mb-2 rup-breadCrumb_root"></div>\t\t\t\t<div id="subLeveledBreadCrumb" class="container-fluid mb-2 rup-breadCrumb_root"></div>'),$("#exampleBreadcrumb").on("afterInit",(()=>{window.history.pushState({urlPath:"/x21aResponsive/patrones/ptrUno"},"","/x21aResponsive/patrones/ptrUno"),r()})),$("#subLeveledBreadCrumb").rup_breadCrumb({breadCrumb:{patrones:{i18nCaption:"Varios patrones",ptrUno:{i18nCaption:"ptrUno"},ptrDos:{i18nCaption:"ptrDos"},ptrTres:{i18nCaption:"ptrTres"},subLevel:[{i18nCaption:"ptrUno",url:"./patrones/ptrUno"},{i18nCaption:"ptrDos",url:"./patrones/ptrDos"},{i18nCaption:"ptrTres",url:"./patrones/ptrTres"}]}}}),$("#exampleBreadcrumb").rup_breadCrumb({breadCrumb:{}}),e=$("#exampleBreadcrumb")})),afterEach((()=>{$("#content").html(""),$("#content").nextAll().remove()})),describe("Creación > ",(()=>{describe("Creación de Breadcrumb vacío > ",(()=>{describe("Debe existir el span dentro del breadCrumb > ",(()=>{it("Debe existir el span",(()=>{expect($("#exampleBreadcrumb span.rup-breadCrumbs_span").length).toBe(1)})),it("Debe tener el texto esperado",(()=>{expect($("#exampleBreadcrumb span.rup-breadCrumbs_span").html()).toBe("Usted está en:")}))})),describe("Debe tener únicamente una miga de pan en el ul de las migas (Inicio) > ",(()=>{it("Debe existir el ul de las migas",(()=>{expect($("#exampleBreadcrumb ul.rup-breadCrumb_main").length).toBe(1)})),it("Debe tener un único hijo (Inicio)",(()=>{expect($("#exampleBreadcrumb ul.rup-breadCrumb_main").children().length).toBe(1)})),it('El hijo debe ser "Inicio"',(()=>{expect($("#exampleBreadcrumb ul.rup-breadCrumb_main > li > span").html()).toBe("Inicio")}))}))})),describe("Creación de Breadcrumb con migas > ",(()=>{describe("Debe existir el span dentro del breadCrumb > ",(()=>{it("Debe existir el span",(()=>{expect($("#subLeveledBreadCrumb span.rup-breadCrumbs_span").length).toBe(1)})),it("Debe tener el texto esperado",(()=>{expect($("#subLeveledBreadCrumb span.rup-breadCrumbs_span").html()).toBe("Usted está en:")}))})),describe("Debe tener dos migas de pan en el ul de las migas > ",(()=>{it("Debe existir el ul de las migas",(()=>{expect($("#subLeveledBreadCrumb ul.rup-breadCrumb_main").length).toBe(1)})),it("Debe tener dos hijos",(()=>{expect($("#subLeveledBreadCrumb ul.rup-breadCrumb_main").children().length).toBe(3)})),it('El primer hijo debe ser el "Inicio" y debe ser un enlace',(()=>{expect($("#subLeveledBreadCrumb ul.rup-breadCrumb_main > li > a").html()).toBe("Inicio")})),it("El primer hijo debe tener un icono de flecha",(()=>{expect($("#subLeveledBreadCrumb ul.rup-breadCrumb_main > li > span").hasClass("mdi mdi-chevron-right")).toBeTruthy()})),it("El segundo hijo debemostrarse como el actual",(()=>{expect($("#subLeveledBreadCrumb ul.rup-breadCrumb_main > li").hasClass("rup-breadCrumb_current")).toBeTruthy()})),it('El texto del hijo seleccionado debe ser "ptrUno"',(()=>{expect($("#subLeveledBreadCrumb ul.rup-breadCrumb_main > li.rup-breadCrumb_current > span").html()).toBe("ptrUno")})),it("El segundo hijo debe contener un ul oculto",(()=>{let e=$("#subLeveledBreadCrumb ul.rup-breadCrumb_main > li.rup-breadCrumb_current").prev();expect($("ul",e).length).toBe(1),expect($("ul",e).css("display")).toBe("none")})),it("El ul oculto debe tener tres hijos (Los sublevel)",(()=>{let e=$("#subLeveledBreadCrumb ul.rup-breadCrumb_main > li.rup-breadCrumb_current").prev();expect($("ul",e).children().length).toBe(3)})),it("Los hijos deben ser los especificados en la configuracion",(()=>{let e=$("#subLeveledBreadCrumb ul.rup-breadCrumb_main > li.rup-breadCrumb_current").prev();expect($("a",$("ul",e).children()[0]).html()).toBe("ptrUno"),expect($("a",$("ul",e).children()[0]).attr("href")).toBe("./patrones/ptrUno"),expect($("a",$("ul",e).children()[1]).html()).toBe("ptrDos"),expect($("a",$("ul",e).children()[1]).attr("href")).toBe("./patrones/ptrDos"),expect($("a",$("ul",e).children()[2]).html()).toBe("ptrTres"),expect($("a",$("ul",e).children()[2]).attr("href")).toBe("./patrones/ptrTres")}))}))}))})),describe("Test de funcionamiento > ",(()=>{describe('Mostrar sublevels haciendo hover en "Varios patrones"',(()=>{var e;beforeEach((()=>{(e=$("#subLeveledBreadCrumb ul.rup-breadCrumb_main > li.rup-breadCrumb_current").prev()).trigger("mouseenter")})),it("Debe mostrarse",(()=>{expect($("ul",e).css("display")).toBe("block")}))}))})),describe("Test de los métodos públicos >",(()=>{describe("Método destroy >",(()=>{beforeEach((()=>{e.rup_breadCrumb("destroy")})),it("No debe existir",(()=>{expect((()=>{e.rup_breadCrumb("destroy")})).toThrowError()}))}))})),describe("Test de eventos > ",(()=>{describe("Evento keydown en createdLI > ",(()=>{let e;beforeEach((()=>{e=$('<li tabindex="0">Test Item</li>'),$("#exampleBreadcrumb ul.rup-breadCrumb_main").append(e)})),it("Debe disparar un evento click cuando se presiona Enter o Space",(()=>{const e=$("<li></li>");spyOn(e,"trigger"),e.on("keydown",(r=>{"Enter"!==r.code&&"Space"!==r.code||e.trigger("click")}));const r=jQuery.Event("keydown",{code:"Enter"});e.trigger(r),expect(e.trigger).toHaveBeenCalled()})),it("Debe disparar un evento click cuando se presiona Space",(()=>{const e=$("<li></li>");spyOn(e,"trigger"),e.on("keydown",(r=>{"Space"===r.code&&e.trigger("click")}));const r=jQuery.Event("keydown",{code:"Enter"});e.trigger(r),expect(e.trigger).toHaveBeenCalled()})),describe("Evento keydown",(function(){it("Debe responder al evento keydown y mostrar el valor de event.code",(function(){spyOn(e,"on").and.callThrough(),e.on("keydown",(function(e){console.log("Tecla presionada:",e.code),expect(e.code).toBe("ArrowUp")}));let r=$.Event("keydown",{code:"ArrowUp"});e.trigger(r)}))}))}))}))}));
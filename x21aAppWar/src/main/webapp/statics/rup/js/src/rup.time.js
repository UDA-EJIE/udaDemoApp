/*! For license information please see rup.time.js.LICENSE.txt */
!function(e){"function"==typeof define&&define.amd?define(["jquery","./rup.base","./core/ui/jquery-ui.timepicker"],e):e(jQuery)}((function(e){e.extend(e.rup.iniRup,e.rup.rupSelectorObjectConstructor("rup_time",{})),e.fn.rup_time("extend",{getRupValue:function(){var t,i;return t=e(this).data("datepicker").settings.timeFormat,(i=e.datepicker.parseTime(t,e(this).rup_time("getTime")))?e.datepicker.formatTime("hh:mm:ss",i):""},setRupValue:function(t){var i,r,s;i=e(this).data("datepicker").settings.timeFormat,(r=e.datepicker.parseTime("hh:mm:ss",t))||(r=e.datepicker.parseTime("hh:mm:ss",t+":00")),s=r?e.datepicker.formatTime(i,r):"",e(this).val(s)},destroy:function(){var t=e(this).data("datepicker").settings.labelMaskId;t&&e("#"+e.escapeSelector(t)).text(""),e(this).next("img").remove(),e(this).timepicker("destroy")},disable:function(){e(this).timepicker("disable")},enable:function(){e(this).timepicker("enable")},isDisabled:function(){return e(this).timepicker("isDisabled")},hide:function(){e("#ui-datepicker-div").css("display","none")},show:function(){e(this).timepicker("show")},getTime:function(){return e(this).val()},setTime:function(t){e(this).timepicker("refresh"),e(this).data("datepicker").settings.onSelect&&e(this).data("datepicker").settings.onSelect(),e.datepicker._setTime(e.datepicker._getInst(e("#"+e.escapeSelector(e(this).data("datepicker").settings.id))[0]),t)},refresh:function(){e(this).timepicker("refresh")},option:function(t,i){if(void 0===i)return e(this).data("datepicker").settings[t];e(this).data("datepicker").settings[t]=i}}),e.fn.rup_time("extend",{_init:function(t){if(t.length>1)e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_global.initError")+e(this).attr("id"));else{var i=e(this),r=i[0],s=e.extend({},e.fn.rup_time.defaults,t[0]);r._ADAPTER=e.rup.adapter[s.adapter],s.id=i.attr("id"),i.attr("ruptype","time");var a=e.rup.i18n.base.rup_time;for(var n in a)e.timepicker._defaults[n]=a[n];s.labelMaskId&&e("#"+e.escapeSelector(s.labelMaskId)).text(e.rup.i18nParse(e.rup.i18n.base,"rup_time.mask")+" "),s.placeholderMask&&i.attr("placeholder",e.rup.i18nParse(e.rup.i18n.base,"rup_time.mask")),s.buttonImage=e.rup.STATICS+(s.buttonImage?s.buttonImage:"/rup/css/images/clock.png"),i.timepicker(s),r._ADAPTER.initIconTrigger.bind(i)(s),e.rup_utils.aplicatioInPortal()&&!i.is("div")&&e(".r01gContainer").append(e(".ui-datepicker:not(.r01gContainer .ui-datepicker)")),s.disabled&&i.rup_time("disable"),i.parent().find("[title]").rup_tooltip({applyToPortal:!0})}}}),e.fn.rup_time.defaults={adapter:"time_material",placeholderMask:!1,stepHour:1,stepMinute:1,stepSecond:1,showButtonPanel:!1,timeOnly:!0},e.datepicker._timepicker_doKeyPress=e.datepicker._doKeyPress,e.datepicker._doKeyPress=function(t){var i=e.datepicker._get(e.datepicker._getInst(t.target),"timepicker");switch(t.code){case"Left":!t.ctrlKey||t.altKey||t.shiftKey?t.ctrlKey&&t.shiftKey&&!t.altKey?i.minute_slider.slider("option","value",i.minute_slider.slider("option","value")-i._defaults.stepMinute):t.ctrlKey&&t.shiftKey&&t.altKey&&i.second_slider.slider("option","value",i.second_slider.slider("option","value")-i._defaults.stepSecond):i.hour_slider.slider("option","value",i.hour_slider.slider("option","value")-i._defaults.stepHour);break;case"Right":!t.ctrlKey||t.altKey||t.shiftKey?t.ctrlKey&&t.shiftKey&&!t.altKey?i.minute_slider.slider("option","value",i.minute_slider.slider("option","value")+i._defaults.stepMinute):t.ctrlKey&&t.shiftKey&&t.altKey&&i.second_slider.slider("option","value",i.second_slider.slider("option","value")+i._defaults.stepSecond):i.hour_slider.slider("option","value",i.hour_slider.slider("option","value")+i._defaults.stepHour)}return i&&i._onTimeChange(),e.datepicker._timepicker_doKeyPress(t)}}));
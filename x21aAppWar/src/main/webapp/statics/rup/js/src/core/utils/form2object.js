!function(e){"function"==typeof define&&define.amd?define([],e):e(jQuery)}((function(e){function t(e){var n,a=[];if(e)for(var i=e.firstChild;i;){if(i.nodeName.match(/INPUT|SELECT|TEXTAREA|HIDDEN/i)||jQuery(i).is("[ruptype='tree']")){var u=r(i);if(jQuery(i).is("select")&&i.multiple||jQuery(i).is("[ruptype='tree']")){var l=jQuery(i).attr("name").split(".");n=l.length>1?l.slice(0,l.length-1).join("."):l[0]}else n=jQuery(i).attr("name");null!==u&&a.push({name:n,value:u})}else{var s=t(i);a=a.concat(s)}i=i.nextSibling}return a}function r(e){var t=jQuery(e).attr("ruptype");if(t)return jQuery(e)["rup_"+t]("getRupValue");switch(e.nodeName){case"HIDDEN":case"INPUT":case"TEXTAREA":switch(e.type.toLowerCase()){case"radio":case"checkbox":if(e.checked)return e.value;break;case"button":case"reset":case"submit":case"image":return"";default:return e.value}break;case"SELECT":return function(e){if(!e.multiple)return e.value;for(var t=[],r=e.getElementsByTagName("option"),n=0,a=r.length;n<a;n++){var i=e.name.split(".");if(i[i.length-1],r[n].selected){var u={};u[i[i.length-1]]=r[n].value,t.push(u)}}return t}(e)}return null}window.form2object=function(e,r,n){void 0!==n&&null!=n||(n=!0),void 0!==r&&null!=r||(r=".");for(var a=t(e="string"==typeof e?document.getElementById(e):e),i={},u={},l=0;l<a.length;l++){var s=a[l].value;if(!n||""!==s){var f=a[l].name;if(f)for(var c=f.split(r),o=i,p=0;p<c.length;p++){var h,v=c[p];if(v.indexOf("[]")>-1&&p==c.length-1)o[h=v.substr(0,v.indexOf("["))]||(o[h]=[]),o[h].push(s);else if(v.indexOf("[")>-1){h=v.substr(0,v.indexOf("["));var g=v.replace(/^[a-z]+\[|\]$/gi,"");u[h]||(u[h]={}),o[h]||(o[h]=[]),p==c.length-1?o[h].push(s):u[h][g]||(o[h].push({}),u[h][g]=o[h][o[h].length-1]),o=u[h][g]}else p<c.length-1?(o[v]||(o[v]={}),o=o[v]):o[v]&&function(e){if("object"==typeof e)try{e=JSON.stringify(e)}catch(e){return!1}if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return!1}return"object"==typeof e}(o[v])?o[v]=Object.assign({},o[v],s):o[v]=s}}}return i}}));
Date.prototype.getWeek=function(t){"use strict";t="int"==typeof t?t:0;var e=new Date(this.getFullYear(),0,1),a=e.getDay()-t;a=a>=0?a:a+7;var o,i=Math.floor((this.getTime()-e.getTime()-6e4*(this.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)+1;if(a<4){if((o=Math.floor((i+a-1)/7)+1)>52){let e=new Date(this.getFullYear()+1,0,1).getDay()-t;e=e>=0?e:e+7,o=e<4?1:53}}else o=Math.floor((i+a-1)/7);return o},Date.prototype.getMonthFormatted=function(){"use strict";var t=this.getMonth()+1;return t<10?"0"+t:t},Date.prototype.getDateFormatted=function(){"use strict";var t=this.getDate();return t<10?"0"+t:t},String.prototype.format||(String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,(function(e,a){return void 0!==t[a]?t[a]:e}))}),String.prototype.formatNum||(String.prototype.formatNum=function(t){for(var e=""+this;e.length<t;)e="0"+e;return e}),function(t){"use strict";var e={tooltip_container:"body",width:"100%",view:"month",day:"now",cell_navigation:!0,time_start:"06:00",time_end:"22:00",time_split:"30",events_source:"",events_cache:!1,format12:!1,am_suffix:"AM",pm_suffix:"PM",tmpl_path:"tmpls/",tmpl_cache:!0,classes:{months:{inmonth:"cal-day-inmonth",outmonth:"cal-day-outmonth",saturday:"cal-day-weekend",sunday:"cal-day-weekend",holidays:"cal-day-holiday",today:"cal-day-today"},week:{workday:"cal-day-workday",saturday:"cal-day-weekend",sunday:"cal-day-weekend",holidays:"cal-day-holiday",today:"cal-day-today"}},modal:null,modal_type:"iframe",modal_title:null,views:{year:{slide_events:1,enable:1},month:{slide_events:1,enable:1},week:{enable:1},day:{enable:1}},merge_holidays:!1,display_week_numbers:!0,weekbox:!0,show_events_which_fits_time:!1,headers:{},onAfterEventsLoad:function(t){},onBeforeEventsLoad:function(t){t()},onAfterViewLoad:function(t){},onAfterModalShown:function(t){},onAfterModalHidden:function(t){},events:[],templates:{year:"",month:"",week:"",day:""},stop_cycling:!1},a={first_day:2,week_numbers_iso_8601:!1,holidays:{"01-01":"New Year's Day","01+3*1":"Birthday of Dr. Martin Luther King, Jr.","02+3*1":"Washington's Birthday","05-1*1":"Memorial Day","04-07":"Independence Day","09+1*1":"Labor Day","10+2*1":"Columbus Day","11-11":"Veterans Day","11+4*4":"Thanksgiving Day","25-12":"Christmas"}},o={error_noview:"Calendar: View {0} not found",error_dateformat:'Calendar: Wrong date format {0}. Should be either "now" or "yyyy-mm-dd"',error_loadurl:"Calendar: Event URL is not set",error_where:'Calendar: Wrong navigation direction {0}. Can be only "next" or "prev" or "today"',error_timedevide:"Calendar: Time split parameter should divide 60 without decimals. Something like 10, 15, 30",no_events_in_day:"No events in this day.",title_year:"{0}",title_month:"{0} {1}",title_week:"week {0} of {1}",title_day:"{0} {1} {2}, {3}",week:"Week {0}",all_day:"All day",time:"Time",events:"Events",before_time:"Ends before timeline",after_time:"Starts after timeline",m0:"January",m1:"February",m2:"March",m3:"April",m4:"May",m5:"June",m6:"July",m7:"August",m8:"September",m9:"October",m10:"November",m11:"December",ms0:"Jan",ms1:"Feb",ms2:"Mar",ms3:"Apr",ms4:"May",ms5:"Jun",ms6:"Jul",ms7:"Aug",ms8:"Sep",ms9:"Oct",ms10:"Nov",ms11:"Dec",d0:"Sunday",d1:"Monday",d2:"Tuesday",d3:"Wednesday",d4:"Thursday",d5:"Friday",d6:"Saturday"},i="";try{"object"==t.type(window.jstz)&&"function"==t.type(jstz.determine)&&(i=jstz.determine().name(),"string"!==t.type(i)&&(i=""))}catch(t){console.error("No se pudo determinar la zona horaria")}function n(t,e){var a,o,i;for(o in i=t,a=t.indexOf("?")<0?"?":"&",e)i+=a+o+"="+encodeURIComponent(e[o]),a="&";return i}function s(e,o){var i=null!=e.options[o]?e.options[o]:null,n=null!=e.locale[o]?e.locale[o]:null;if("holidays"==o&&e.options.merge_holidays){var s={};return t.extend(!0,s,n||a.holidays),i&&t.extend(!0,s,i),s}return null!=i?i:null!=n?n:a[o]}function r(e,a){var o=[],i=s(e,"holidays");for(var n in i)o.push(n+":"+i[n]);if(o.push(a),(o=o.join("|"))in r.cache)return r.cache[o];var d=[];return t.each(i,(function(e,o){var i=null,n=null,s=!1;if(t.each(e.split(">"),(function(t,o){var r,d=null;if(r=/^(\d\d)-(\d\d)$/.exec(o))d=new Date(a,parseInt(r[2],10)-1,parseInt(r[1],10));else if(r=/^(\d\d)-(\d\d)-(\d\d\d\d)$/.exec(o))parseInt(r[3],10)==a&&(d=new Date(a,parseInt(r[2],10)-1,parseInt(r[1],10)));else if(r=/^easter(([+\-])(\d+))?$/.exec(o))d=function(t,e){var a=t%19,o=Math.floor(t/100),i=t%100,n=Math.floor(o/4),s=o%4,r=Math.floor((o+8)/25),l=(19*a+o-n-Math.floor((o-r+1)/3)+15)%30,d=(32+2*s+2*Math.floor(i/4)-l-i%4)%7,h=l+d+7*Math.floor((a+11*l+22*d)/451)+114,p=Math.floor(h/31)-1;return new Date(t,p,h%31+1+(e||0),0,0,0)}(a,r[1]?parseInt(r[1],10):0);else if(r=/^(\d\d)([+\-])([1-5])\*([0-6])$/.exec(o)){var h=parseInt(r[1],10)-1,p=r[2],c=parseInt(r[3]),u=parseInt(r[4]);switch(p){case"+":for(var m=new Date(a,h,-6);m.getDay()!=u;)m=new Date(m.getFullYear(),m.getMonth(),m.getDate()+1);d=new Date(m.getFullYear(),m.getMonth(),m.getDate()+7*c);break;case"-":for(m=new Date(a,h+1,7);m.getDay()!=u;)m=new Date(m.getFullYear(),m.getMonth(),m.getDate()-1);d=new Date(m.getFullYear(),m.getMonth(),m.getDate()-7*c)}}if(!d)return l("Unknown holiday: "+e),s=!0,!1;switch(t){case 0:i=d;break;case 1:if(d.getTime()<=i.getTime())return l("Unknown holiday: "+e),s=!0,!1;n=d;break;default:return l("Unknown holiday: "+e),s=!0,!1}})),!s){var r=[];if(n)for(var h=new Date(i.getTime());h.getTime()<=n.getTime();h.setDate(h.getDate()+1))r.push(new Date(h.getTime()));else r.push(i);d.push({name:o,days:r})}})),r.cache[o]=d,r.cache[o]}function l(e){"object"==t.type(window.console)&&"function"==t.type(window.console.warn)&&window.console.warn("[Bootstrap-Calendar] "+e)}function d(a,o){return this.options=t.extend(!0,{position:{start:new Date,end:new Date}},e,a),this.setLanguage(this.options.language),this.context=o,o.css("width",this.options.width).addClass("cal-context"),this.view(),o.triggerHandler("initComplete"),this}function h(e,a,o,i){e.stopPropagation();var n=(a=t(a)).closest(".cal-cell"),s=n.closest(".cal-before-eventlist"),r=n.data("cal-row");a.fadeOut("fast"),o.slideUp("fast",(function(){var e=t(".events-list",n);o.html(i.options.templates["events-list"]({cal:i,events:i.getEventsBetween(parseInt(e.data("cal-start")),parseInt(e.data("cal-end")))})),s.after(o),i.activecell=t("[data-cal-date]",n).text(),t("#cal-slide-tick").addClass("tick"+r).show(),i.context.triggerHandler("beforeShowCell"),o.slideDown("fast",(function(){t("body").one("click",(function(){i.context.trigger("beforeHideCell"),o.slideUp("fast"),i.activecell=0,i.context.trigger("afterHideCell")})),i.context.trigger("afterShowCell")}))})),setTimeout((function(){t("a.event-item").mouseenter((function(){t('a[data-event-id="'+t(this).data("event-id")+'"]').closest(".cal-cell1").addClass("day-highlight dh-"+t(this).data("event-class"))})),t("a.event-item").mouseleave((function(){t("div.cal-cell1").removeClass("day-highlight dh-"+t(this).data("event-class"))})),t("a.event-item").parent().click((function(){i.context.trigger("eventClick")})),t("a.event-item").parent().dblclick((function(){i.context.trigger("eventDoubleClick")})),i._update_modal()}),400)}r.cache={},d.prototype.setOptions=function(e){t.extend(this.options,e),"language"in e&&this.setLanguage(e.language),"modal"in e&&this._update_modal()},d.prototype.setLanguage=function(e){window.calendar_languages&&e in window.calendar_languages?(this.locale=t.extend(!0,{},o,calendar_languages[e]),this.options.language=e):(this.locale=o,delete this.options.language)},d.prototype._render=function(){t(this.context).trigger("beforeRender"),this.context.html(""),this._loadTemplate(this.options.view),this.stop_cycling=!1;var e={};e.cal=t.extend({},this),e.day=1,1==s(this,"first_day")?e.days_name=[this.locale.d1,this.locale.d2,this.locale.d3,this.locale.d4,this.locale.d5,this.locale.d6,this.locale.d0]:e.days_name=[this.locale.d0,this.locale.d1,this.locale.d2,this.locale.d3,this.locale.d4,this.locale.d5,this.locale.d6];var a=parseInt(this.options.position.start.getTime()),o=parseInt(this.options.position.end.getTime());switch(e.events=this.getEventsBetween(a,o),this.options.view){case"month":break;case"week":case"day":this._calculate_hour_minutes(e)}e.start=new Date(this.options.position.start.getTime()),e.lang=this.locale,this.context.append(this.options.templates[this.options.view](e)),this._update(),t(this.context).trigger("afterRender")},d.prototype._format_hour=function(t,e){var a=t.split(":"),o=parseInt(a[0]),i=parseInt(a[1]),n=(e="undefined"==e)?2:1,s="";return this.options.format12&&(s=o<12?this.options.am_suffix:this.options.pm_suffix,0==(o%=12)&&(o=12)),o.toString().formatNum(n)+":"+i.toString().formatNum(2)+s},d.prototype._format_time=function(t){return this._format_hour(t.getHours()+":"+t.getMinutes())},d.prototype._calculate_hour_minutes=function(e){var a=this,o=parseInt(this.options.time_split),i=60/o,n=Math.min(i,1);(i>=1&&i%1!=0||i<1&&1440/o%1!=0)&&t.error(this.locale.error_timedevide);var s=this.options.time_start.split(":"),r=this.options.time_end.split(":");e.hours=(parseInt(r[0])-parseInt(s[0]))*n;var d=e.hours*i-parseInt(s[1])/o,h=6e4*o,p=new Date(this.options.position.start.getTime());p.setHours(s[0]),p.setMinutes(s[1]);var c=new Date(this.options.position.end.getTime()-864e5);c.setHours(r[0]),c.setMinutes(r[1]),e.all_day=[],e.by_hour=[],e.after_time=[],e.before_time=[],t.each(e.events,(function(t,o){var i=new Date(parseInt(o.start)),n=new Date(parseInt(o.end));if(o.start_hour=a._format_time(i),o.end_hour=a._format_time(n),o.start<p.getTime()&&(l(1),o.start_hour=i.getDate()+" "+a.locale["ms"+i.getMonth()]+" "+o.start_hour),o.end>c.getTime()&&(l(1),o.end_hour=n.getDate()+" "+a.locale["ms"+n.getMonth()]+" "+o.end_hour),a.options.show_events_which_fits_time){if(o.start<p.getTime())return void e.before_time.push(o);if(o.end>c.getTime())return void e.after_time.push(o);if(o.start<p.getTime()&&o.end<c.getTime())return void e.all_day.push(o)}else{if(o.start<=p.getTime()&&o.end>=c.getTime())return void e.all_day.push(o);if(o.end<p.getTime())return void e.before_time.push(o);if(o.start>c.getTime())return void e.after_time.push(o)}var s=p.getTime()-o.start;o.top=s>=0?0:Math.abs(s)/h;var r=Math.abs(d-o.top),u=(o.end-o.start)/h;s>=0&&(u=(o.end-p.getTime())/h),o.lines=u,u>r&&(o.lines=r),e.by_hour.push(o)}))},d.prototype._hour_min=function(t){var e=this.options.time_start.split(":"),a=parseInt(this.options.time_split),o=60/a;return 0==t?o-parseInt(e[1])/a:o},d.prototype._hour=function(t,e){var a=this.options.time_start.split(":"),o=parseInt(this.options.time_split),i=""+(parseInt(a[0])+t*Math.max(o/60,1)),n=""+o*e;return this._format_hour(i.formatNum(2)+":"+n.formatNum(2))},d.prototype._week=function(e){this._loadTemplate("week-days");var a={},o=parseInt(this.options.position.start.getTime()),i=parseInt(this.options.position.end.getTime()),n=[],r=s(this,"first_day");return t.each(this.getEventsBetween(o,i),(function(t,e){var a=new Date(parseInt(e.start));a.setHours(0,0,0,0);var i=new Date(parseInt(e.end));e.start_day=new Date(parseInt(a.getTime())).getDay(),1==r&&(e.start_day=(e.start_day+6)%7),i.getTime()-a.getTime()<=864e5?e.days=1:e.days=(i.getTime()-a.getTime())/864e5,a.getTime()<o&&(e.days=e.days-(o-a.getTime())/864e5,e.start_day=0),e.days=Math.ceil(e.days),e.start_day+e.days>7&&(e.days=7-e.start_day),n.push(e)})),a.events=n,a.cal=this,this.options.templates["week-days"](a)},d.prototype._month=function(t){this._loadTemplate("year-month");var e={cal:this},a=t+1;e.data_day=this.options.position.start.getFullYear()+"-"+(a<10?"0"+a:a)+"-01",e.month_name=this.locale["m"+t];var o=new Date(this.options.position.start.getFullYear(),t,1,0,0,0);return e.start=parseInt(o.getTime()),e.end=parseInt(new Date(this.options.position.start.getFullYear(),t+1,1,0,0,0).getTime()),e.events=this.getEventsBetween(e.start,e.end),this.options.templates["year-month"](e)},d.prototype._day=function(e,a){this._loadTemplate("month-day");var o={tooltip:"",cal:this},i=this.options.classes.months.outmonth,n=this.options.position.start.getDay();2==s(this,"first_day")?n++:n=0==n?7:n,a=a-n+1;var r=new Date(this.options.position.start.getFullYear(),this.options.position.start.getMonth(),a,0,0,0);a>0&&(i=this.options.classes.months.inmonth);var l=new Date(this.options.position.end.getTime()-1).getDate();a+1>l&&(this.stop_cycling=!0),a>l&&(a-=l,i=this.options.classes.months.outmonth),i=(i+" "+this._getDayClass("months",r)).trim(),a<=0&&(a=new Date(this.options.position.start.getFullYear(),this.options.position.start.getMonth(),0).getDate()-Math.abs(a),i+=" cal-month-first-row");var d=this._getHoliday(r);if(!1!==d&&(o.tooltip=d),this.options.date_range_start){var h=(c=this.options.date_range_start).getDate()+"/"+(c.getMonth()+1)+"/"+c.getFullYear(),p=t.datepicker.parseDate("dd/mm/yy",h);r.getTime()<p.getTime()&&(i+=" rup-out-of-range")}if(this.options.date_range_end){h=(c=this.options.date_range_end).getDate()+"/"+(c.getMonth()+1)+"/"+c.getFullYear();var c,u=t.datepicker.parseDate("dd/mm/yy",h);r.getTime()>u.getTime()&&(i+=" rup-out-of-range")}return o.data_day=r.getFullYear()+"-"+r.getMonthFormatted()+"-"+(a<10?"0"+a:a),o.cls=i,o.day=a,o.start=parseInt(r.getTime()),o.end=parseInt(o.start+864e5),o.events=this.getEventsBetween(o.start,o.end),this.options.templates["month-day"](o)},d.prototype._getHoliday=function(e){var a=!1;return t.each(r(this,e.getFullYear()),(function(){var o=!1;if(t.each(this.days,(function(){if(this.toDateString()==e.toDateString())return o=!0,!1})),o)return a=this.name,!1})),a},d.prototype._getHolidayName=function(t){var e=this._getHoliday(t);return!1===e?"":e},d.prototype._getDayClass=function(t,e){var a=this,o=function(e,o){var i;"string"==typeof(i=a.options.classes&&t in a.options.classes&&e in a.options.classes[t]?a.options.classes[t][e]:"")&&i.length&&o.push(i)},i=[];switch(e.toDateString()==(new Date).toDateString()&&o("today",i),!1!==this._getHoliday(e)&&o("holidays",i),e.getDay()){case 0:o("sunday",i);break;case 6:o("saturday",i)}return o(e.toDateString(),i),i.join(" ")},d.prototype.view=function(e){if(t(this.context).triggerHandler("beforeChangeView",e),e){if(!this.options.views[e].enable)return;this.options.view=e}this._init_position(),this._loadEvents(),this._render(),this.options.onAfterViewLoad.call(this,this.options.view),t(this.context).triggerHandler("afterChangeView",e)},d.prototype.navigate=function(e,a){var o=t.extend({},this.options.position),i={start:new Date(this.options.position.start.getTime()),end:new Date(this.options.position.end.getTime())};if("next"==e)switch(this.options.view){case"year":o.start.setFullYear(this.options.position.start.getFullYear()+1);break;case"month":o.start.setMonth(this.options.position.start.getMonth()+1);break;case"week":o.start.setDate(this.options.position.start.getDate()+7);break;case"day":o.start.setDate(this.options.position.start.getDate()+1)}else if("prev"==e)switch(this.options.view){case"year":o.start.setFullYear(this.options.position.start.getFullYear()-1);break;case"month":o.start.setMonth(this.options.position.start.getMonth()-1);break;case"week":o.start.setDate(this.options.position.start.getDate()-7);break;case"day":o.start.setDate(this.options.position.start.getDate()-1)}else"today"==e?o.start.setTime((new Date).getTime()):t.error(this.locale.error_where.format(e));var n=this,s=function(){console.warn("CanÂ´t navigate to an out of range time."),n.options.position=i,n.options.day=i.start.getFullYear()+"-"+i.start.getMonthFormatted()+"-"+i.start.getDateFormatted(),n.view()};this.options.date_range_start&&function(){var t=new Date(o.start.getTime());switch(n.options.view){case"year":t.setFullYear(o.start.getFullYear()+1);break;case"month":t.setMonth(o.start.getMonth()+1);break;case"week":t.setDate(o.start.getDate()+7);break;case"day":t.setDate(o.start.getDate()+1)}return t}().getTime()<this.options.date_range_start.getTime()||this.options.date_range_end&&o.start.getTime()>this.options.date_range_end.getTime()?s():(this.options.day=o.start.getFullYear()+"-"+o.start.getMonthFormatted()+"-"+o.start.getDateFormatted(),this.view(),_.isFunction(a)&&a())},d.prototype._init_position=function(){var e,a,o;if("now"==this.options.day){var i=new Date;e=i.getFullYear(),a=i.getMonth(),o=i.getDate()}else if(this.options.day.match(/^\d{4}-\d{2}-\d{2}$/g)){var n=this.options.day.split("-");e=parseInt(n[0],10),a=parseInt(n[1],10)-1,o=parseInt(n[2],10)}else t.error(this.locale.error_dateformat.format(this.options.day));switch(this.options.view){case"year":this.options.position.start.setTime(new Date(e,0,1).getTime()),this.options.position.end.setTime(new Date(e+1,0,1).getTime());break;case"month":this.options.position.start.setTime(new Date(e,a,1).getTime()),this.options.position.end.setTime(new Date(e,a+1,1).getTime());break;case"day":this.options.position.start.setTime(new Date(e,a,o).getTime()),this.options.position.end.setTime(new Date(e,a,o+1).getTime());break;case"week":var r,l=new Date(e,a,o);r=1==s(this,"first_day")?l.getDate()-(l.getDay()+6)%7:l.getDate()-l.getDay(),this.options.position.start.setTime(new Date(e,a,r).getTime()),this.options.position.end.setTime(new Date(e,a,r+7).getTime());break;default:t.error(this.locale.error_noview.format(this.options.view))}return this},d.prototype.getTitle=function(){var t=this.options.position.start;switch(this.options.view){case"year":return this.locale.title_year.format(t.getFullYear());case"month":return this.locale.title_month.format(this.locale["m"+t.getMonth()],t.getFullYear());case"week":return this.locale.title_week.format(t.getWeek(),t.getFullYear());case"day":return this.locale.title_day.format(this.locale["d"+t.getDay()],t.getDate(),this.locale["m"+t.getMonth()],t.getFullYear())}},d.prototype.getYear=function(){return this.options.position.start.getFullYear()},d.prototype.getMonth=function(){var t=this.options.position.start;return this.locale["m"+t.getMonth()]},d.prototype.getDay=function(){var t=this.options.position.start;return this.locale["d"+t.getDay()]},d.prototype.isToday=function(){var t=(new Date).getTime();return t>this.options.position.start.getTime()&&t<this.options.position.end.getTime()},d.prototype.getStartDate=function(){return this.options.position.start},d.prototype.getEndDate=function(){return this.options.position.end},d.prototype._loadEvents=function(){var e,a=this,o=null;switch("events_source"in this.options&&""!==this.options.events_source?o=this.options.events_source:"events_url"in this.options&&(o=this.options.events_url,l("The events_url option is DEPRECATED and it will be REMOVED in near future. Please use events_source instead.")),t.type(o)){case"function":e=function(){return o(a.options.position.start,a.options.position.end,i)};break;case"array":e=function(){return[].concat(o)};break;case"string":o.length&&(e=function(){var e=[],s=a.options.position.start,r=a.options.position.end,l={from:s.getTime(),to:r.getTime(),utc_offset_from:s.getTimezoneOffset(),utc_offset_to:r.getTimezoneOffset()};return i.length&&(l.browser_timezone=i),t.ajax({url:n(o,l),dataType:"json",type:"GET",async:!1,headers:a.options.headers,error:function(e,o,i){t(a.context).triggerHandler("afterLoadEventsError",e)},success:function(e){t(a.context).triggerHandler("afterLoadEventsSuccess",e)}}).done((function(o){o.success||t.error(o.error),o.result&&(e=o.result,t(a.context).triggerHandler("afterLoadEventsSuccess"))})),e})}e||t.error(this.locale.error_loadurl);var s=this.options.onBeforeEventsLoad;this.options.onBeforeEventsLoad=function(){t(a.context).triggerHandler("beforeLoadEvents"),s(arguments[0])},this.options.onBeforeEventsLoad.call(this,(function(){a.options.events.length&&a.options.events_cache||(a.options.events=e(),a.options.events.sort((function(t,e){var a;return 0==(a=t.start-e.start)&&(a=t.end-e.end),a})));var o=a.options.onAfterEventsLoad;a.options.onAfterEventsLoad=function(){t(a.context).triggerHandler("afterLoadEventsComplete"),o(arguments)},a.options.onAfterEventsLoad.call(a,a.options.events)}))},d.prototype._templatePath=function(t){return"function"==typeof this.options.tmpl_path?this.options.tmpl_path(t):this.options.tmpl_path+t+".html"},d.prototype._loadTemplate=function(e){if(!this.options.templates[e]){var a=this;t.ajax({url:a._templatePath(e),dataType:"html",type:"GET",async:!1,cache:this.options.tmpl_cache}).done((function(t){a.options.templates[e]=_.template(t)}))}},d.prototype._update=function(){var e=this;t('*[data-toggle="tooltip"]').tooltip({container:this.options.tooltip_container,html:!0,trigger:"hover"}),!0===e.options.cell_navigation&&(t("*[data-cal-date]").click((function(){var a=t(this).data("cal-view");e.options.day=t(this).data("cal-date"),e.view(a)})),t(".cal-cell").dblclick((function(){var a=t("[data-cal-date]",this).data("cal-view");e.options.day=t("[data-cal-date]",this).data("cal-date"),t(".tooltip").hide(),e.view(a)})),t(".rup-out-of-range").each((function(e,a){t(a).parent().off("dblclick"),t("span",t(a)).off("click")}))),this["_update_"+this.options.view](),this._update_modal()},d.prototype._update_modal=function(){var e=this;if(t("a[data-event-id]",this.context).unbind("click"),e.options.modal){var a=t(e.options.modal);if(a.length){var o=null;"iframe"==e.options.modal_type&&(o=t(document.createElement("iframe")).attr({width:"100%",frameborder:"0"})),t("a[data-event-id]",this.context).on("click",(function(i){i.preventDefault(),i.stopPropagation();var n=t(this).attr("href"),s=t(this).data("event-id");i=_.find(e.options.events,(function(t){return t.id==s})),"iframe"==e.options.modal_type&&(o.attr("src",n),t(".modal-body",a).html(o)),(!a.data("handled.bootstrap-calendar")||a.data("handled.bootstrap-calendar")&&a.data("handled.event-id")!=i.id)&&a.off("show.bs.modal").off("shown.bs.modal").off("hidden.bs.modal").on("show.bs.modal",(function(){var o=t(this).find(".modal-body");switch(e.options.modal_type){case"iframe":var s=o.height()-parseInt(o.css("padding-top"),10)-parseInt(o.css("padding-bottom"),10);t(this).find("iframe").height(Math.max(s,50));break;case"ajax":t.ajax({url:n,dataType:"html",async:!1,success:function(t){o.html(t)}});break;case"template":e._loadTemplate("modal"),o.html(e.options.templates.modal({event:i,calendar:e}))}_.isFunction(e.options.modal_title)&&a.find(".modal-title").html(e.options.modal_title(i))})).on("shown.bs.modal",(function(){e.options.onAfterModalShown.call(e,e.options.events)})).on("hidden.bs.modal",(function(){e.options.onAfterModalHidden.call(e,e.options.events)})).data("handled.bootstrap-calendar",!0).data("handled.event-id",i.id),a.modal("show")}))}}},d.prototype._update_day=function(){t("#cal-day-panel").height(t("#cal-day-panel-hour").height())},d.prototype._update_week=function(){},d.prototype._update_year=function(){this._update_month_year()},d.prototype._update_month=function(){this._update_month_year();var e=this;if(1==this.options.weekbox){var a=t(document.createElement("div")).attr("id","cal-week-box"),o=this.options.position.start.getFullYear()+"-"+this.options.position.start.getMonthFormatted()+"-";e.context.find(".cal-month-box .cal-row-fluid").on("mouseenter",(function(){t(e.context).trigger("beforeShowWeekBox");var i=new Date(e.options.position.start),n=t(".cal-cell1:first-child .cal-month-day",this),s=n.hasClass("cal-month-first-row")?1:t("[data-cal-date]",n).text();i.setDate(parseInt(s)),s=s<10?"0"+s:s,a.html(e.locale.week.format(1==e.options.display_week_numbers?i.getWeek():"")),a.attr("data-cal-week",o+s).show().appendTo(n),t(e.context).trigger("afterShowWeekBox")})).on("mouseleave",(function(){t(e.context).trigger("beforeHideWeekBox"),a.hide(),t(e.context).trigger("afterHideWeekBox")})),a.click((function(){e.options.day=t(this).data("cal-week"),e.view("week")}))}e.context.find("a.event").mouseenter((function(){t('a[data-event-id="'+t(this).data("event-id")+'"]').closest(".cal-cell1").addClass("day-highlight dh-"+t(this).data("event-class"))})),e.context.find("a.event").mouseleave((function(){t("div.cal-cell1").removeClass("day-highlight dh-"+t(this).data("event-class"))}))},d.prototype._update_month_year=function(){if(this.options.views[this.options.view].slide_events){var e=this,a=t(document.createElement("div")).attr("id","cal-day-tick").html('<i class="mdi mdi-chevron-down"></i>');e.context.find(".cal-month-day, .cal-year-box .span3").on("mouseenter",(function(){0!=t(".events-list",this).length&&t(this).children("[data-cal-date]").text()!=e.activecell&&a.show().appendTo(this)})).on("mouseleave",(function(){a.hide()})).on("click",(function(i){t(i.target).hasClass("event")||0!=t(".events-list",this).length&&t(this).children("[data-cal-date]").text()!=e.activecell&&h(i,a,o,e)}));var o=t(document.createElement("div")).attr("id","cal-slide-box");o.hide().click((function(t){t.stopPropagation()})),this._loadTemplate("events-list"),a.click((function(a){h(a,t(this),o,e)}))}},d.prototype.getEventsBetween=function(e,a){var o=[];return t.each(this.options.events,(function(){if(null==this.start)return!0;var t=this.end||this.start;parseInt(this.start)<a&&parseInt(t)>e&&o.push(this)})),o},t.fn.calendar=function(t){return new d(t,this)}}(jQuery);
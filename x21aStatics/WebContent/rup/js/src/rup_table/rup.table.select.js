/*! For license information please see rup.table.select.js.LICENSE.txt */
!function(e){"function"==typeof define&&define.amd?define(["jquery","datatables.net","../rup.contextMenu","../rup.feedback"],(function(t){return e(t,window,document)})):"object"==typeof exports?module.exports=function(t,i){return t||(t=window),i&&i.fn.dataTable||(i=require("datatables.net")(t,i).$),e(i,t,t.document)}:e(jQuery,window,document)}((function(e,t,i){"use strict";var n=e.fn.dataTable;function l(t,i,s){var o=t.settings()[0];o.multiselection.selectedRowsPerPage=[],o.oInit.select.funcionParams="";var d=e(o.nTBody);if(s.hasClass("tr-highlight"))s.removeClass("selected tr-highlight"),s.next(".child").length>=1&&s.next(".child").removeClass("selected tr-highlight"),o.multiselection.numSelected=0,o.multiselection.selectedIds=[],o.multiselection.lastSelectedId="",!o.oInit.noEdit&&void 0!==o.oInit.inlineEdit&&n.Api().inlineEdit.editSameLine(o,i)&&l(t,i,s);else{e("tr",d).removeClass("selected tr-highlight"),s.addClass("selected tr-highlight"),s.next(".child").length>=1&&s.next(".child").addClass("selected tr-highlight"),s.triggerHandler("tableHighlightRowAsSelected",o);var c=o.json.rows[i];if(void 0!==c){var r={id:n.Api().rupTable.getIdPk(c,o.oInit),page:t.page()+1,line:i};o.multiselection.selectedRowsPerPage.splice(0,0,r),o.multiselection.numSelected=1,o.multiselection.selectedIds=[n.Api().rupTable.getIdPk(c,o.oInit)],o.multiselection.lastSelectedId=n.Api().rupTable.getIdPk(c,o.oInit)}o.oInit.noEdit||void 0===o.oInit.inlineEdit||void 0===o.inlineEdit.lastRow||o.inlineEdit.lastRow.idx===i||n.Api().inlineEdit.restaurarFila(o,!0)}void 0!==o.oInit.buttons&&n.Api().buttons.displayRegex(o)}n.select={},n.select.version="3.0.0",n.select.init=function(i){var s=i.settings()[0];if(!n.versionCheck("2"))throw"Warning: Select requires DataTables 2 or newer";if(s.select=[],!s._select){var o=e(s.nTBody);s.oInit.selectFilaDer?o.on("click.DT contextmenu keydown","tr:not(.dtrg-group)",(function(t){if(1==t.which||32==t.which||3==t.which)if(t.target.className.indexOf("openResponsive")>-1||e(this).hasClass("editable"));else{e(this).triggerHandler("tableSelectBeforeSelectRow",s);var n=this._DT_RowIndex;l(i,n,e(this)),e(this).triggerHandler("tableSelectAfterSelectRow",s)}})):o.on("click.DT keydown","tr:not(.dtrg-group)",(function(t){if(1==t.which||32==t.which||3==t.which)if(t.target.className.indexOf("openResponsive")>-1||e(this).hasClass("editable"));else{e(this).triggerHandler("tableSelectBeforeSelectRow",s);var n=this._DT_RowIndex;l(i,n,e(this)),e(this).triggerHandler("tableSelectAfterSelectRow",s)}})),void 0===s.oInit.inlineEdit&&void 0===s.oInit.formEdit&&e(t).on("resize.dtr",n.util.throttle((function(){n.Api().editForm.addchildIcons(s)})))}};var s=n.Api.register;return s("select()",(function(){return this.iterator("table",(function(e){n.select.init(new n.Api(e))}))})),s("select.drawSelectId()",(function(t){!function(t){if(1===t.multiselection.selectedRowsPerPage.length){var i=t.multiselection.selectedRowsPerPage[0],l=t.json.rows[i.line];if(void 0!==l&&i.id===n.Api().rupTable.getIdPk(l,t.oInit)){var s=e(t.nTBody);e("tr:not(.dtrg-group)",s).eq(i.line).addClass("selected tr-highlight")}}}(t)})),s("select.deselect()",(function(t){var i=e(t.nTBody);e("tr",i).removeClass("selected tr-highlight"),t.multiselection.numSelected=0,t.multiselection.selectedIds=[],n.Api().buttons.displayRegex(t),e("#"+e.escapeSelector(t.sTableId)).trigger("rupTable_deselect",t)})),s("select.selectRowIndex()",(function(t,i,n){const s=t.settings()[0],o=e(s.nTBody);l(t,i,e("tr:not(.dtrg-group)",o).eq(i))})),s("select.defaultId()",(function(e){let t=e.oInit.select.defaultId;void 0!==t&&jQuery.inArray(t,e.multiselection.selectedIds)<0&&(e.multiselection.selectedIds.push(t),e.oInit.select.defaultId=void 0)})),e(i).on("preInit.dt.dtSelect",(function(e,t){"dt"===e.namespace&&void 0!==t.oInit.select&&!1!==t.oInit.select.activate&&n.select.init(new n.Api(t))})),n.select}));
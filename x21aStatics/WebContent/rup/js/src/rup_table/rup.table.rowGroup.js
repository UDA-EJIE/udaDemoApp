/*! For license information please see rup.table.rowGroup.js.LICENSE.txt */
!function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function(r){return t(r,window,document)})):"object"==typeof exports?module.exports=function(r,e){return r||(r=window),e&&e.fn.dataTable||(e=require("datatables.net")(r,e).$),t(e,0,r.document)}:t(jQuery,window,document)}((function(t,r,e,n){"use strict";var i=t.fn.dataTable,o=function(r,e){if(!i.versionCheck||!i.versionCheck("1.11"))throw"RowGroup requires DataTables 1.11 or newer";this.c=t.extend(!0,{},i.defaults.rowGroup,o.defaults,e),this.s={dt:new i.Api(r)},this.dom={};var n=this.s.dt.settings()[0],s=n.rowGroup;if(s)return s;n.rowGroup=this,this._constructor()};return t.extend(o.prototype,{dataSrc:function(r){if(r===n)return this.c.dataSrc;var e=this.s.dt;return this.c.dataSrc=r,t(e.table().node()).triggerHandler("rowgroup-datasrc.dt",[e,r]),this},disable:function(){return this.c.enable=!1,this},enable:function(t){return!1===t?this.disable():(this.c.enable=!0,this)},enabled:function(){return this.c.enable},_constructor:function(){var t=this,r=this.s.dt,e=r.settings()[0];r.on("draw.dtrg",(function(r,n){t.c.enable&&e===n&&t._draw()})),r.on("column-visibility.dt.dtrg responsive-resize.dt.dtrg",(function(){t._adjustColspan()})),r.on("destroy",(function(){r.off(".dtrg")}))},_adjustColspan:function(){t("tr."+this.c.className,this.s.dt.table().body()).find("th:visible, td:visible").attr("colspan",this._colspan())},_colspan:function(){return this.s.dt.columns().visible().reduce((function(t,r){return t+r}),0)},_draw:function(){var t=this.s.dt,r=this._group(0,t.rows({page:"current"}).indexes());this._groupDisplay(0,r)},_group:function(t,r){var e,o,s,a,u=Array.isArray(this.c.dataSrc)?this.c.dataSrc:[this.c.dataSrc],l=i.util.get(u[t]),d=this.s.dt,c=[];for(s=0,a=r.length;s<a;s++){var p=r[s];null!==(e=l(d.row(p).data(),t))&&e!==n||(e=this.c.emptyDataGroup),o!==n&&e===o||(c.push({dataPoint:e,rows:[]}),o=e),c[c.length-1].rows.push(p)}if(u[t+1]!==n)for(s=0,a=c.length;s<a;s++)c[s].children=this._group(t+1,c[s].rows);return c},_groupDisplay:function(r,e){for(var n,o=this.s.dt,s=o.context[0],a=0,u=e.length;a<u;a++){var l,d=e[a],c=d.dataPoint,p=d.rows,h=t("<span></span>").addClass("ui-icon tree-wrap-ltr ui-icon-circlesmall-minus");h.attr("identificador",a),this.c.startRender&&(n=this.c.startRender.call(this,o.rows(p),c,r),(l=this._rowWrap(n,this.c.startClassName,r))&&(l.insertBefore(o.row(p[0]).node()),t("td",l).prepend(h),l.click((function(){let r=t(this).find("span")[0],e=Number(r.getAttribute("identificador"));t(r).hasClass("ui-icon-circlesmall-minus")?i.Api().rowGroup().collapse(s,e,r,"next"):i.Api().rowGroup().expand(s,e,r,"next")})))),this.c.endRender&&(n=this.c.endRender.call(this,o.rows(p),c,r),(l=this._rowWrap(n,this.c.endClassName,r))&&(l.insertAfter(o.row(p[p.length-1]).node()),t("td",l).prepend(h),l.click((function(){let r=t(this).find("span")[0],e=Number(r.getAttribute("identificador"));t(r).hasClass("ui-icon-circlesmall-minus")?i.Api().rowGroup().collapse(s,e,r,"prev"):i.Api().rowGroup().expand(s,e,r,"prev")})))),d.children&&this._groupDisplay(r+1,d.children)}s.oInit.rowGroup.hiddenDefault&&i.Api().rowGroup().collapse(s)},_rowWrap:function(r,e,i){return null!==r&&""!==r||(r=this.c.emptyDataGroup),r===n||null===r?null:("object"==typeof r&&r.nodeName&&"tr"===r.nodeName.toLowerCase()?t(r):r instanceof t&&r.length&&"tr"===r[0].nodeName.toLowerCase()?r:t("<tr/>").append(t("<th/>").attr("colspan",this._colspan()).attr("scope","row").append(r))).addClass(this.c.className).addClass(e).addClass("dtrg-level-"+i)},_getRowsByGroup:function(r,e){let n=[];return"prev"===e?t.each(r.prevAll(),(function(){if(t(this).hasClass("dtrg-group"))return!1;n.push(this)})):t.each(r.nextAll(),(function(){if(t(this).hasClass("dtrg-group"))return!1;n.push(this)})),n}}),o.defaults={className:"cursor_pointer dtrg-group",dataSrc:0,emptyDataGroup:"No group",enable:!0,endClassName:"dtrg-end",endRender:null,startClassName:"dtrg-start",startRender:function(t,r){return r}},o.version="1.5.1",t.fn.dataTable.RowGroup=o,t.fn.DataTable.RowGroup=o,i.Api.register("rowGroup()",(function(){return this})),i.Api.register("rowGroup().disable()",(function(){return this.iterator("table",(function(t){t.rowGroup&&t.rowGroup.enable(!1)}))})),i.Api.register("rowGroup().enable()",(function(t){return this.iterator("table",(function(r){r.rowGroup&&r.rowGroup.enable(t===n||t)}))})),i.Api.register("rowGroup().enabled()",(function(){var t=this.context;return!(!t.length||!t[0].rowGroup)&&t[0].rowGroup.enabled()})),i.Api.register("rowGroup().dataSrc()",(function(t){return t===n?this.context[0].rowGroup.dataSrc():this.iterator("table",(function(r){r.rowGroup&&r.rowGroup.dataSrc(t)}))})),i.Api.register("rowGroup().expand()",(function(r,e,i,o){if(e===n){let e=t(r.nTBody).find("tr.dtrg-group span");t(r.nTBody).find("tr:not(.dtrg-group)").show(),e.addClass("ui-icon-circlesmall-minus"),e.removeClass("ui-icon-circlesmall-plus")}else{i===n&&(i=t(r.nTBody).find("[identificador="+e+"]")[0]);let s=r.rowGroup._getRowsByGroup(t(i.parentNode.parentElement),o);t.each(s,(function(){t(this).show()})),t(i).addClass("ui-icon-circlesmall-minus"),t(i).removeClass("ui-icon-circlesmall-plus"),t(i).triggerHandler("tablaGroupingClickGroupExpand",r)}})),i.Api.register("rowGroup().collapse()",(function(r,e,i,o){if(e===n){let e=t(r.nTBody).find("tr.dtrg-group span");t(r.nTBody).find("tr:not(.dtrg-group)").hide(),e.addClass("ui-icon-circlesmall-plus"),e.removeClass("ui-icon-circlesmall-minus")}else{i===n&&(i=t(r.nTBody).find("[identificador="+e+"]")[0]);let s=r.rowGroup._getRowsByGroup(t(i.parentNode.parentElement),o);t.each(s,(function(){t(this).hide()})),t(i).addClass("ui-icon-circlesmall-plus"),t(i).removeClass("ui-icon-circlesmall-minus"),t(i).triggerHandler("tablaGroupingClickGroup",r)}})),t(e).on("preInit.dt.dtrg",(function(r,e,n){if("dt"===r.namespace){var s=e.oInit.rowGroup,a=i.defaults.rowGroup;if(s||a){var u=t.extend({},a,s);!1!==s&&new o(e,u)}}})),o}));
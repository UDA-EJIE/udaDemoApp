/*! For license information please see rup.table.buttons.js.LICENSE.txt */
!function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n&&n.fn.dataTable||(n=require("datatables.net")(e,n).$),t(n,e,e.document)}:t(jQuery,window,document)}((function(t,e,n){"use strict";var o=t.fn.dataTable,i=0,s=0,r=1,a=o.ext.buttons,l=null;function c(e,n,o){t.fn.animate?e.stop().fadeIn(n,o):(e.css("display","block"),o&&o.call(e))}function u(e,n,o){t.fn.animate?e.stop().fadeOut(n,o):(e.css("display","none"),o&&o.call(e))}var d,p=function(e,n){if(!o.versionCheck("2"))throw"Warning: Buttons requires DataTables 2 or newer";var s=e.context[0].sTableId,r=e.context[0];r.ext=o.ext,r.ext.buttons={},r.ext.buttons.defaults={buttons:["addButton","editButton","cloneButton","deleteButton","reportsButton"],name:"main",tabIndex:0,dom:{container:{tag:"div",className:"dt-buttons row"},collection:{container:{className:"dt-button-collection",content:{className:"",tag:"div"},tag:"div"}},button:{tag:"button",className:"dt-button col-12 col-sm-auto btn-material",active:"dt-button-active",disabled:"disabled",spacer:{className:"dt-button-spacer",tag:"span"},liner:{tag:"span",className:""},dropClass:"",dropHtml:'<span class="dt-button-down-arrow">&#x25BC;</span>'},split:{action:{className:"dt-button-split-drop-button dt-button",tag:"button"},dropdown:{align:"split-right",className:"dt-button-split-drop",splitAlignClass:"dt-button-split-left",tag:"button"},wrapper:{className:"dt-button-split",tag:"div"}}}},r.ext.buttons.copyButton={text:function(e){return t.rup.i18nParse(t.rup.i18n.base,"rup_table.toolbar.reports.copyButton")},id:s+"copyButton_1",className:"btn-material-primary-low-emphasis buttons-copyButton",displayRegex:r.oInit.buttons.copy?.displayRegex?r.oInit.buttons.copy.displayRegex:/^\d+$/,insideContextMenu:r.oInit.buttons.contextMenu,type:"copyButton",request:{url:t.rup_utils.aplicatioInPortal()?"/clipboardReport?R01HNoPortal=true":"/clipboardReport",method:"POST",contentType:"application/json",dataType:"json",reportsExportAllColumns:!1},init:function(t,e,n){r.ext.buttons.copyButton.eventDT=t},action:function(e,n,o,i){void 0!==this.processing&&this.processing(!0),t("#"+t.escapeSelector(r.sTableId)).triggerHandler("tableButtonsBeforeCopyClick",[n,o,i]),T(n,this,i),t("#"+t.escapeSelector(r.sTableId)).triggerHandler("tableButtonsAfterCopyClick",[n,o,i])}},r.ext.buttons.excelButton={text:function(e){return t.rup.i18nParse(t.rup.i18n.base,"rup_table.toolbar.reports.excelButton")},id:s+"excelButton_1",className:"btn-material-primary-low-emphasis buttons-copyButton",displayRegex:r.oInit.buttons.excel?.displayRegex?r.oInit.buttons.excel.displayRegex:/^\d+$/,insideContextMenu:r.oInit.buttons.contextMenu,type:"excelButton",request:{url:t.rup_utils.aplicatioInPortal()?"/xlsxReport?R01HNoPortal=true":"/xlsxReport",method:"POST",contentType:"application/json",dataType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",reportsExportAllColumns:!1,fileName:"reportExcel",sheetTitle:"Usuario"},action:function(e,n,o,i){void 0!==this.processing&&this.processing(!0),t("#"+t.escapeSelector(r.sTableId)).triggerHandler("tableButtonsBeforeExcelClick",[n,o,i]),T(n,this,i),t("#"+t.escapeSelector(r.sTableId)).triggerHandler("tableButtonsAfterExcelClick",[n,o,i])}},r.ext.buttons.pdfButton={text:function(e){return t.rup.i18nParse(t.rup.i18n.base,"rup_table.toolbar.reports.pdfButton")},id:s+"pdfButton_1",className:"btn-material-primary-low-emphasis buttons-copyButton",displayRegex:r.oInit.buttons.pdf?.displayRegex?r.oInit.buttons.pdf.displayRegex:/^\d+$/,insideContextMenu:r.oInit.buttons.contextMenu,type:"pdfButton",request:{url:t.rup_utils.aplicatioInPortal()?"/pdfReport?R01HNoPortal=true":"/pdfReport",method:"POST",contentType:"application/json",dataType:"application/pdf",reportsExportAllColumns:!1,fileName:"reportPDF"},action:function(e,n,o,i){void 0!==this.processing&&this.processing(!0),t("#"+t.escapeSelector(r.sTableId)).triggerHandler("tableButtonsBeforePdfClick",[n,o,i]),T(n,this,i),t("#"+t.escapeSelector(r.sTableId)).triggerHandler("tableButtonsAfterPdfClick",[n,o,i])}},r.ext.buttons.odsButton={text:function(e){return t.rup.i18nParse(t.rup.i18n.base,"rup_table.toolbar.reports.odsButton")},id:s+"odsButton_1",className:"btn-material-primary-low-emphasis buttons-copyButton",displayRegex:r.oInit.buttons.ods?.displayRegex?r.oInit.buttons.ods.displayRegex:/^\d+$/,insideContextMenu:r.oInit.buttons.contextMenu,type:"odsButton",request:{url:t.rup_utils.aplicatioInPortal()?"/odsReport?R01HNoPortal=true":"/odsReport",method:"POST",contentType:"application/json",dataType:"application/vnd.oasis.opendocument.spreadsheet",reportsExportAllColumns:!1,fileName:"reportODS",sheetTitle:"Usuario"},action:function(e,n,o,i){void 0!==this.processing&&this.processing(!0),t("#"+t.escapeSelector(r.sTableId)).triggerHandler("tableButtonsBeforeOdsClick",[n,o,i]),T(n,this,i),t("#"+t.escapeSelector(r.sTableId)).triggerHandler("tableButtonsAfterOdsClick",[n,o,i])}},r.ext.buttons.csvButton={text:function(e){return t.rup.i18nParse(t.rup.i18n.base,"rup_table.toolbar.reports.csvButton")},id:s+"csvButton_1",className:"btn-material-primary-low-emphasis buttons-copyButton",displayRegex:r.oInit.buttons.csv?.displayRegex?r.oInit.buttons.csv.displayRegex:/^\d+$/,insideContextMenu:r.oInit.buttons.contextMenu,type:"csvButton",request:{url:t.rup_utils.aplicatioInPortal()?"/csvReport?R01HNoPortal=true":"/csvReport",method:"POST",contentType:"application/json",dataType:"text/csv",reportsExportAllColumns:!1,fileName:"reportCSV",sheetTitle:"Usuario"},action:function(e,n,o,i){void 0!==this.processing&&this.processing(!0),t("#"+t.escapeSelector(r.sTableId)).triggerHandler("tableButtonsBeforeCsvClick",[n,o,i]),T(n,this,i),t("#"+t.escapeSelector(r.sTableId)).triggerHandler("tableButtonsAfterCsvClick",[n,o,i])}},r.ext.buttons.addButton={text:function(e){return t.rup.i18nParse(t.rup.i18n.base,"rup_table.toolbar.add")},id:s+"addButton_1",className:"btn-material-primary-high-emphasis table_toolbar_btnAdd order-1",displayRegex:r.oInit.buttons.add?.displayRegex?r.oInit.buttons.add.displayRegex:/^\d+$/,insideContextMenu:r.oInit.buttons.contextMenu,type:"add",init:function(t,e,n){r.ext.buttons.addButton.eventDT=t},action:function(e,n,i,s){t("#"+t.escapeSelector(r.sTableId)).triggerHandler("tableButtonsBeforeAddClick",[n,i,s]),o.Api().buttons.actions(n,s),t("#"+t.escapeSelector(r.sTableId)).triggerHandler("tableButtonsAfterAddClick",[n,i,s])}},r.ext.buttons.editButton={text:function(e){return t.rup.i18nParse(t.rup.i18n.base,"rup_table.toolbar.edit")},id:s+"editButton_1",className:"btn-material-primary-high-emphasis table_toolbar_btnEdit order-2",displayRegex:r.oInit.buttons.edit?.displayRegex?r.oInit.buttons.edit.displayRegex:/^[1-9][0-9]*$/,insideContextMenu:r.oInit.buttons.contextMenu,type:"edit",init:function(t,e,n){r.ext.buttons.editButton.eventDT=t},action:function(e,n,i,s){t("#"+t.escapeSelector(r.sTableId)).triggerHandler("tableButtonsBeforeEditClick",[n,i,s]),o.Api().buttons.actions(n,s),t("#"+t.escapeSelector(r.sTableId)).triggerHandler("tableButtonsAfterEditClick",[n,i,s])}},r.ext.buttons.cloneButton={text:function(e){return t.rup.i18nParse(t.rup.i18n.base,"rup_table.toolbar.clone")},id:s+"cloneButton_1",className:"btn-material-primary-high-emphasis table_toolbar_btnClone order-3",displayRegex:r.oInit.buttons.clone?.displayRegex?r.oInit.buttons.clone.displayRegex:/^1$/,insideContextMenu:r.oInit.buttons.contextMenu,type:"clone",init:function(t,e,n){r.ext.buttons.cloneButton.eventDT=t},action:function(e,n,i,s){t("#"+t.escapeSelector(r.sTableId)).triggerHandler("tableButtonsBeforeCloneClick",[n,i,s]),o.Api().buttons.actions(n,s),t("#"+t.escapeSelector(r.sTableId)).triggerHandler("tableButtonsAfterCloneClick",[n,i,s])}},r.ext.buttons.deleteButton={text:function(e){return t.rup.i18nParse(t.rup.i18n.base,"rup_table.toolbar.delete")},id:s+"deleteButton_1",className:"btn-material-primary-high-emphasis table_toolbar_btnDelete order-4",displayRegex:r.oInit.buttons.delete?.displayRegex?r.oInit.buttons.delete.displayRegex:/^[1-9][0-9]*$/,insideContextMenu:r.oInit.buttons.contextMenu,type:"delete",init:function(t,e,n){r.ext.buttons.deleteButton.eventDT=t},action:function(e,n,i,s){t("#"+t.escapeSelector(r.sTableId)).triggerHandler("tableButtonsBeforeDeleteClick",[n,i,s]),o.Api().buttons.actions(n,s),t("#"+t.escapeSelector(r.sTableId)).triggerHandler("tableButtonsAfterDeleteClick",[n,i,s])}};var a=["copyButton","excelButton","pdfButton","odsButton","csvButton"];if(r.ext.buttons.reportsButton={extend:"collection",text:function(e){return t.rup.i18nParse(t.rup.i18n.base,"rup_table.toolbar.reports.main")},id:s+"informes_01",className:"btn-material-primary-medium-emphasis order-last ms-1 ms-lg-auto",displayRegex:r.oInit.buttons.informe?.displayRegex?r.oInit.buttons.informe.displayRegex:/^\d+$/,autoClose:!0,type:"reports",reportsExportAllColumns:!1,buttons:a},r.ext.buttons.custom=[],void 0!==r.oInit.buttons.size&&t.each(r.ext.buttons,(function(t,e){void 0!==e.className&&("lg"===r.oInit.buttons.size?e.className+=" btn-material-lg":"sm"===r.oInit.buttons.size&&(e.className+=" btn-material-sm"))})),void 0!==r.oInit.buttons.blackListButtons&&("all"===r.oInit.buttons.blackListButtons?(a=[],r.ext.buttons.defaults.buttons=[]):r.oInit.buttons.blackListButtons&&r.oInit.buttons.blackListButtons.length>0&&t.each(r.oInit.buttons.blackListButtons,(function(){let e=t.inArray(this,a);e>=0&&a.splice(e,1);let n=t.inArray(this,r.ext.buttons.defaults.buttons);n>=0&&r.ext.buttons.defaults.buttons.splice(n,1)}))),!r.oInit.noEdit&&void 0!==r.oInit.inlineEdit){t.extend(r.ext.buttons,r.oInit.inlineEdit.myButtons);for(let t in r.oInit.inlineEdit.myButtons)r.ext.buttons.defaults.buttons.push(t)}if(void 0!==r.oInit.buttons.myButtons){t.extend(r.ext.buttons,r.oInit.buttons.myButtons);for(let t in r.oInit.buttons.myButtons)r.ext.buttons.defaults.buttons.push(t),r.ext.buttons.custom.push(r.oInit.buttons.myButtons[t].id)}if(!(this instanceof p))return function(t){return new p(t,e).container()};void 0===n&&(n={}),!0===n&&(n={}),Array.isArray(n)&&(n={buttons:n}),this.c=t.extend(!0,{},r.ext.buttons.defaults,n),n.buttons&&(this.c.buttons=n.buttons),this.s={dt:new o.Api(e),buttons:[],listenKeys:"",namespace:"dtb"+i++},this.dom={container:t("<"+this.c.dom.container.tag+"></"+this.c.dom.container.tag+">").addClass(this.c.dom.container.className).attr("id",r.sTableId+"_containerToolbar")},this._constructor()};t.extend(p.prototype,{action:function(t,e){var n=this._nodeToButton(t);return void 0===e?n.conf.action:(n.conf.action=e,this)},active:function(e,n){var o=this._nodeToButton(e),i=this.c.dom.button.active,s=t(o.node);return o.inCollection&&this.c.dom.collection.button&&void 0!==this.c.dom.collection.button.active&&(i=this.c.dom.collection.button.active),void 0===n?s.hasClass(i):(s.toggleClass(i,void 0===n||n),this)},add:function(t,e,n){var o=this.s.buttons;if("string"==typeof e){for(var i=e.split("-"),s=this.s,r=0,a=i.length-1;r<a;r++)s=s.buttons[1*i[r]];o=s.buttons,e=1*i[i.length-1]}return this._expandButton(o,t,void 0!==t?t.split:void 0,(void 0===t||void 0===t.split||0===t.split.length)&&void 0!==s,!1,e),void 0!==n&&!0!==n||this._draw(),this},collectionRebuild:function(t,e){var n=this._nodeToButton(t);if(void 0!==e){var o;for(o=n.buttons.length-1;o>=0;o--)this.remove(n.buttons[o].node);for(n.conf.prefixButtons&&e.unshift.apply(e,n.conf.prefixButtons),n.conf.postfixButtons&&e.push.apply(e,n.conf.postfixButtons),o=0;o<e.length;o++){var i=e[o];this._expandButton(n.buttons,i,void 0!==i&&void 0!==i.config&&void 0!==i.config.split,!0,void 0!==i.parentConf&&void 0!==i.parentConf.split,null,i.parentConf)}}this._draw(n.collection,n.buttons)},container:function(){return this.dom.container},disable:function(e,n){var o=this._nodeToButton(e);return o.isSplit?t(o.node.childNodes[0]).addClass(this.c.dom.button.disabled).prop("disabled",!0):t(o.node).addClass(this.c.dom.button.disabled).prop("disabled",!0),n&&t("#"+t.escapeSelector(o.node.id)+"_contextMenuToolbar").addClass(this.c.dom.button.disabled),o.disabled=!0,this._checkSplitEnable(),this},destroy:function(){t("body").off("keyup."+this.s.namespace);var e,n,o=this.s.buttons.slice();for(e=0,n=o.length;e<n;e++)this.remove(o[e].node);this.dom.container.remove();var i=this.s.dt.settings()[0];for(e=0,n=i.length;e<n;e++)if(i.inst===this){i.splice(e,1);break}return this},enable:function(e,n,o){if(!1===n)return this.disable(e);var i=this._nodeToButton(e);return i.isSplit?t(i.node.childNodes[0]).removeClass(this.c.dom.button.disabled).prop("disabled",!1):t(i.node).removeClass(this.c.dom.button.disabled).prop("disabled",!1),o&&t("#"+t.escapeSelector(i.node.id)+"_contextMenuToolbar").removeClass(this.c.dom.button.disabled),i.disabled=!1,this._checkSplitEnable(),this},index:function(t,e,n){e||(e="",n=this.s.buttons);for(var o=0,i=n.length;o<i;o++){var s=n[o].buttons;if(n[o].node===t)return e+o;if(s&&s.length){var r=this.index(t,o+"-",s);if(null!==r)return r}}return null},name:function(){return this.c.name},node:function(e){if(!e)return this.dom.container;var n=this._nodeToButton(e);return t(n.node)},processing:function(e,n){var o=this.s.dt,i=this._nodeToButton(e);return void 0===n?t(i.node).hasClass("processing"):(t(i.node).toggleClass("processing",n),t(o.table().node()).triggerHandler("buttons-processing.dt",[n,o.button(e),o,t(e),i.conf]),this)},remove:function(e){var n=this._nodeToButton(e),o=this._nodeToHost(e),i=this.s.dt;if(n.buttons.length)for(var s=n.buttons.length-1;s>=0;s--)this.remove(n.buttons[s].node);n.conf.destroying=!0,n.conf.destroy&&n.conf.destroy.call(i.button(e),i,t(e),n.conf),this._removeKey(n.conf),t(n.node).remove(),n.inserter&&t(n.inserter).remove();var r=t.inArray(n,o);return o.splice(r,1),this},text:function(e,n){var o=this._nodeToButton(e),i=o.textNode,s=this.s.dt,r=t(o.node),a=function(t){return"function"==typeof t?t(s,r,o.conf):t};return void 0===n?a(o.conf.text):(o.conf.text=n,i.html(a(n)),this)},_constructor:function(){var e=this,o=this.s.dt,i=o.settings()[0],s=this.c.buttons;i._buttons||(i._buttons=[]),i._buttons.push({inst:this,name:this.c.name});for(var r=0,a=s.length;r<a;r++)this.add(s[r]);o.on("destroy",(function(t,n){n===i&&e.destroy()})),t("body").on("keyup."+this.s.namespace,(function(t){if((!n.activeElement||n.activeElement===n.body)&&null!=t.code){var o=t.code.toLowerCase();-1!==e.s.listenKeys.toLowerCase().indexOf(o)&&e._keypress(o,t)}}))},_addKey:function(e){e.key&&(this.s.listenKeys+=t.isPlainObject(e.key)?e.key.key:e.key)},_draw:function(t,e){t||(t=this.dom.container,e=this.s.buttons),t.children().detach();for(var n=0,o=e.length;n<o;n++)t.append(e[n].inserter),t.append(" "),e[n].buttons&&e[n].buttons.length&&this._draw(e[n].collection,e[n].buttons)},_expandButton:function(e,n,o,i,s,r,a){var l=this.s.dt,c=!1,u=this.c.dom.collection,d=Array.isArray(n)?n:[n];void 0===n&&(d=Array.isArray(o)?o:[o]);for(var p=0,f=d.length;p<f;p++){var b=this._resolveExtends(d[p]);if(b)if(c=!(!b.config||!b.config.split),Array.isArray(b))this._expandButton(e,b,void 0!==h&&void 0!==h.conf?h.conf.split:void 0,i,void 0!==a&&void 0!==a.split,r,a);else{var h=this._buildButton(b,i,void 0!==b.split||void 0!==b.config&&void 0!==b.config.split,s);if(h){if(null!=r?(e.splice(r,0,h),r++):e.push(h),h.conf.dropIcon&&!h.conf.split&&t(h.node).addClass(this.c.dom.button.dropClass).append(this.c.dom.button.dropHtml),h.conf.buttons&&(h.collection=t("<"+u.container.content.tag+"></"+u.container.content.tag+">"),h.conf._collection=h.collection,this._expandButton(h.buttons,h.conf.buttons,h.conf.split,!c,c,r,h.conf)),h.conf.split){h.collection=t("<"+u.container.tag+"></"+u.container.tag+">"),h.conf._collection=h.collection;for(var m=0;m<h.conf.split.length;m++){var g=h.conf.split[m];"object"==typeof g&&(g.parent=a,void 0===g.collectionLayout&&(g.collectionLayout=h.conf.collectionLayout),void 0===g.dropup&&(g.dropup=h.conf.dropup),void 0===g.fade&&(g.fade=h.conf.fade))}this._expandButton(h.buttons,h.conf.buttons,h.conf.split,!c,c,r,h.conf)}h.conf.parent=a,b.init&&b.init.call(l.button(h.node),l,t(h.node),b)}}}},_buildButton:function(e,n,o,i){var l,c,u=this,d=this.c.dom,p=this.s.dt,f=p.settings()[0],b=function(t){return"function"==typeof t?t(p,c,e):t},h=t.extend(!0,{},d.button);if(n&&o&&d.collection.split?t.extend(!0,h,d.collection.split.action):i||n?t.extend(!0,h,d.collection.button):o&&t.extend(!0,h,d.split.button),e.spacer){var m=t("<"+h.spacer.tag+"></"+h.spacer.tag+">").addClass("dt-button-spacer "+e.style+" "+h.spacer.className).html(b(e.text));return{conf:e,node:m,nodeChild:null,inserter:m,buttons:[],inCollection:n,isSplit:o,collection:null,textNode:m}}if(e.available&&!e.available(p,e)&&!e.html)return!1;if(e.html)c=t(e.html);else{var g=function(e,n,o,i,s){i.action.call(n.button(o),e,n,o,i,s),t(n.table().node()).triggerHandler("buttons-action.dt",[n.button(o),n,o,i])},v=function(t,e,n,o){o.async?(u.processing(n[0],!0),setTimeout((function(){g(t,e,n,o,(function(){u.processing(n[0],!1)}))}),o.async)):g(t,e,n,o,(function(){}))},x=e.tag||h.tag,y=void 0===e.clickBlurs||e.clickBlurs;if(c=t("<"+x+"></"+x+">").addClass(h.className).attr("tabindex",this.s.dt.settings()[0].iTabIndex).attr("aria-controls",this.s.dt.table().node().id).on("click.dtb",(function(t){t.preventDefault(),!c.hasClass(h.disabled)&&e.action&&v(t,p,c,e),y&&c.trigger("blur")})).on("keypress.dtb",(function(t){"Enter"===t.code&&(t.preventDefault(),!c.hasClass(h.disabled)&&e.action&&v(t,p,c,e))})),"a"===x.toLowerCase()&&c.attr("href","#"),"button"===x.toLowerCase()&&c.attr("type","button"),h.liner.tag){var I=t("<"+h.liner.tag+"></"+h.liner.tag+">").html(b(e.text)).addClass(h.liner.className);"a"===h.liner.tag.toLowerCase()&&I.attr("href","#"),c.append(I),l=I}else c.html(b(e.text)),l=c;if(!1===e.enabled&&c.addClass(h.disabled),e.id||(e.insideContextMenu=!1,e.id=f.sTableId+"_button_"+r++),c.attr("id",e.id),e.className&&c.addClass(e.className),e.titleAttr&&c.attr("title",b(e.titleAttr)),e.attr&&c.attr(e.attr),e.namespace||(e.namespace=".dt-button-"+s++),!e.icon)switch(e.type){case"add":e.icon="mdi-plus";break;case"edit":e.icon="mdi-playlist-edit";break;case"clone":e.icon="mdi-content-copy";break;case"delete":e.icon="mdi-trash-can-outline";break;case"reports":e.icon="mdi-file-export";break;case"copyButton":e.icon="mdi-clipboard-text-outline";break;case"excelButton":e.icon="mdi-file-excel";break;case"pdfButton":e.icon="mdi-file-pdf-box";break;case"odsButton":case"csvButton":e.icon="mdi-file";break;default:e.icon="mdi-cog"}void 0!==e.config&&e.config.split&&(e.split=e.config.split)}var B,C,T=this.c.dom.buttonContainer;if(B=T&&T.tag?t("<"+T.tag+"></"+T.tag+">").addClass(T.className).append(c):c,this._addKey(e),this.c.buttonCreated&&(B=this.c.buttonCreated(e,B)),o){var _=n?t.extend(!0,this.c.dom.split,this.c.dom.collection.split):this.c.dom.split,A=_.wrapper;C=t("<"+A.tag+"></"+A.tag+">").addClass(A.className).append(c);var k=t.extend(e,{autoClose:!0,align:_.dropdown.align,attr:{"aria-haspopup":"dialog","aria-expanded":!1},className:_.dropdown.className,closeButton:!1,splitAlignClass:_.dropdown.splitAlignClass,text:_.dropdown.text});this._addKey(k);var S=function(e,n,o,i){a.split.action.call(n.button(C),e,n,o,i),t(n.table().node()).triggerHandler("buttons-action.dt",[n.button(o),n,o,i]),o.attr("aria-expanded",!0)},E=t('<button class="'+_.dropdown.className+' dt-button"></button>').html(this.c.dom.button.dropHtml).addClass(this.c.dom.button.dropClass).on("click.dtb",(function(t){t.preventDefault(),t.stopPropagation(),E.hasClass(h.disabled)||S(t,p,E,k),y&&E.trigger("blur")})).on("keypress.dtb",(function(t){"Enter"===t.code&&(t.preventDefault(),E.hasClass(h.disabled)||S(t,p,E,k))}));0===e.split.length&&E.addClass("dtb-hide-drop"),C.append(E).attr(k.attr)}var w=o?C.get(0):c.get(0);return{conf:e,node:w,nodeChild:w&&w.children&&w.children.length?w.children[0]:null,inserter:o?C:B,buttons:[],inCollection:n,isSplit:o,inSplit:i,collection:null,textNode:l}},_checkSplitEnable:function(e){e||(e=this.s.buttons);for(var n=0;n<e.length;n++){var o=e[n];if(o.isSplit){var i=o.node.childNodes[1];this._checkAnyEnabled(o.buttons)?t(i).removeClass(this.c.dom.button.disabled).prop("disabled",!1):t(i).addClass(this.c.dom.button.disabled).prop("disabled",!1)}else o.isCollection&&this._checkSplitEnable(o.buttons)}},_checkAnyEnabled:function(t){for(var e=0;e<t.length;e++)if(!t[e].disabled)return!0;return!1},_nodeToButton:function(t,e){e||(e=this.s.buttons);for(var n=0,o=e.length;n<o;n++){if(e[n].node===t||e[n].nodeChild===t)return e[n];if(e[n].buttons.length){var i=this._nodeToButton(t,e[n].buttons);if(i)return i}}},_nodeToHost:function(t,e){e||(e=this.s.buttons);for(var n=0,o=e.length;n<o;n++){if(e[n].node===t)return e;if(e[n].buttons.length){var i=this._nodeToHost(t,e[n].buttons);if(i)return i}}},_keypress:function(e,n){if(!n._buttonsHandled){var o=function(o,i){if(o.key)if(o.key===e)n._buttonsHandled=!0,t(i).click();else if(t.isPlainObject(o.key)){if(o.key.key!==e)return;if(o.key.shiftKey&&!n.shiftKey)return;if(o.key.altKey&&!n.altKey)return;if(o.key.ctrlKey&&!n.ctrlKey)return;if(o.key.metaKey&&!n.metaKey)return;n._buttonsHandled=!0,t(i).click()}},i=function(t){for(var e=0,n=t.length;e<n;e++)o(t[e].conf,t[e].node),t[e].buttons.length&&i(t[e].buttons)};i(this.s.buttons)}},_removeKey:function(e){if(e.key){var n=t.isPlainObject(e.key)?e.key.key:e.key,o=this.s.listenKeys.split(""),i=t.inArray(n,o);o.splice(i,1),this.s.listenKeys=o.join("")}},_resolveExtends:function(e){var n,o,i=this,s=this.s.dt,r=s.context[0].ext.buttons;r.collection=a.collection;var l=function(n){for(var o=0;!t.isPlainObject(n)&&!Array.isArray(n);){if(void 0===n)return;if("function"==typeof n){if(!(n=n.call(i,s,e)))return!1}else if("string"==typeof n){if(!r[n])return{html:n};n=r[n]}if(++o>30)throw"Buttons: Too many iterations"}return Array.isArray(n)?n:t.extend({},n)};for(e=l(e);e&&e.extend;){if(!r[e.extend])throw"Cannot extend unknown button type: "+e.extend;var c=l(r[e.extend]);if(Array.isArray(c))return c;if(!c)return!1;var u=c.className;void 0!==e.config&&void 0!==c.config&&(e.config=t.extend({},c.config,e.config)),e=t.extend({},c,e),u&&e.className!==u&&(e.className=u+" "+e.className),e.extend=c.extend}var d=e.postfixButtons;if(d)for(e.buttons||(e.buttons=[]),n=0,o=d.length;n<o;n++)e.buttons.push(d[n]);var p=e.prefixButtons;if(p)for(e.buttons||(e.buttons=[]),n=0,o=p.length;n<o;n++)e.buttons.splice(n,0,p[n]);return e},_popover:function(o,i,s){var r=i,a=this.c,l=!1,d=t.extend({align:"button-left",autoClose:!1,background:!0,backgroundClassName:"dt-button-background",closeButton:!0,containerClassName:a.dom.collection.container.className,contentClassName:a.dom.collection.container.content.className,collectionLayout:"",collectionTitle:"",dropup:!1,fade:400,popoverTitle:"",rightAlignClassName:"dt-button-right",tag:a.dom.collection.container.tag},s),f=d.tag+"."+d.containerClassName.replace(/ /g,"."),b=i.node(),h=d.collectionLayout.includes("fixed")?t("body"):i.node(),m=function(){l=!0,u(t(f),d.fade,(function(){t(this).detach()})),t(r.buttons('[aria-haspopup="dialog"][aria-expanded="true"]').nodes()).attr("aria-expanded","false"),t("div.dt-button-background").off("click.dtb-collection"),p.background(!1,d.backgroundClassName,d.fade,h),t(e).off("resize.resize.dtb-collection"),t("body").off(".dtb-collection"),r.off("buttons-action.b-internal"),r.off("destroy"),t("body").trigger("buttons-popover-hide.dt")};if(!1!==o){var g=t(r.buttons('[aria-haspopup="dialog"][aria-expanded="true"]').nodes());if(g.length&&(h.closest(f).length&&(h=g.eq(0)),m()),d.sort){var v=t("button",o).map((function(e,n){return{text:t(n).text(),el:n}})).toArray();v.sort((function(t,e){return t.text.localeCompare(e.text)})),t(o).append(v.map((function(t){return t.el})))}var x=t(".dt-button",o).length,y="";3===x?y="dtb-b3":2===x?y="dtb-b2":1===x&&(y="dtb-b1");var I=t("<"+d.tag+"></"+d.tag+">").addClass(d.containerClassName).addClass(d.collectionLayout).addClass(d.splitAlignClass).addClass(y).css("display","none").attr({"aria-modal":!0,role:"dialog"});o=t(o).addClass(d.contentClassName).attr("role","menu").appendTo(I),b.attr("aria-expanded","true"),h.parents("body")[0]!==n.body&&(h=t(n.body).children("div, section, p").last()),d.popoverTitle?I.prepend('<div class="dt-button-collection-title">'+d.popoverTitle+"</div>"):d.collectionTitle&&I.prepend('<div class="dt-button-collection-title">'+d.collectionTitle+"</div>"),d.closeButton&&I.prepend('<div class="dtb-popover-close">&times;</div>').addClass("dtb-collection-closeable"),c(I.insertAfter(h),d.fade);var B=t(i.table().container()),C=I.css("position");if("container"!==d.span&&"dt-container"!==d.align||(h=h.parent(),I.css("width",B.width())),"absolute"===C){var T=t(h[0].offsetParent),_={top:h.position().top+parseInt(h.css("marginTop"),10),left:h.position().left+parseInt(h.css("marginLeft"),10)},A=h.offset(),k=T.offset(),S=T.position(),E=e.getComputedStyle(T[0]);k.height=T.outerHeight(),k.width=T.width()+parseFloat(E.paddingLeft),k.right=k.left+k.width,k.bottom=k.top+k.height;var w=_.top+h.outerHeight(),N=_.left;I.css({top:w,left:N}),E=e.getComputedStyle(I[0]);var R=I.offset();R.height=I.outerHeight(),R.width=I.outerWidth(),R.right=R.left+R.width,R.bottom=R.top+R.height,R.marginTop=parseFloat(E.marginTop),R.marginBottom=parseFloat(E.marginBottom),d.dropup&&(w=_.top-R.height-R.marginTop-R.marginBottom),("button-right"===d.align||I.hasClass(d.rightAlignClassName))&&(N=_.left-R.width+h.outerWidth()),"dt-container"!==d.align&&"container"!==d.align||N<_.left&&(N=-_.left),S.left+N+R.width>t(e).width()&&(N=t(e).width()-R.width-S.left),A.left+N<0&&(N=-A.left),S.top+w+R.height>t(e).height()+t(e).scrollTop()&&(w=_.top-R.height-R.marginTop-R.marginBottom),T.offset().top+w<t(e).scrollTop()&&(w=_.top+h.outerHeight()),I.css({top:w,left:N})}else{var P=function(){var n=t(e).height()/2,o=I.height()/2;o>n&&(o=n),I.css("marginTop",-1*o)};P(),t(e).on("resize.dtb-collection",(function(){P()}))}d.background&&p.background(!0,d.backgroundClassName,d.fade,d.backgroundHost||h),t("div.dt-button-background").on("click.dtb-collection",(function(){})),d.autoClose&&setTimeout((function(){r.on("buttons-action.b-internal",(function(t,e,n,o){o[0]!==h[0]&&m()}))}),0),t(I).trigger("buttons-popover.dt"),r.on("destroy",m),setTimeout((function(){l=!1,t("body").on("click.dtb-collection",(function(e){if(!l){var n=t.fn.addBack?"addBack":"andSelf",i=t(e.target).parent()[0];(!t(e.target).parents()[n]().filter(o).length&&!t(i).hasClass("dt-buttons")||t(e.target).hasClass("dt-button-background"))&&m()}})).on("keyup.dtb-collection",(function(t){"Escape"===t.code&&m()})).on("keydown.dtb-collection",(function(e){var i=t("a, button",o),s=n.activeElement;"Tab"===e.code&&(-1===i.index(s)?(i.first().focus(),e.preventDefault()):e.shiftKey?s===i[0]&&(i.last().focus(),e.preventDefault()):s===i.last()[0]&&(i.first().focus(),e.preventDefault()))}))}),0)}else m()}}),p.background=function(e,n,o,i){void 0===o&&(o=400),e?c(t("<div></div>").addClass(n).css("display","none").insertAfter(i),o):u(t("div."+n),o,(function(){t(this).removeClass(n).remove()}))},p.instanceSelector=function(e,n){if(null==e)return t.map(n,(function(t){return t.inst}));var o=[],i=t.map(n,(function(t){return t.name})),s=function(e){if(Array.isArray(e))for(var r=0,a=e.length;r<a;r++)s(e[r]);else if("string"==typeof e)if(-1!==e.indexOf(","))s(e.split(","));else{var l=t.inArray(e.trim(),i);-1!==l&&o.push(n[l].inst)}else if("number"==typeof e)o.push(n[e].inst);else if("object"==typeof e&&e.nodeName)for(var c=0;c<n.length;c++)n[c].inst.dom.container[0]===e&&o.push(n[c].inst);else"object"==typeof e&&o.push(e)};return s(e),o},p.buttonSelector=function(e,n){for(var o=[],i=function(t,e,n){for(var o,s,r=0,a=e.length;r<a;r++)(o=e[r])&&(s=void 0!==n?n+r:r+"",t.push({node:o.node,name:o.conf.name,idx:s}),o.buttons&&i(t,o.buttons,s+"-"))},s=function(e,n){var r,a,l=[];i(l,n.s.buttons);var c=t.map(l,(function(t){return t.node}));if(Array.isArray(e)||e instanceof t)for(r=0,a=e.length;r<a;r++)s(e[r],n);else if(null==e||"*"===e)for(r=0,a=l.length;r<a;r++)o.push({inst:n,node:l[r].node});else if("number"==typeof e)n.s.buttons[e]&&o.push({inst:n,node:n.s.buttons[e].node});else if("string"==typeof e)if(-1!==e.indexOf(",")){var u=e.split(",");for(r=0,a=u.length;r<a;r++)s(u[r].trim(),n)}else if(e.match(/^\d+(\-\d+)*$/)){var d=t.map(l,(function(t){return t.idx}));o.push({inst:n,node:l[t.inArray(e,d)].node})}else if(-1!==e.indexOf(":name")){var p=e.replace(":name","");for(r=0,a=l.length;r<a;r++)l[r].name===p&&o.push({inst:n,node:l[r].node})}else t(c).filter(e).each((function(){o.push({inst:n,node:this})}));else if("object"==typeof e&&e.nodeName){var f=t.inArray(e,c);-1!==f&&o.push({inst:n,node:c[f]})}},r=0,a=e.length;r<a;r++){var l=e[r];s(n,l)}return o},p.stripData=function(t,e){return null!==t&&"object"==typeof t&&t.nodeName&&t.nodeType&&(t=t.innerHTML),"string"!=typeof t||(t=p.stripHtmlScript(t),t=p.stripHtmlComments(t),e&&!e.stripHtml||(t=o.util.stripHtml(t)),e&&!e.trim||(t=t.trim()),e&&!e.stripNewlines||(t=t.replace(/\n/g," ")),e&&!e.decodeEntities||(l?t=l(t):(g.innerHTML=t,t=g.value)),e&&!e.escapeExcelFormula||t.match(/^[=+\-@\t\r]/)&&(console.log("matching and updateing"),t="'"+t)),t},p.entityDecoder=function(t){l=t},p.stripHtmlComments=function(t){var e;do{e=t,t=t.replace(/(<!--.*?--!?>)|(<!--[\S\s]+?--!?>)|(<!--[\S\s]*?$)/g,"")}while(t!==e);return t},p.stripHtmlScript=function(t){var e;do{e=t,t=t.replace(/<script\b[^<]*(?:(?!<\/script[^>]*>)<[^<]*)*<\/script[^>]*>/gi,"")}while(t!==e);return t},p.version="3.2.3",t.extend(a,{collection:{text:function(e){return t.rup.i18nParse(t.rup.i18n.base,"rup_table.collection")},className:"buttons-collection",closeButton:!1,dropIcon:!0,init:function(t,e){e.attr("aria-expanded",!1)},action:function(n,o,i,s){s._collection.parents("body").length?this.popover(!1,s):this.popover(s._collection,s),s.background&&(t("div.rup-dialog").has("#"+o.context[0].sTableId+"_wrapper").length?t("div.rup-dialog #"+o.context[0].sTableId+"_wrapper").append('<div class="dt-button-background"></div>'):p.background(!0,s.backgroundClassName,s.fade)),t(e).on("resize.ajustarCollection",(function(){t("div.dt-button-collection").is(":visible")?(hostPosition={top:host.position().top+parseInt(host.css("marginTop"),10),left:host.position().left+parseInt(host.css("marginLeft"),10)},s._collection.css({top:hostPosition.top+host.outerHeight(),left:hostPosition.left})):t(e).off("resize.ajustarCollection")})),"keypress"===n.type&&t("a, button",s._collection).eq(0).focus()},attr:{"aria-haspopup":"dialog"}},split:{text:function(t){return t.i18n("buttons.split","Split")},className:"buttons-split",closeButton:!1,init:function(t,e){return e.attr("aria-expanded",!1)},action:function(t,e,n,o){this.popover(o._collection,o)},attr:{"aria-haspopup":"dialog"}},addButton:function(t){var e=t.context[0],n=a.collection;if((a=e.ext.buttons).collection=n,a.addButton)return"addButton"},editButton:function(){if(a.editButton)return"editButton"},cloneButton:function(){if(a.cloneButton)return"cloneButton"},deleteButton:function(){if(a.deleteButton)return"deleteButton"},reportsButton:function(){if(a.reportsButton)return"reportsButton"},pageLength:function(e){var n=e.settings()[0].aLengthMenu,o=[],i=[];if(Array.isArray(n[0]))o=n[0],i=n[1];else for(var s=0;s<n.length;s++){var r=n[s];t.isPlainObject(r)?(o.push(r.value),i.push(r.label)):(o.push(r),i.push(r))}return{extend:"collection",text:function(t){return t.i18n("buttons.pageLength",{"-1":"Show all rows",_:"Show %d rows"},t.page.len())},className:"buttons-page-length",autoClose:!0,buttons:t.map(o,(function(t,e){return{text:i[e],className:"button-page-length",action:function(e,n){n.page.len(t).draw()},init:function(e,n,o){var i=this,s=function(){i.active(e.page.len()===t)};e.on("length.dt"+o.namespace,s),s()},destroy:function(t,e,n){t.off("length.dt"+n.namespace)}}})),init:function(t,e,n){var o=this;t.on("length.dt"+n.namespace,(function(){o.text(n.text)}))},destroy:function(t,e,n){t.off("length.dt"+n.namespace)}}},spacer:{style:"empty",spacer:!0,text:function(t){return t.i18n("buttons.spacer","")}}}),o.Api.register("buttons()",(function(t,e){void 0===e&&(e=t,t=void 0),this.selector.buttonGroup=t;var n=this.iterator(!0,"table",(function(n){if(n._buttons)return p.buttonSelector(p.instanceSelector(t,n._buttons),e)}),!0);return n._groupSelector=t,n})),o.Api.register("button()",(function(t,e){var n=this.buttons(t,e);return n.length>1&&n.splice(1,n.length),n})),o.Api.registerPlural("buttons().active()","button().active()",(function(t){return void 0===t?this.map((function(t){return t.inst.active(t.node)})):this.each((function(e){e.inst.active(e.node,t)}))})),o.Api.registerPlural("buttons().action()","button().action()",(function(t){return void 0===t?this.map((function(t){return t.inst.action(t.node)})):this.each((function(e){e.inst.action(e.node,t)}))})),o.Api.registerPlural("buttons().collectionRebuild()","button().collectionRebuild()",(function(t){return this.each((function(e){for(var n=0;n<t.length;n++)"object"==typeof t[n]&&(t[n].parentConf=e);e.inst.collectionRebuild(e.node,t)}))})),o.Api.register(["buttons().enable()","button().enable()"],(function(t,e){return this.each((function(n){n.inst.enable(n.node,t,e)}))})),o.Api.register(["buttons().disable()","button().disable()"],(function(t){return this.each((function(e){e.inst.disable(e.node,t)}))})),o.Api.register("button().index()",(function(){var t=null;return this.each((function(e){var n=e.inst.index(e.node);null!==n&&(t=n)})),t})),o.Api.registerPlural("buttons().nodes()","button().node()",(function(){var e=t();return t(this.each((function(t){e=e.add(t.inst.node(t.node))}))),e})),o.Api.registerPlural("buttons().processing()","button().processing()",(function(t){return void 0===t?this.map((function(t){return t.inst.processing(t.node)})):this.each((function(e){e.inst.processing(e.node,t)}))})),o.Api.registerPlural("buttons().text()","button().text()",(function(t){return void 0===t?this.map((function(t){return t.inst.text(t.node)})):this.each((function(e){e.inst.text(e.node,t)}))})),o.Api.registerPlural("buttons().trigger()","button().trigger()",(function(){return this.each((function(t){t.inst.node(t.node).trigger("click")}))})),o.Api.register("button().popover()",(function(t,e){return this.map((function(n){return n.inst._popover(t,this.button(this[0].node),e)}))})),o.Api.register("buttons().containers()",(function(){var e=t(),n=this._groupSelector;return this.iterator(!0,"table",(function(t){if(t._buttons)for(var o=p.instanceSelector(n,t._buttons),i=0,s=o.length;i<s;i++)e=e.add(o[i].container())})),e})),o.Api.register("buttons().container()",(function(){return this.containers().eq(0)})),o.Api.register("button().add()",(function(t,e,n){var i=this.context,s=new o.Api(i);if(i.length){var r=p.instanceSelector(this._groupSelector,i[0]._buttons);r.length&&(r[0].add(e,t,n),D(this[0].inst.s.buttons,s,i[0]))}return this.button(this._groupSelector,t)})),o.Api.register("buttons().destroy()",(function(){return this.pluck("inst").unique().each((function(t){t.destroy()})),this})),o.Api.registerPlural("buttons().remove()","buttons().remove()",(function(){return this.each((function(t){t.inst.remove(t.node)})),this})),o.Api.register("buttons.info()",(function(e,n,o){var i=this;return!1===e?(this.off("destroy.btn-info"),u(t("#table_buttons_info"),400,(function(){t(this).remove()})),d=null,this):(d&&clearTimeout(d),t("#table_buttons_info").length&&t("#table_buttons_info").remove(),e=e?"<h2>"+e+"</h2>":"",c(t('<div id="table_buttons_info" class="dt-button-info"></div>').html(e).append(t("<div></div>")["string"==typeof n?"html":"append"](n)).css("display","none").appendTo("body")),void 0!==o&&0!==o&&(d=setTimeout((function(){i.buttons.info(!1)}),o)),this)})),o.Api.register("buttons.exportData()",(function(t){if(this.context.length)return v(new o.Api(this.context[0]),t)})),o.Api.register("buttons.exportInfo()",(function(t){return t||(t={}),{filename:f(t,this),title:h(t,this),messageTop:m(this,t,t.message||t.messageTop,"top"),messageBottom:m(this,t,t.messageBottom,"bottom")}})),o.Api.register("buttons.actions()",(function(e,n){var i=e.settings()[0];switch(n.type){case"add":i.oInit.buttons.myLastAction="add",void 0!==i.oInit.formEdit?t.when(o.Api().editForm.loadSaveDialogForm(i,"POST")).then((function(){let n=i.oInit.formEdit.detailForm.$dialog;void 0!==n.find("form")[0]?(n.find("form")[0].reset(),jQuery.each(t("select.rup_select",n),(function(t,e){jQuery(e).rup_select("refresh")})),i.multiselection.numSelected>0?t.rup_messages("msgConfirm",{message:t.rup.i18nParse(t.rup.i18n.base,"rup_table.checkSelectedElems"),title:t.rup.i18nParse(t.rup.i18n.base,"rup_table.changes"),OKFunction:function(){void 0!==i.oInit.seeker&&i.oInit.seeker.activate?o.Api().seeker.limpiarSeeker(e,i):void 0!==i.oInit.multiSelect?o.Api().multiSelect.deselectAll(e):void 0!==i.oInit.select&&o.Api().select.deselect(i),t("#"+t.escapeSelector(i.sTableId)).triggerHandler("tableButtonsAddActionConfirmed",i),o.Api().editForm.openSaveDialog("POST",e,null,i.oInit.formEdit.customTitle)}}):o.Api().editForm.openSaveDialog("POST",e,null,i.oInit.formEdit.customTitle)):t.rup_messages("msgError",{title:t.rup.i18nParse(t.rup.i18n.base,"rup_table.errors.errcap"),message:t.rup.i18nParse(t.rup.i18n.base,"rup_table.errors.missingDetailForm")})})):(i.oInit.inlineEdit.currentPos=void 0,o.Api().inlineEdit.add(e,i));break;case"edit":i.oInit.buttons.myLastAction="edit",void 0!==i.oInit.formEdit?t.when(o.Api().editForm.getRowSelected(e,"PUT")).then((function(t){void 0!==i.oInit.formEdit.$navigationBar&&void 0!==i.oInit.formEdit.$navigationBar.funcionParams&&void 0!==i.oInit.formEdit.$navigationBar.funcionParams[4]&&e.page()+1!==Number(i.oInit.formEdit.$navigationBar.funcionParams[4])||o.Api().editForm.openSaveDialog("PUT",e,t.line,i.oInit.formEdit.customTitle)})):(i.oInit.inlineEdit.currentPos=void 0,i.oInit.inlineEdit.alta=void 0,o.Api().inlineEdit.getRowSelected(e,"PUT").line);break;case"clone":i.oInit.buttons.myLastAction="clone",void 0!==i.oInit.formEdit?t.when(o.Api().editForm.getRowSelected(e,"CLONE")).then((function(t){o.Api().editForm.openSaveDialog("CLONE",e,t.line,i.oInit.formEdit.customTitle)})):(i.oInit.inlineEdit.alta=!0,i.oInit.inlineEdit.currentPos=void 0,o.Api().inlineEdit.getRowSelected(e,"CLONE").line);break;case"delete":let n=i.oInit.validarEliminar;if("function"==typeof n&&n(i))return!1;i.oInit.buttons.myLastAction="delete",i.oInit.noEdit||void 0===i.oInit.formEdit?i.oInit.noEdit||void 0===i.oInit.inlineEdit?P(e):o.Api().inlineEdit.deleteAllSelects(e):o.Api().editForm.deleteAllSelects(e)}})),o.Api.register("buttons.displayRegex()",(function(e){if(void 0===e._buttons[0].inst.s.disableAllButtons){var n,o=e._buttons[0].inst.s.buttons;t.each(o,(function(i){n=null;var s=e.multiselection.numSelected;void 0!==e.oInit.masterDetail&&this.conf.id===e.sTableId+"addButton_1"&&(s=t(e.oInit.masterDetail.master).DataTable().context[0].multiselection.numSelected,this.conf.displayRegex=/^[1-9][0-9]*$/),C(o[i],s,n,e),this.buttons.length>0&&(n=this,C(o[i],s,n,e))}))}})),o.Api.register("buttons.disableAllButtons()",(function(e,n){const o=e._buttons[0].inst.s;t.each(o.buttons,(function(){e.oInit.noEdit&&void 0!==n&&!n.includes(this.node.id)?this.conf.displayRegex=void 0:void 0!==n&&n.includes(this.node.id)||(t(this.node).prop("disabled",!0),t("#"+t.escapeSelector(this.node.id)+"_contextMenuToolbar").addClass("disabledButtonsTable"))})),o.disableAllButtons=!0})),o.Api.register("buttons.initButtons()",(function(t,e){j(t,e)})),o.Api.register("buttons.deleteNotForm()",(function(t){P(t)}));var f=function(e,n){var o="*"===e.filename&&"*"!==e.title&&void 0!==e.title&&null!==e.title&&""!==e.title?e.title:e.filename;if("function"==typeof o&&(o=o(e,n)),null==o)return null;-1!==o.indexOf("*")&&(o=o.replace(/\*/g,t("head > title").text()).trim()),o=o.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,"");var i=b(e.extension,e,n);return i||(i=""),o+i},b=function(t,e,n){return null==t?null:"function"==typeof t?t(e,n):t},h=function(e,n){var o=b(e.title,e,n);return null===o?null:-1!==o.indexOf("*")?o.replace(/\*/g,t("head > title").text()||"Exported data"):o},m=function(e,n,o,i){var s=b(o,n,e);if(null===s)return null;var r=t("caption",e.table().container()).eq(0);return"*"===s?r.css("caption-side")!==i?null:r.length?r.text():"":s},g=t("<textarea></textarea>")[0],v=function(e,n){var o=t.extend(!0,{},{rows:null,columns:"",modifier:{search:"applied",order:"applied"},orthogonal:"display",stripHtml:!0,stripNewlines:!0,decodeEntities:!0,escapeExcelFormula:!1,trim:!0,format:{header:function(t){return p.stripData(t,o)},footer:function(t){return p.stripData(t,o)},body:function(t){return p.stripData(t,o)}},customizeData:null,customizeZip:null},n),i=e.columns(o.columns).indexes().map((function(t){var n=e.column(t);return o.format.header(n.innerHTML,t,n.header())})).toArray(),s=e.table().footer()?e.columns(o.columns).indexes().map((function(n){var i=e.column(n).footer(),s="";if(i){var r=t(".dt-column-title",i);s=r.length?r.html():t(i).html()}return o.format.footer(s,n,i)})).toArray():null,r=t.extend({},o.modifier);e.select&&"function"==typeof e.select.info&&void 0===r.selected&&e.rows(o.rows,t.extend({selected:!0},r)).any()&&t.extend(r,{selected:!0});for(var a=e.rows(o.rows,r).indexes().toArray(),l=e.cells(a,o.columns,{order:r.order}),c=l.render(o.orthogonal).toArray(),u=l.nodes().toArray(),d=l.indexes().toArray(),f=e.columns(o.columns).count(),b=[],h=0,m=0,g=f>0?c.length/f:0;m<g;m++){for(var v=[f],y=0;y<f;y++)v[y]=o.format.body(c[h],d[h].row,d[h].column,u[h]),h++;b[m]=v}var I={header:i,headerStructure:x(o.format.header,e.table().header.structure(o.columns)),footer:s,footerStructure:x(o.format.footer,e.table().footer.structure(o.columns)),body:b};return o.customizeData&&o.customizeData(I),I};function x(t,e){for(var n=0;n<e.length;n++)for(var o=0;o<e[n].length;o++){var i=e[n][o];i&&(i.title=t(i.title,o,i.cell))}return e}var y=function(e){t("#"+t.escapeSelector(e)).prop("disabled",!0)},I=function(e){const n=t.escapeSelector(e);t("#"+n).prop("disabled",!1),t("#"+n+"_contextMenuToolbar").removeClass("disabledButtonsTable")},B=function(e){const n=t.escapeSelector(e);t("#"+n).prop("disabled",!0),t("#"+n+"_contextMenuToolbar").addClass("disabledButtonsTable")},C=function(e,n,o,i){if(void 0===e.conf.custom||!e.conf.custom)if(null!==e.collection&&o){var s=o.conf.id,r=o.conf.displayRegex,a=!1;t.each(o.buttons,(function(e,o){var i;void 0!==r&&void 0!==o.conf.displayRegex?r.test(n)&&o.conf.displayRegex.test(n)?I(o.conf.id):B(o.conf.id):void 0===r&&void 0!==o.conf.displayRegex?(o.conf.displayRegex.test(n)&&!a&&(i=s,t("#"+t.escapeSelector(i)).prop("disabled",!1),a=!0),o.conf.displayRegex.test(n)?I(o.conf.id):B(o.conf.id),a||y(s)):(B(o.conf.id),a||(y(s),a=!0))})),t("#"+t.escapeSelector(s)+":not(.listening)").addClass("listening").on("click",(function(e){var n=i.multiselection.numSelected;t.each(o.buttons,(function(t,e){e.conf.displayRegex.test(n)?I(e.conf.id):B(e.conf.id)}))}))}else void 0===e.conf.displayRegex?B(e.conf.id):void 0!==e.conf.displayRegex&&(e.conf.displayRegex.test(n)?I(e.conf.id):B(e.conf.id))},T=function(e,n,o){var i=e.settings()[0];e.buttons.exportInfo(o);let s,r=i.multiselection,a=r.selectedAll,l=r.deselectedIds;a?s=l.length>0?"all-deselected":"all":r.selectedIds.length>0?s="selected":(s="all",a=!0,l=[]),t.when(A(e,s,o.request,r,a,l)).then((function(o,s){if(void 0!==o){let r=o.length,a=JSON.stringify(o),l=t("<div></div>").css({height:1,width:1,overflow:"hidden",position:"fixed",top:0,left:0});"string"==typeof s.data&&(s.data=JSON.parse(s.data)),a=_(s.reportsExportAllColumns,s.data.columns,a,!0);let c=t("<textarea readonly></textarea>").val(a).appendTo(l);N(e,i,n,r,l,c)}else w(i,s,n)}))},_=function(e,n,o,i){let s="object"!=typeof o?JSON.parse(o):o,r=";",a="",l=!1;if("en"===t.rup.lang&&(r=","),e||null==n||(l=!0),i)if(l)a='"'+n.toString().replace(/,/g,'"'+r+'"')+'"\r\n';else{let e="";t.each(s[0],(function(n,o){if(t.isPlainObject(o)){let o=n;t.each(this,(function(t,n){let i=t.substring(0,1).toLocaleUpperCase()+t.substring(1);e+='"'+o+i+'"'+r}))}else e+='"'+n+'"'+r})),e=e.slice(0,-1),a+=e+"\r\n"}return t.each(s,(function(){let e="";t.each(this,(function(o,i){l&&-1==n.indexOf(o)||(t.isPlainObject(i)?t.each(this,(function(t,n){e+='"'+n+'"'+r})):e+='"'+i+'"'+r)})),e=e.slice(0,-1),a+=e+"\r\n"})),a},A=function(e,n,i,s,r,a){var l=e.settings()[0];let c,u=t.Deferred(),d=s.selectedIds,p=s.selectedRowsPerPage,f={};if("selected"===n){let n=[];if("json"===i.dataType){let s=!0;if(t.each(p,(function(t,e){if(l.json.page!=e.page)return s=!1,!1})),s)return t.each(p,(function(e,i){let s=i.id;t.each(l.json.rows,(function(t,e){o.Api().rupTable.getIdPk(e)===s&&n.push(e)}))})),f.data={},f.data.columns=S(e,l,i),void 0!==l.oInit.buttons.report&&(f.data.columnsName=l.oInit.buttons.report.columnsName),f.reportsExportAllColumns=i.reportsExportAllColumns,u.resolve(n,f),u.promise()}}return"json"===i.dataType?(f=k(e,f,i,l,r,a,d),t.when(E(f,l)).then((function(t){c=t,u.resolve(c,f)}))):(f=k(e,f,i,l,r,a,d),u.resolve(void 0,f)),u.promise()},k=function(n,o,i,s,r,a,l){let c={};return c.columns=S(n,s,i),void 0!==s.oInit.buttons.report&&(c.columnsName=s.oInit.buttons.report.columnsName),c.core={pkToken:s.oInit.multiplePkToken,pkNames:s.oInit.primaryKey},null==s.oInit.filter.$filterContainer||jQuery.isEmptyObject(e.form2object(s.oInit.filter.$filterContainer[0]))||(c.filter=e.form2object(s.oInit.filter.$filterContainer[0])),c.multiselection={},c.multiselection.selectedAll=r,c.multiselection.selectedAll?c.multiselection.selectedIds=a:c.multiselection.selectedIds=l,t.each(s.oInit.order,(function(t,e){const n=s.oInit.order[t][0];0==t?c.sord=s.oInit.order[t][1]:c.sord+=s.oInit.order[t][1],null==s.oInit.aoColumns[n].sidx?0==t?c.sidx=s.oInit.aoColumns[n].data:c.sidx+=s.oInit.aoColumns[n].data:0==t?c.sidx=s.oInit.aoColumns[n].sidx:c.sidx+=s.oInit.aoColumns[n].sidx,t<s.oInit.order.length-1&&(c.sord+=",",c.sidx+=",")})),c.reportsParams=[],void 0!==s.oInit.buttons.report&&void 0!==s.oInit.buttons.report.reportsParams&&s.oInit.buttons.report.reportsParams.length>0&&(c.reportsParams=s.oInit.buttons.report.reportsParams),o.contentType=i.contentType,o.dataType=i.dataType,void 0!==i.url?o.url=s.oInit.urlBase+i.url:o.url=s.oInit.urlBase,o.reportsExportAllColumns=i.reportsExportAllColumns,o.type=i.method,void 0!==i.fileName&&(c.fileName=i.fileName),void 0!==i.sheetTitle&&(c.sheetTitle=i.sheetTitle),o.data=t.toJSON(c),o},S=function(e,n,o){let i=[];return null==o.reportsExportAllColumns&&(o.reportsExportAllColumns=n.ext.buttons.reportsButton.reportsExportAllColumns),o.reportsExportAllColumns||(void 0!==n.oInit.buttons.report&&void 0!==n.oInit.buttons.report.columns?i=n.oInit.buttons.report.columns:t.each(n.oInit.columns,(function(t,n){""!==n.data&&e.column(t).visible()&&i.push(n.data)}))),i},E=function(e,n){let o=t.Deferred();return t.ajax(e).done((function(e){o.resolve(e),t("#"+t.escapeSelector(n.sTableId)).triggerHandler("tableButtonsSuccessReportsRequestData")})).complete((function(){t("#"+t.escapeSelector(n.sTableId)).triggerHandler("tableButtonsCompleteReportsRequestData")})).error((function(){t("#"+t.escapeSelector(n.sTableId)).triggerHandler("tableButtonsErrorReportsRequestData")})),o.promise()},w=function(n,o,i){var s=t("#"+t.escapeSelector(n.sTableId)+"reportFileWait");s.rup_dialog({type:t.rup.dialog.TEXT,autoOpen:!1,modal:!0,resizable:!1});let r=t.rup.i18nParse(t.rup.i18n.base,"rup_report.waitTitle"),a=t.rup.i18nParse(t.rup.i18n.base,"rup_report.waitMsg");void 0!==n.oInit.buttons.report&&(void 0!==n.oInit.buttons.report.title&&(r=n.oInit.buttons.report.title),void 0!==n.oInit.buttons.report.message&&(a=n.oInit.buttons.report.message)),s.rup_dialog("setOption","title",r);let l=s.html().split(s.text()),c="";for(let t=0;t<l.length;t++)""===l[t]?c+=a:c+=l[t];s.html(c),s.rup_dialog("open");let u=o.url,d=new XMLHttpRequest;return d.open(o.type,u,!0),d.responseType="blob",d.send(o.data),d.onload=function(o){if(200==this.status){let o,i=d.response,r=null,a=d.getResponseHeader("content-type");if(d.getResponseHeader("content-disposition")){let t=d.getResponseHeader("content-disposition");r=t.substring(t.indexOf("=")+1)}else r="report."+a.substring(a.indexOf("/")+1);e.navigator.msSaveOrOpenBlob?e.navigator.msSaveOrOpenBlob(i,r):(t("a#rupTableButtonsReportsExport").length||t("#"+t.escapeSelector(n.sTableId)+"rup_report_dialogsContainer").append("<a id='rupTableButtonsReportsExport' class='d-none'>rupTableButtonsReportsExport</a>"),o=t("a#rupTableButtonsReportsExport")[0],o.href=e.URL.createObjectURL(i),o.download=r,o.click(),e.URL.revokeObjectURL(o.href),o.remove()),t("#"+t.escapeSelector(s.attr("id"))).length>0&&s.rup_dialog("close")}else t("#"+t.escapeSelector(s.attr("id"))).length>0&&(s.rup_dialog("close"),console.info("----------- ERROR -----------"));i.processing(!1)},d.send(),!1},N=function(e,n,o,i,s,r){t.rup_messages("msgConfirm",{title:e.i18n("rup_table.copyButton.changes","Copia de registros en clipboard"),message:e.i18n("rup_table.copyButton.saveAndContinue",{_:"¿Desea copiar %d registros?",1:"¿Desea copiar un registro?"},i),open:function(){t("#"+t.escapeSelector(e.context[0].sTableId)).trigger("rupTable_confirmMsgOpen")},OKFunction:function(){void 0!==n.oInit.formEdit&&(n.oInit.formEdit.okCallBack=!0),R(e,o,i,s,r),void 0===n.oInit.formEdit||n.oInit.formEdit.detailForm.$dialog.hasClass("d-none")||n.oInit.formEdit.detailForm.$dialog.rup_dialog("close")},beforeClose:function(){void 0!==n.oInit.formEdit&&(n.oInit.formEdit.okCallBack=!1),void 0!==o.processing&&o.processing(!1)}})},R=function(e,o,i,s,r){if(n.queryCommandSupported("copy")){s.appendTo(e.table().container()),r[0].focus(),r[0].select();try{let r=n.execCommand("copy");if(s.remove(),r)return e.buttons.info(e.i18n("rup_table.copyButton.changes","Copia de registros en portapapeles"),e.i18n("rup_table.copyButton.saved",{_:"Copiados %d registros al portapapeles",1:"Copiado un registro al portapapeles"},i),2e3),void 0!==o.processing&&o.processing(!1),void t("#"+t.escapeSelector(e.context[0].sTableId)).trigger("rupTable_copied")}catch(t){}}let a=t("<span>"+e.i18n("rup_table.copyButton.copyKeys","Presiona ctrl o ⌘ + C para copiar los datos de la tabla al portapapeles.Para cancelar, haz click sobre este mensaje o pulsa el botón escape.")+"</span>").append(s);e.buttons.info(e.i18n("rup_table.copyButton.copyTitle","Copiar al portapapeles"),a,0),r[0].focus(),r[0].select();let l=t(a).closest(".dt-button-info"),c=function(){l.off("click.buttons-copy"),t(n).off(".buttons-copy"),e.buttons.info(!1),void 0!==o.processing&&o.processing(!1)};l.on("click.buttons-copy",c),t(n).on("keydown.buttons-copy",(function(t){"Escape"===t.code&&c()})).on("copy.buttons-copy cut.buttons-copy",(function(){c(),void 0!==o.processing&&o.processing(!1)}))},P=function(n){var o=n.settings()[0];let i=new RegExp(o.oInit.multiplePkToken,"g");t.rup_messages("msgConfirm",{message:t.rup.i18nParse(t.rup.i18n.base,"rup_table.deleteAll"),title:t.rup.i18nParse(t.rup.i18n.base,"rup_table.delete"),OKFunction:function(){let t={};t.filter=e.form2object(o.oInit.filter.$filterContainer[0]),o.multiselection.selectedIds.length>1?(t.core={pkToken:o.oInit.multiplePkToken,pkNames:o.oInit.primaryKey},t.multiselection={},t.multiselection.selectedAll=o.multiselection.selectedAll,t.multiselection.selectedAll?t.multiselection.selectedIds=o.multiselection.deselectedIds:t.multiselection.selectedIds=o.multiselection.selectedIds,H("POST",n,o,t,"/deleteAll")):(t=o.multiselection.selectedIds[0],t=t.replace(i,"/"),H("DELETE",n,o,0,"/"+t))}})},H=function(e,n,i,s,r){t("#"+t.escapeSelector(i.sTableId)).triggerHandler("tableBeforeCallDelete");let a=function(e,n,o){t("#"+t.escapeSelector(e.sTableId)).triggerHandler("tableFeedbackShowDelete"),e.oInit.feedback.$feedbackContainer.rup_feedback("set",n,o),e.oInit.feedback.$feedbackContainer.rup_feedback("show")};if(void 0!==i.oInit.masterDetail){let t=o.Api().masterDetail.getMasterTablePkObject(i);jQuery.extend(!0,t,s),s=t}let l=t.rup.i18nParse(t.rup.i18n.base,"rup_table.deletedOK"),c={url:i.oInit.urlBase+r,accepts:{"*":"*/*",html:"text/html",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript",text:"text/plain",xml:"application/xml, text/xml"},type:e,data:s,dataType:"json",showLoading:!1,contentType:"application/json",async:!0,success:function(){void 0!==i.oInit.multiSelect?o.Api().multiSelect.deselectAll(n):void 0!==i.oInit.select&&o.Api().select.deselect(i),t("#"+t.escapeSelector(i.sTableId)).triggerHandler("tablefterDelete"),i._buttons[0].inst.s.disableAllButtons=void 0,o.Api().seeker.disabledButtons(i),n.ajax.reload((function(){a(i,l,"ok")}),!1),t("#"+t.escapeSelector(i.sTableId)).triggerHandler("tableSuccessCallDelete")},complete:function(){t("#"+t.escapeSelector(i.sTableId)).triggerHandler("tableCompleteCallDelete")},error:function(e){a(i,e.responseText,"error"),t("#"+t.escapeSelector(i.sTableId)).triggerHandler("tableErrorCallDelete")},feedback:()=>{a(i,l,"ok")}};c.data=JSON.stringify(c.data),t.rup_ajax(c)},D=function(e,n,o){let i={},s=o.sTableId;t.each(e,(function(){if(this.conf.insideContextMenu&&(i[this.conf.id]={id:this.conf.id+"_contextMenuToolbar",name:this.conf.text(n),icon:this.conf.icon,inCollection:this.inCollection,idCollection:void 0}),this.buttons.length>0){var e=this.conf.id;t.each(this.buttons,(function(t){this.conf.insideContextMenu&&(i[this.conf.id]={id:this.conf.id+"_contextMenuToolbar",name:this.conf.text(n),icon:this.conf.icon,inCollection:this.inCollection,idCollection:e})}))}}));var r="#"+s+" > tbody > tr",a=t(r);a.selector=r,jQuery.isEmptyObject(i)||(a.rup_contextMenu("destroy"),a.rup_contextMenu({selector:r,callback:function(e,n){var s=i[e],r=s.id.replace("_contextMenuToolbar",""),a=s.inCollection,l=s.idCollection;if(a&&void 0!==l){var c,u,d=t("#"+t.escapeSelector(o.sTableId)).DataTable();t.each(o.ext.buttons,(function(t){var e=o.ext.buttons[t];e.id===r&&(c=t,u=e)})),o.ext.buttons[c].action(void 0,d,void 0,u)}else t("#"+t.escapeSelector(r)).trigger("click")},items:i}))},j=function(e,n){t.each(n,(function(o){var i=null,s=e.multiselection.numSelected;void 0!==e.oInit.masterDetail&&this.conf.id===e.sTableId+"addButton_1"&&(s=t(e.oInit.masterDetail.master).DataTable().context[0].multiselection.numSelected,this.conf.displayRegex=/^[1-9][0-9]*$/),C(n[o],s,i,e),this.buttons.length>0&&(i=this,C(n[o],s,i,e)),void 0!==this.conf.icon&&(0===t(this.node).find("i").length&&t("#"+t.escapeSelector(this.conf.id)).prepend('<i class="mdi '+this.conf.icon+'" aria-hidden="true"></i>'),this.buttons.length>0&&t("#"+t.escapeSelector(this.conf.id)).length>0&&t("#"+t.escapeSelector(this.conf.id))[0].addEventListener("click",(function e(){var i=this;t.each(n[o].buttons,(function(n){var o=t("#"+t.escapeSelector(this.conf.id));0===t(this.node).find("i").length&&o.prepend('<i class="mdi '+this.conf.icon+'" aria-hidden="true"></i>'),i.removeEventListener("click",e)}))}),!1))}));var o=t("<div></div>").attr("id",e.sTableId+"reportFileWait").attr("title","Tittle Prueba").text("prueba").addClass("rup_report").hide().append(t("<div></div>").addClass("ui-progressbar ui-progressbar-value ui-corner-left ui-corner-right")),i=t("<div></div>").attr("id",e.sTableId+"reportFileError").attr("title","Error").text("error").addClass("rup_report").hide(),s=t("<div></div>").attr("id",e.sTableId+"rup_report_dialogsContainer").append(o).append(i);t("#"+t.escapeSelector(e.sTableId)).after(s)};function O(t,e){var n=new o.Api(t),i=e||n.init().buttons||o.defaults.buttons;return new p(n,i).container()}return t.fn.dataTable.Buttons=p,t.fn.DataTable.Buttons=p,t(n).on("plugin-init.dt",(function(e,n){"dt"===e.namespace&&void 0!==n.oInit.buttons&&!1!==n.oInit.buttons.activate&&function(e){var n=new o.Api(e),i=n.init().buttons||o.defaults.buttons;e.multiselection.numSelected,t("#"+t.escapeSelector(e.sTableId)).triggerHandler("tableButtonsBeforeToolbarInit"),e.oInit.buttons.insertAfter?t("#"+t.escapeSelector(e.sTableId)+"_filter_form").length>0?new p(n,i).container().insertAfter(t("#"+t.escapeSelector(e.sTableId)+"_filter_form")):new p(n,i).container().insertAfter(t("#"+t.escapeSelector(e.sTableId)+"_wrapper")):t("#"+t.escapeSelector(e.sTableId)+"_filter_form").length>0?new p(n,i).container().insertBefore(t("#"+t.escapeSelector(e.sTableId)+"_filter_form")):new p(n,i).container().insertBefore(t("#"+t.escapeSelector(e.sTableId)+"_wrapper"));var s=e._buttons[0].inst.s.buttons;if(o.Api().buttons.initButtons(e,s),function(t,e){if(void 0!==t.oInit.buttons&&1==t.oInit.contextMenuActivo){let n=t._buttons[0].inst.s.buttons;D(n,e,t)}}(e,n),t("#"+t.escapeSelector(e.sTableId)).DataTable().on("select deselect contextmenu",(function(t){o.Api().buttons.displayRegex(e)})),e.oInit.noEdit||void 0===e.oInit.formEdit&&void 0===e.oInit.inlineEdit){let t;e.ext.buttons.custom.length>0?(t=e.ext.buttons.custom,t.push(e.sTableId+"informes_01")):t=e.sTableId+"informes_01",o.Api().buttons.disableAllButtons(e,t),e._buttons[0].inst.s.disableAllButtons=void 0,o.Api().buttons.displayRegex(e)}t("#"+t.escapeSelector(e.sTableId)).triggerHandler("tableButtonsAfterToolbarInit")}(n)})),o.ext.feature.push({fnInit:O,cFeature:"B"}),o.feature&&o.feature.register("buttons",O),p}));
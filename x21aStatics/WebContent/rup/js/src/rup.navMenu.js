/*! For license information please see rup.navMenu.js.LICENSE.txt */
!function(e){"function"==typeof define&&define.amd?define(["jquery","./rup.base","rcarousel"],e):e(jQuery)}((function(e){jQuery.extend(jQuery.rup.iniRup,jQuery.rup.rupSelectorObjectConstructor("rup_navMenu",{})),jQuery.fn.rup_navMenu("extend",{next:function(){jQuery(this).rcarousel("next")},prev:function(){jQuery(this).rcarousel("prev")},goToPage:function(e){jQuery(this).rcarousel("goToPage",e.position)},getTotalPages:function(){return jQuery(this).rcarousel("getTotalPages")},getCurrentPage:function(){return jQuery(this).rcarousel("getCurrentPage")}}),jQuery.fn.rup_navMenu("extend",{_markTabs:function(t){jQuery("#"+t+">li").each((function(){e(this).addClass("itemTab")}));var r=window.location.href.substr(window.location.href.lastIndexOf("#"));e("#"+e.escapeSelector(t)+"  li a").each((function(t,a){a.href.substr(a.href.lastIndexOf("#"))===r&&e(a).parent().addClass("actualTab")})),jQuery(".itemTab").each((function(){e(this).addClass("ui-state-default ui-corner-top")})),e(".itemTab").hover((function(){e(this).addClass("ui-tabs-active ui-state-active")}),(function(){e(this).removeClass("ui-tabs-active ui-state-active")})),jQuery(".itemTab a").each((function(){e(this).addClass("ui-tabs-anchor")}))},_createContainer:function(){var e=this.data("settings");jQuery("#"+e.id).wrapAll('<nav class="rup_navMenu">')},_addNavButtons:function(){var e=this.data("settings");jQuery(".rup_navMenu").prepend('<li class="ui-state-default ui-corner-top" id="prvButton"><a class="ui-tabs-anchor" href="#" id="ui-carousel-prev"><span class="ui-icon  ui-icon-caret-1-w"></span></a></li>'),jQuery(".rup_navMenu").append('<li class="ui-state-default ui-corner-top" id="nxtButton"><a class="ui-tabs-anchor" href="#" id="ui-carousel-next"><span class="ui-icon  ui-icon-caret-1-e"></span></a></li>');var t=jQuery("#"+e.id).rcarousel("getCurrentPage");t===jQuery("#"+e.id).rcarousel("getTotalPages")&&jQuery("#nxtButton").hide(),1!==t?jQuery("#prvButton").show():jQuery("#prvButton").hide(),jQuery("#ui-carousel-next").on("click",(function(){jQuery("#"+e.id).rcarousel("next"),jQuery("#"+e.id).rcarousel("getCurrentPage")===jQuery("#"+e.id).rcarousel("getTotalPages")&&jQuery("#nxtButton").hide(),jQuery("#prvButton").show()})),jQuery("#ui-carousel-prev").on("click",(function(){jQuery("#"+e.id).rcarousel("prev"),1===jQuery("#"+e.id).rcarousel("getCurrentPage")&&jQuery("#prvButton").hide(),jQuery("#nxtButton").show()}))},_addCSS:function(e){jQuery(".rup_navMenu").addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),jQuery("#"+e.id).css({"margin-left":"30px"})},_calculatePageOfActualTab:function(t){for(var r=0,a=0,u=e("#"+e.escapeSelector(t.id)+" li").length,i=r+t.visible;i<=u;){for(var n=r;n<i;n++)if(e("#"+e.escapeSelector(t.id)+" li:nth("+n+")").hasClass("actualTab"))return a;a+=1,i=(r+=t.step)+t.visible}return 0}}),jQuery.fn.rup_navMenu("extend",{_init:function(e){if(e.length>1)jQuery.rup.errorGestor(jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_global.initError")+jQuery(this).attr("id"));else{var t=jQuery.extend({},jQuery.fn.rup_navMenu.defaults,e[0]);t.id=jQuery(this).attr("id"),void 0!==t.navigation&&!0===t.navigation&&(t.step=t.visible),this._markTabs(t.id,t.actualTab),void 0===t.startAtPage&&(t.startAtPage=this._calculatePageOfActualTab(t)),jQuery("#"+t.id).rcarousel({startAtPage:t.startAtPage,visible:t.visible,step:t.step,height:t.height,speed:t.speed,margin:t.margin,width:150}),this.data("settings",t),this._createContainer(),void 0!==t.height?jQuery(".rup_navMenu").css("height",t.height):jQuery(".rup_navMenu").css("height",30),void 0!==t.width?jQuery(".rup_navMenu").css("width",t.width):jQuery(".rup_navMenu").css("width",700),!0===t.navigation&&this._addNavButtons(),this._addCSS(t)}}}),jQuery.fn.rup_navMenu.defaults={visible:3,step:3,width:null,height:30,speed:500,margin:1}}));
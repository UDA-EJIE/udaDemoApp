!function(e){e.extend(e.ui,{multiDatesPicker:{version:"1.6.4"}}),e.fn.multiDatesPicker=function(t){var i=arguments,a=this,s=(new Date,new Date(0),{});function r(e,t){t||(t="picked"),e=n.call(this,e);for(var i=0;i<this.multiDatesPicker.dates[t].length;i++)if(!u.compareDates(this.multiDatesPicker.dates[t][i],e))return this.multiDatesPicker.dates[t].splice(i,1).pop()}function c(e,t){return t||(t="picked"),this.multiDatesPicker.dates[t].splice(e,1).pop()}function l(e,t,i){t||(t="picked"),(e=n.call(this,e)).setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),!1===u.gotDate.call(this,e,t)&&(this.multiDatesPicker.dates[t].push(e),i||this.multiDatesPicker.dates[t].sort(u.compareDates))}function o(e){e||(e="picked"),this.multiDatesPicker.dates[e].sort(u.compareDates)}function n(e,t,i){return t||(t="object"),u.dateConvert.call(this,e,t,i)}var u={init:function(t){var i=e(this);this.multiDatesPicker.changed=!1,this.multiDatesPicker.maxPicks=t.maxPicks;var a={beforeShow:function(e,t){this.multiDatesPicker.changed=!1,this.multiDatesPicker.originalBeforeShow&&this.multiDatesPicker.originalBeforeShow.call(this,e,t)},onSelect:function(t,i){var a=e(this);if(this.multiDatesPicker.changed=!0,i._keyEvent)return!1;if(t&&(a.multiDatesPicker("toggleDate",t),this.multiDatesPicker.changed=!0),"normal"==this.multiDatesPicker.mode&&this.multiDatesPicker.pickableRange)if(this.multiDatesPicker.dates.picked.length>0){var s=this.multiDatesPicker.dates.picked[0],r=new Date(s.getTime());if(u.sumDays(r,this.multiDatesPicker.pickableRange-1),this.multiDatesPicker.adjustRangeToDisabled){var c,l=this.multiDatesPicker.dates.disabled.slice(0);do{c=0;for(var o=0;o<l.length;o++)l[o].getTime()<=r.getTime()&&(s.getTime()<=l[o].getTime()&&l[o].getTime()<=r.getTime()&&c++,l.splice(o,1),o--);r.setDate(r.getDate()+c)}while(0!=c)}this.multiDatesPicker.maxDate&&r>this.multiDatesPicker.maxDate&&(r=this.multiDatesPicker.maxDate),a.datepicker("option","minDate",s).datepicker("option","maxDate",r)}else a.datepicker("option","minDate",this.multiDatesPicker.minDate).datepicker("option","maxDate",this.multiDatesPicker.maxDate);this.multiDatesPicker.originalOnSelect&&t&&this.multiDatesPicker.originalOnSelect.call(this,t,i)},beforeShowDay:function(t){var i=e(this),a=!1!==i.multiDatesPicker("gotDate",t),s=i.datepicker("option","disabled"),r=!1!==i.multiDatesPicker("gotDate",t,"disabled"),c=this.multiDatesPicker.maxPicks<=this.multiDatesPicker.dates.picked.length,l=[!0,"",null];return this.multiDatesPicker.originalBeforeShowDay&&(l=this.multiDatesPicker.originalBeforeShowDay.call(this,t)),l[1]=a?"ui-state-highlight "+l[1]:l[1],l[0]=l[0]&&!(s||r||c&&!l[1]),l}};if(i.val())var s=i.val();t?(t.separator&&(this.multiDatesPicker.separator=t.separator),this.multiDatesPicker.separator||(this.multiDatesPicker.separator=", "),this.multiDatesPicker.originalBeforeShow=t.beforeShow,this.multiDatesPicker.originalOnSelect=t.onSelect,this.multiDatesPicker.originalBeforeShowDay=t.beforeShowDay,this.multiDatesPicker.originalOnClose=t.onClose,i.datepicker(t),this.multiDatesPicker.minDate=e.datepicker._determineDate(this,t.minDate,null),this.multiDatesPicker.maxDate=e.datepicker._determineDate(this,t.maxDate,null),t.addDates&&u.addDates.call(this,t.addDates),t.addDisabledDates&&u.addDates.call(this,t.addDisabledDates,"disabled"),u.setMode.call(this,t)):i.datepicker(),i.datepicker("option",a),s&&i.multiDatesPicker("value",s);var r=i.multiDatesPicker("value");i.val(r);var c=i.datepicker("option","altField");c&&e(c).val(r),i.datepicker("refresh")},compareDates:function(e,t){e=n.call(this,e),t=n.call(this,t);var i=e.getFullYear()-t.getFullYear();return i||(i=e.getMonth()-t.getMonth())||(i=e.getDate()-t.getDate()),i},sumDays:function(e,t){var i=typeof e;return obj_date=n.call(this,e),obj_date.setDate(obj_date.getDate()+t),n.call(this,obj_date,i)},dateConvert:function(t,i,a){var s=typeof t,r=e(this);if(s==i){if("object"==s)try{t.getTime()}catch(t){return e.error("Received date is in a non supported format!"),!1}return t}(void 0===t&&(t=new Date(0)),"string"!=i&&"object"!=i&&"number"!=i&&e.error('Date format "'+i+'" not supported!'),a)||(a=r.datepicker("option","dateFormat")||e.datepicker._defaults.dateFormat);switch(s){case"object":break;case"string":t=e.datepicker.parseDate(a,t);break;case"number":t=new Date(t);break;default:e.error('Conversion from "'+i+'" format not allowed on jQuery.multiDatesPicker')}switch(i){case"object":return t;case"string":return e.datepicker.formatDate(a,t);case"number":return t.getTime();default:e.error('Conversion to "'+i+'" format not allowed on jQuery.multiDatesPicker')}return!1},gotDate:function(e,t){t||(t="picked");for(var i=0;i<this.multiDatesPicker.dates[t].length;i++)if(0===u.compareDates.call(this,this.multiDatesPicker.dates[t][i],e))return i;return!1},value:function(e){if(!e||"string"!=typeof e){var t=u.getDates.call(this,"string");return t.length?t.join(this.multiDatesPicker.separator):""}u.addDates.call(this,e.split(this.multiDatesPicker.separator))},getDates:function(t,i){switch(t||(t="string"),i||(i="picked"),t){case"object":return this.multiDatesPicker.dates[i];case"string":case"number":var a=new Array;for(var s in this.multiDatesPicker.dates[i])a.push(n.call(this,this.multiDatesPicker.dates[i][s],t));return a;default:e.error('Format "'+t+'" not supported!')}},addDates:function(t,i){switch(i||(i="picked"),typeof t){case"object":case"array":if(t.length){for(var a=0;a<t.length;a++)l.call(this,t[a],i,!0);o.call(this,i);break}case"string":case"number":l.call(this,t,i);break;default:e.error('Date format "'+typeof t+'" not allowed on jQuery.multiDatesPicker')}},removeDates:function(e,t){t||(t="picked");var i=[];if("[object Array]"===Object.prototype.toString.call(e))for(var a in e.sort((function(e,t){return t-e})))i.push(r.call(this,e[a],t));else i.push(r.call(this,e,t));return i},removeIndexes:function(e,t){t||(t="picked");var i=[];if("[object Array]"===Object.prototype.toString.call(e))for(var a in e.sort((function(e,t){return t-e})))i.push(c.call(this,e[a],t));else i.push(c.call(this,e,t));return i},resetDates:function(e){e||(e="picked"),this.multiDatesPicker.dates[e]=[]},toggleDate:function(e,t){if(t||(t="picked"),"daysRange"===this.multiDatesPicker.mode){this.multiDatesPicker.dates[t]=[];var i=this.multiDatesPicker.autoselectRange[1],a=this.multiDatesPicker.autoselectRange[0];i<a&&(i=this.multiDatesPicker.autoselectRange[0],a=this.multiDatesPicker.autoselectRange[1]);for(var s=a;s<i;s++)u.addDates.call(this,u.sumDays.call(this,e,s),t)}else!1===u.gotDate.call(this,e)?u.addDates.call(this,e,t):u.removeDates.call(this,e,t)},setMode:function(t){switch(e(this),t.mode&&(this.multiDatesPicker.mode=t.mode),this.multiDatesPicker.mode){case"normal":for(option in t)switch(option){case"maxPicks":case"minPicks":case"pickableRange":case"adjustRangeToDisabled":this.multiDatesPicker[option]=t[option]}break;case"daysRange":case"weeksRange":var i=1;for(option in t)switch(option){case"autoselectRange":i--;case"pickableRange":case"adjustRangeToDisabled":this.multiDatesPicker[option]=t[option]}i>0&&e.error("Some mandatory options not specified!")}s.onSelect&&s.onSelect()},destroy:function(){this.multiDatesPicker=null,e(this).datepicker("destroy")}};return this.each((function(){var s=e(this);if(this.multiDatesPicker||(this.multiDatesPicker={dates:{picked:[],disabled:[]},mode:"normal",adjustRangeToDisabled:!0}),u[t]){var r=u[t].apply(this,Array.prototype.slice.call(i,1));switch(t){case"removeDates":case"removeIndexes":case"resetDates":case"toggleDate":case"addDates":var c=s.datepicker("option","altField"),l=u.value.call(this);void 0!==c&&""!=c&&e(c).val(l),s.val(l),e.datepicker._refreshDatepicker(this)}switch(t){case"removeDates":case"getDates":case"gotDate":case"sumDays":case"compareDates":case"dateConvert":case"value":a=r}return r}return"object"!=typeof t&&t?(e.error("Method "+t+" does not exist on jQuery.multiDatesPicker"),!1):u.init.apply(this,i)})),a};var t=(new Date).getTime();e.multiDatesPicker={version:!1},e.multiDatesPicker.initialized=!1,e.multiDatesPicker.uuid=(new Date).getTime(),e.multiDatesPicker.version=e.ui.multiDatesPicker.version,e.multiDatesPicker._hideDatepicker=e.datepicker._hideDatepicker,e.datepicker._hideDatepicker=function(){var t=this._curInst.input[0],i=t.multiDatesPicker;return!i||!1===this._curInst.inline&&!i.changed?e.multiDatesPicker._hideDatepicker.apply(this,arguments):(i.changed=!1,void e.datepicker._refreshDatepicker(t))},window["DP_jQuery_"+t]=e}(jQuery);
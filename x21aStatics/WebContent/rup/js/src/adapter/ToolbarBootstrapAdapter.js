!function(t,i){"function"==typeof define&&define.amd?define(["jquery","../templates","../rup.base"],i):t.ToolbarBootstrapAdapter=i(jQuery)}(this,(function(t,i){function r(){}return r.prototype.NAME="toolbar_bootstrap",r.prototype.addButton=function(r,n){var o;0!==(o=r.id?r.id:r.i18nCaption).indexOf(t(this).attr("id"))&&(o=t(this).attr("id")+"##"+o);var d=t(i.Templates.rup.toolbar.button.bootstrap({id:o,css:r.css,label:r.text?r.text:t.rup.i18nParse(n,r.i18nCaption)}));if(d.rup_button(r),void 0!==r.right&&!0===r.right){var e=this.children("div:not(.rup-dropdown-btn-group):not(.rup-mbutton )");0===e.length&&(e=t("<div></div>").attr("id",this.attr("id")+"-rightButtons").css("float","right"),this.append(e)),d.prependTo(e)}else d.parent().is(".rup-dropdown-btn-group")?t(this).append(d.parent()):t(this).append(d);return this._setKeyDown(d),d.on("focusout",(function(){t(this).removeClass("ui-state-focus")})),d},r.prototype.addMButton=function(r,n){var o,d,e="";if(void 0===r.id?(t.rup.errorGestor(t.rup.i18nParse(t.rup.i18n.base,"rup_toolbar.mbuttonsIdError")),e=null):(0!==(d=r.id).indexOf(t(this).attr("id"))&&(d=t(this).attr("id")+"##"+r.id),e=(o=t(i.Templates.rup.toolbar.mbutton.bootstrap({idParent:r.idParent,id:d,css:r.css,groupClasses:r.groupClasses,label:r.text?r.text:t.rup.i18nParse(n,r.i18nCaption)}))).find("[id='"+d+"']"),void 0===r.css&&(r.css="rup-toolbar_menuButtonIcon"),e.rup_button()),void 0!==r.right&&!0===r.right&&o.addClass("rup-button-right"),void 0!==r.right&&!0===r.right){var a=this.children("div:not(.rup-dropdown-btn-group):not(.rup-mbutton )");0===a.length&&(a=t("<div></div>").attr("id",this.attr("id")+"-rightButtons").css("float","right"),this.append(a)),o.prependTo(a)}else t(this).append(o);return this._setKeyDown(e),r.click&&e.click({i18nCaption:r.i18nCaption},r.click),o},r.prototype.addButtonsToMButton=function(i,r,n){var o,d,e,a;d=i.length,r.find("button").attr("href","#"),o=r.find('ul[id="'+r.find("button").attr("id")+'-mbutton-container"]');for(var p=d-1;p>=0;p--)a=(e=i[p]).id?r.find("button").attr("id")+"##"+e.id:r.find("button").attr("id")+"##"+e.i18nCaption,i[p].id=a,o.append(t("<li>").append(this.addButton(i[p],n)));t('[id ="'+r.attr("id")+'-mbutton-container"]').children().length!=d&&t('[id ="'+r.attr("id")+'-mbutton-container"]').append(o.children())},t.rup=t.rup||{},t.rup.adapter=t.rup.adapter||{},t.rup.adapter[r.prototype.NAME]=new r,t}));
/*! For license information please see rup.breadCrumb.js.LICENSE.txt */
!function(e){"function"==typeof define&&define.amd?define(["jquery","./core/utils/xbreadcrumbs"],e):e(jQuery)}((function(e){e.widget("$.rup_breadCrumb",{options:{showSpeed:"fast",hideSpeed:"",collapsible:!1,collapsedWidth:10,breadCrumb:e.rup.APP_RESOURCES+".breadCrumb"},_create:function(){window.initRupI18nPromise.then((()=>{var r=window.location.pathname.substring(e.rup.CTX_PATH.length).split("/"),i=e("<div>").addClass("d-inline-flex col-auto p-0 me-3"),n=e("<ul>").addClass("rup-breadCrumb_main d-inline-flex"),t=null,a=null,s=void 0!==this.options.initUrl?e.rup.CTX_PATH+this.options.initUrl:e.rup.CTX_PATH,u=void 0===this.options.i18nId?this.element.attr("id"):this.options.i18nId,d=this.element[0].id,o=e("div.rup-breadCrumb_root").data("logoutUrl");this.element.append("<div class='row'></div>"),this.options.breadCrumb instanceof Object?t=this.options.breadCrumb:(e.rup.getFile(this.options.breadCrumb),t=e.rup.i18n[this.options.breadCrumb]),window.LOGGED_USER&&"NULL"!==window.LOGGED_USER||(window.LOGGED_USER=""),window.DESTROY_XLNETS_SESSION||(window.DESTROY_XLNETS_SESSION="false"),""!==LOGGED_USER?(void 0!==o&&("false"===DESTROY_XLNETS_SESSION?e(this.element.children()[0]).append(e("<div class='rup-breadCrumb_logoutDiv col-2 order-last text-end'>").append(e("<a>").addClass("rup-breadCrumb_link").attr("logOutHref",o).on("click",(function(){e.rup_messages("msgConfirm",{message:e.rup.i18nParse(e.rup.i18n.base,"rup_breadCrumb.menuDisconnectMessage"),title:e.rup.i18nParse(e.rup.i18n.base,"rup_breadCrumb.menuDisconnectTitle"),OKFunction:function(){e(window).attr("location",e("#"+e.escapeSelector(d)+" .rup-breadCrumb_link").attr("logOutHref"))}})})).html(e.rup.i18nParse(e.rup.i18n.base,"rup_breadCrumb.exit")).append(e("<span>").addClass("ui-icon rup-icon rup-icon-door-out rup-breadCrumb_exitImg")))):e(this.element.children()[0]).append(e("<div class='rup-breadCrumb_logoutDiv col-12 col-sm-3 order-last text-sm-end'>").append(e("<a>").addClass("rup-breadCrumb_link").attr("logOutHref",o).on("click",(function(){e.rup_messages("msgConfirm",{message:e.rup.i18nParse(e.rup.i18n.base,"rup_breadCrumb.menuSecuritySystemDisconnectMessage"),title:e.rup.i18nParse(e.rup.i18n.base,"rup_breadCrumb.menuDisconnectTitle"),OKFunction:function(){e(window).attr("location",e("#"+e.escapeSelector(d)+" .rup-breadCrumb_link").attr("logOutHref"))}})})).mouseover((function(){e(this).find("i.mdi").removeClass("mdi-lock-open").addClass("mdi-lock")})).mouseleave((function(){e(this).find("i.mdi").removeClass("mdi-lock").addClass("mdi-lock-open")})).html(e.rup.i18nParse(e.rup.i18n.base,"rup_breadCrumb.disconnect")).prepend(e('<i class="mdi mdi-lock-open align-baseline" aria-hidden="true"></i>'))))),i.append(e("<span>").addClass("rup-breadCrumbs_span").text(LOGGED_USER+e.rup.i18nParse(e.rup.i18n.base,"rup_breadCrumb.userAre")))):i.append(e("<span>").addClass("rup-breadCrumbs_span").text(e.rup.i18nParse(e.rup.i18n.base,"rup_breadCrumb.youAre"))),n.append(this._createLI(e.rup.i18nParse(e.rup.i18n.base,"rup_breadCrumb.start"),s));for(var p=0;p<r.length;p++)t[r[p]]&&(t=this._createBreadCrumb(t[r[p]],r[p],n,u));e(n.children()[n.children().length-1]).addClass("rup-breadCrumb_current").find("img.rup-icon, span.mdi").remove(),(a=e(n.children()[n.children().length-1]).find("a").first()).replaceWith(e("<span>").text(a.text()).css({"font-weight":"bold",color:"#333333"})),e(this.element.children()[0]).append('<div class="breadCrumb_where_is col-12 col-sm-9 order-first"></div>'),e("#"+e.escapeSelector(d)+" .breadCrumb_where_is").append([i,n]),e(n).wrap(e("<div>").addClass("d-inline-flex col-auto px-0 pb-1")),n.xBreadcrumbs(),e(this.element).trigger("afterInit")}))},_createLI:function(r,i,n){var t=e("<li>"),a=e("<a>").attr("href",i).text(r);return t.append(a),!1!==n&&t.append(e("<span>").addClass("mdi mdi-chevron-right pe-1 ps-1")),t},_createBreadCrumb:function(r,i,n,t){var a,s=e("<ul>");if(r.i18nCaption&&(a=this._createLI(e.rup.i18nParse(e.rup.i18n.app[t],r.i18nCaption),r.url?e.rup.CTX_PATH+r.url:"#")),r.subLevel){for(var u=0;u<r.subLevel.length;u++){let i="#";if(r.subLevel[u].url){i=r.subLevel[u].url;let n=e('nav.rup-navbar ul.nav a[href^="'+r.subLevel[u].url+'"]');n.length>1?e.each(n,(function(r,t){let a=e(t).attr("href");if((-1!=a.indexOf("?")?a.substring(0,a.indexOf("?")):a)===i)return n=a,!1})):n=n.attr("href"),null!=n&&(i=n)}s.append(this._createLI(e.rup.i18nParse(e.rup.i18n.app[t],r.subLevel[u].i18nCaption),i,!1).css("background","none"))}a.append(s),e(a).on("mouseover",(function(){e(this).find("a").eq(1).focus()})),a.on("keydown",(function(r){switch(r.code){case"ArrowUp":for(var i=e(this).find("li > a"),n=0;n<i.length&&i[n].text!==e(r.target).text();n++);e(i[n-1]).length>0?e(i[n-1]).focus():e(this).find("li > a").last().focus();break;case"ArrowDown":i=e(this).find("li > a");for(var t=0;t<i.length&&i[t].text!==e(r.target).text();t++);e(i[n+1]).length>0?e(i[n+1]).focus():e(this).find("li > a").first().focus();break;case"Escape":e(this).children("ul").hide()}}))}return n.append(a),r},_setOption:function(){e.Widget.prototype._setOption.apply(this,arguments)},destroy:function(){e.Widget.prototype.destroy.apply(this,arguments)}})}));
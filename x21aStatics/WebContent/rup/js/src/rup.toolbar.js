/*! For license information please see rup.toolbar.js.LICENSE.txt */
!function(t){"function"==typeof define&&define.amd?define(["jquery","./rup.base","block-ui"],t):t(jQuery)}((function(t){t.rup_toolbar=t.rup_toolbar||{},t.extend(t.rup_toolbar,{extend:function(i){t.fn.extend(i)}}),t.rup_toolbar.showingMB=null,t.rup_toolbar.extend({addButton:function(t,i){return this[0]._ADAPTER.addButton.bind(this)(t,i)},addMButton:function(t,i){return void 0===t.idParent&&(t.idParent=this.id),t.click||(t.click=this.showMButton),this[0]._ADAPTER.addMButton.bind(this)(t,i)},addButtonsToMButton:function(t,i,n){return this[0]._ADAPTER.addButtonsToMButton.bind(this)(t,i,n)},showMButton:function(){var i=t(this),n=t.rup_toolbar.showingMB,o=this.id;return n===o?(t("ul[id*='"+n+"']").slideUp("fast"),i.removeClass("rup-toolbar_menuButtonSlided"),n=null):(t("ul[id*='"+n+"']").slideUp("fast"),t("ul[id*='"+o+"']").slideDown("fast"),t("[id='"+n+"']").removeClass("rup-toolbar_menuButtonSlided"),i.addClass("rup-toolbar_menuButtonSlided"),n=o),t.rup_toolbar.showingMB=n,!1},disableButton:function(i){-1===i.indexOf(this.attr("id"))&&(i=this.attr("id")+"##"+i),t("[id='"+i+"']").button("disable").attr("disabled",!0)},enableButton:function(i){-1===i.indexOf(this.attr("id"))&&(i=this.attr("id")+"##"+i),t("[id='"+i+"']").button("enable").attr("disabled",!1)},pressButton:function(i,n){-1===i.indexOf(this.attr("id"))&&(i=this.attr("id")+"##"+i),t("[id='"+i+"']").addClass(n)},unpressButton:function(i,n){-1===i.indexOf(this.attr("id"))&&(i=this.attr("id")+"##"+i),t("[id='"+i+"']").removeClass(n)},tooglePressButton:function(i,n){-1===i.indexOf(this.attr("id"))&&(i=this.attr("id")+"##"+i),t("[id='"+i+"']").toggleClass(n)},refreshButton:function(i){-1===i.indexOf(this.attr("id"))&&(i=this.attr("id")+"##"+i),t("[id='"+i+"']").button("refresh")},_setKeyDown:function(i){i.on("keydown",(function(i){var n,o=t(i.currentTarget),d=o.parent();if("Tab"===i.code&&!i.shiftKey&&1===(n=o.next().attr("id")!==d.attr("id")+"-rightButtons"?o.next(":focusable"):o.next().children(":focusable").first()).length)return n.focus(),t.rup_toolbar.focusedExternally[d.attr("id")]=!0,!1}))}}),t.rup_toolbar.hideMButtons=function(){var i=t.rup_toolbar.showingMB;t("ul[id*='"+i+"']").slideUp("fast"),t("[id='"+i+"']").removeClass("rup-toolbar_menuButtonSlided"),i=null,t.rup_toolbar.showingMB=i},t.fn.getTotalHeight=function(){return t(this).height()+parseInt(t(this).css("paddingTop"))+parseInt(t(this).css("paddingBottom"))+parseInt(t(this).css("borderTopWidth"))+parseInt(t(this).css("borderBottomWidth"))},t.fn.rup_toolbar=function(...i){global.initRupI18nPromise.then((()=>{if("string"!=typeof i[0])return this.each((function(){var n,o=t.extend({},t.fn.rup_toolbar.defaults,i[0]),d=t(this),e=[];this._ADAPTER=t.rup.adapter[o.adapter],void 0===t.rup_toolbar.focusedExternally&&(t.rup_toolbar.focusedExternally={}),t.rup_toolbar.focusedExternally[this.id]=!1,o.id=this.id,n=t.rup.i18n.app[o.id],d.addClass("rup-toolbar ui-widget-header ui-widget ui-widget-content"),null!=o.width&&d.width(o.width),t(document).add("ul li").on("click",t.rup_toolbar.hideMButtons);for(var r=0;r<o.buttons.length;r+=1){var s=o.buttons[r];if(void 0===s.right||!0!==s.right)if(s.buttons){let i=d.addMButton(t.extend({idParent:this.id,id:s.id,i18nCaption:s.i18nCaption,css:s.css,click:d.showMButton},s),n);null!==i&&d.addButtonsToMButton(s.buttons,i,n)}else d.addButton(s,n);else e.push(s)}for(let t=0;t<e.length;t+=1){var u=e[t];if(u.buttons){let t=d.addMButton({id:u.id,i18nCaption:u.i18nCaption,css:u.css,click:d.showMButton,right:u.right},n);null!==t&&d.addButtonsToMButton(u.buttons,t,n)}else d.addButton(u,n)}}));this[i[0]].apply(this,i.splice(1))})).catch((t=>{console.error("Error al inicializar el componente:\n",t)}))},t.fn.rup_toolbar.defaults={width:null,buttons:[],mbuttons:null,adapter:"toolbar_material"}}));
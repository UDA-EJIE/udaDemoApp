/*! For license information please see rup.feedback.js.LICENSE.txt */
!function(e){"function"==typeof define&&define.amd?define(["jquery","./rup.base","./rup.tooltip"],e):e(jQuery)}((function($){$.widget("$.rup_feedback",{options:{type:null,imgClass:null,delay:null,fadeSpeed:null,gotoTop:!0,block:!0,closeLink:!0,_idFeedback:null,_divClose:null,customGoTo:null},_setOption:function(e,a){var s=this.options,t=this.element;switch(e){case"type":null!==a?(t.removeClass(s.imgClass+" rup-feedback_image_"+s.type),t.addClass("rup-feedback_image rup-feedback_image_"+a)):t.removeClass("rup-feedback_image rup-feedback_image_"+s.type);break;case"imgClass":null!==a?(t.removeClass(s.imgClass+" rup-feedback_image rup-feedback_image_"+s.type),t.addClass(a)):t.removeClass(s.imgClass);break;case"closeLink":a?this._addCloseLink():$("#"+$.escapeSelector(this.options._idFeedback)+"_closeDiv").remove()}$.Widget.prototype._setOption.apply(this,arguments)},_create:function(){var e=this.options;e._idFeedback=this.element.addClass($.rup.adapter[$.fn.rup_feedback.defaults.adapter].containerClass()).addClass(null!=e.imgClass?e.imgClass:null!=e.type?"rup-feedback_image rup-feedback_image_"+e.type:"").attr({role:"alert"}).css("display",e.block?"block":"none").css("visibility","hidden").append($.rup.adapter[$.fn.rup_feedback.defaults.adapter].feedbackIcon(e.type)).attr("id"),e._divClose=$("<div></div>").html($.rup.adapter[$.fn.rup_feedback.defaults.adapter].closeIcon()).attr("id",e._idFeedback+"_closeDiv").attr("title",$.rup.i18nParse($.rup.i18n.base,"rup_feedback.closingLiteral")).addClass("rup-feedback_closeLink").addClass($.rup.adapter[$.fn.rup_feedback.defaults.adapter].classComponent()),e.message&&this.set(e.message,e.type,e.imgClass)},_addCloseLink:function(){var e=this.options;e._divClose.click((function(){$("#"+$.escapeSelector(e._idFeedback)).rup_feedback("close")})),this.element.prepend(e._divClose)},destroy:function(){this.element.removeClass().removeAttr("role").css("cssText","").html("").stop().animate({opacity:"100"}),$.Widget.prototype.destroy.apply(this,arguments)},set:function(e,a,s){var t=this.element,i=this.options;t.stop().animate({opacity:"100"}),null!=a?(t.removeClass(i.imgClass),null!=i.type?t.removeClass("rup-feedback_image_"+i.type):t.addClass("rup-feedback_image"),a=a.toLowerCase(),t.find("i").not(".mdi.mdi-close").eq(0).remove(),t.prepend($.rup.adapter[$.fn.rup_feedback.defaults.adapter].feedbackIcon(a)),t.addClass("rup-feedback_image_"+a),i.type=a):null===a&&(t.removeClass("rup-feedback_image rup-feedback_image_"+i.type),i.type=null),null!=s&&(null!=i.imgClass&&t.removeClass(i.imgClass),t.addClass(s),i.imgClass=s),$("#"+$.escapeSelector(i._idFeedback)+"_content").remove(),t.append($("<div></div>").attr("id",i._idFeedback+"_content").html(e)),i.closeLink&&this._addCloseLink(),this.show();let o="0px";null!==i.customGoTo&&void 0!==i.customGoTo&&(o="function"==typeof i.customGoTo?i.customGoTo():i.customGoTo),i.gotoTop&&$("html, body").animate({scrollTop:o},0),null!=i.delay&&this.hide(),$("#"+$.escapeSelector(this.options._idFeedback)).trigger("rupFeedback_afterSet")},hide:function(delay,fadeSpeed){var opciones=this.options,element=this.element;null==delay&&(delay=opciones.delay),null==fadeSpeed&&(fadeSpeed=opciones.fadeSpeed),element.delay(delay).fadeOut(eval(fadeSpeed),(function(){$("#"+$.escapeSelector(opciones._idFeedback)).rup_feedback("close",!0)}))},close:function(e){var a=this.element;a.css("display",this.options.block?"block":"none"),a.css("visibility","hidden"),void 0===e&&a.empty()},show:function(){var e=this.element;e.css("display","block"),e.css("visibility","visible"),0===$(".mdi",e).length&&e.prepend("<i class='mdi'>"),this.element.find("[title]").rup_tooltip({position:{at:"bottom center",my:"top center"},applyToPortal:!0}),$("#"+$.escapeSelector(this.options._idFeedback)+"_closeDiv").show(),$("#"+$.escapeSelector(this.options._idFeedback)).trigger("rupFeedback_show"),jQuery(this.element).triggerHandler("rupFeedback_show")}});var rup_feedback={};$.extend($.rup.iniRup,$.rup.rupSelectorObjectConstructor("rup_feedback",rup_feedback)),$.fn.rup_feedback.defaults={adapter:"feedback_material"}}));
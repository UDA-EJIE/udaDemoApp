import"jquery";import*as testutils from"../common/specCommonUtils";import"rup.calendar";var EVENTS=[{id:"48605",title:"<span><strong>AUTORIZACIÓN DE VERTIDO DE AGUAS RESIDUALES PROCEDENTES DE ESTACIÓN DE SERVICIO Nº 7338 EN ARKAUTE, T.M .DE VITORIA-GASTEIZ</strong><ul class='ps-3'><li>Nºexp.:&nbsp;VDP-A-2012-0382</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li><li>Requiere muestra&nbsp;</li><li><i class='mdi mdi-check pe-1' aria-hidden='true'></i>COMPLETADA</li></ul></span>",start:"1541890800000",class:" vertido muestreo completada",end:"1541890800001",url:"javascript:actions(48605)"},{id:"47278",title:"<span><strong>REVISION DE LA AUTORIZACION DE VERTIDO DE AGUAS RESIDUALES DE LA LOCALIDAD DE ILARRATZA (2 P. VERTIDO), T.M. DE VITORIA-GASTEIZ. (REV. 2009-S-0372)</strong><ul class='ps-3'><li>Nºexp.:&nbsp;RAV-A-2014-0058</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li></ul></span>",start:"1543186800000",class:" vertido vigilancia",end:"1543186800001",url:"javascript:actions(47278)"},{id:"49203",title:"<span><strong>AUTORIZACION DE VERTIDO DE AGUAS RESIDUALES EN ESTACION DE SERVICIO (FECALES, HIDROCARBUROS Y LAVADO DE VEHICULOS EN OTXANDIO</strong><ul class='ps-3'><li>Nºexp.:&nbsp;VDP-A-2012-0164</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li></ul></span>",start:"1541890800000",class:" vertido vigilancia",end:"1541890800001",url:"javascript:actions(49203)"},{id:"47275",title:"<span><strong>REVISION DE LA AUTORIZACION DE VERTIDO DE AGUAS RESIDUALES DE LA LOCALIDAD DE ILARRATZA (2 P. VERTIDO), T.M. DE VITORIA-GASTEIZ. (REV. 2009-S-0372)</strong><ul class='ps-3'><li>Nºexp.:&nbsp;RAV-A-2014-0058</li><li>P.vertido:&nbsp;PV2</li><li>Id.flujo:&nbsp;F2</li></ul></span>",start:"1543186800000",class:" vertido vigilancia",end:"1543186800001",url:"javascript:actions(47275)"},{id:"47445",title:"<span><strong>AUTORIZACION AMBIENTAL INTEGRADA PARA LA ACTIVIDAD DE FABRICACION DE TUBOS DE ACERO SOLDADOS LONGITUDINALMENTE, PROMOVIDA POR CONDESA FABRIL, S.A., EN EL T.M. DE LEGUTIANO (ARABA).</strong><ul class='ps-3'><li>Nºexp.:&nbsp;AAI-A-2013-0017-INTER</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li><li>Requiere muestra&nbsp;</li></ul></span>",start:"1541804400000",class:" vertido muestreo",end:"1541804400001",url:"javascript:actions(47445)"},{id:"45977",title:"<span><strong>REVISION DE LA AUTORIZACION DE VERTIDOS DE AGUAS RESIDUALES PROCEDENTES DE LA EDAR MUNICIPAL DE OTXANDIO (RV: 1992-S-0149)</strong><ul class='ps-3'><li>Nºexp.:&nbsp;RAV-A-2012-0362</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li><li>Requiere muestra&nbsp;</li></ul></span>",start:"1543618800000",class:" vertido muestreo",end:"1543618800001",url:"javascript:actions(45977)"},{id:"47308",title:"<span><strong>AUTORIZACION DE VERTIDO DE AGUAS RESIDUALES DE LA LOCALIDAD DE BERROSTEGIETA EN EL TERMINO MUNICIPAL DE VITORIA-GASTEIZ (4 FOSAS SÉPTICAS CON TRES PUNTOS DE VERTIDO)</strong><ul class='ps-3'><li>Nºexp.:&nbsp;VDP-A-2012-0835</li><li>P.vertido:&nbsp;PV-1</li><li>Id.flujo:&nbsp;F1</li></ul></span>",start:"1542150000000",class:" vertido vigilancia",end:"1542150000001",url:"javascript:actions(47308)"},{id:"49172",title:"<span><strong>AUTORIZACION DE VERTIDO DE AGUAS RESIDUALES DE LA EMPRESA LEGUTILAN DEDICADA A FABRICACION DE ESTRUCTURAS METALICAS Y SUS COMPONENTES, EN LA LOCALIDAD DE LEGUTIANO.</strong><ul class='ps-3'><li>Nºexp.:&nbsp;VDP-A-2013-0010</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li></ul></span>",start:"1542668400000",class:" vertido vigilancia",end:"1542668400001",url:"javascript:actions(49172)"},{id:"49170",title:"<span><strong>REVISION DE AUTORIZACION DE VERTIDO DE AGUAS RESIDUALES DEL POLIGONO INDUSTRIAL LLADIE EN LEGUTIO, TITULARIDAD DE EUSEBIO ARECHAGA IBARRRONDO</strong><ul class='ps-3'><li>Nºexp.:&nbsp;RAV-A-2013-0037</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li></ul></span>",start:"1542495600000",class:" vertido vigilancia",end:"1542495600001",url:"javascript:actions(49170)"},{id:"47411",title:"<span><strong>AUTORIZACION VERTIDO AGUAS RESIDUALES PROCEDENTE DE BETOLAZA</strong><ul class='ps-3'><li>Nºexp.:&nbsp;VDP-A-2012-0035</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li></ul></span>",start:"1541718000000",class:" vertido vigilancia",end:"1541718000001",url:"javascript:actions(47411)"},{id:"49162",title:"<span><strong>REVISION DE LA AUTORIZACION DE VERTIDO DE AGUAS RESIDUALES PROCEDENTES DE LA LOCALIDAD DE ANTEZANA FORONDA, EN EL T.M. VITORIA-GASTEIZ (ALAVA).</strong><ul class='ps-3'><li>Nºexp.:&nbsp;RAV-A-2012-0418</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li></ul></span>",start:"1542150000000",class:" vertido vigilancia",end:"1542150000001",url:"javascript:actions(49162)"},{id:"47457",title:"<span><strong>AUTORIZACION AMBIENTAL INTEGRADA PARA LA ACTIVIDAD DE FABRICACION DE TUBOS DE ACERO SOLDADOS LONGITUDINALMENTE, PROMOVIDA POR CONDESA FABRIL, S.A., EN EL T.M. DE LEGUTIANO (ARABA).</strong><ul class='ps-3'><li>Nºexp.:&nbsp;AAI-A-2013-0017-INTER</li><li>P.vertido:&nbsp;PV2</li><li>Id.flujo:&nbsp;F2</li><li>Requiere muestra&nbsp;</li></ul></span>",start:"1541804400000",class:" vertido muestreo",end:"1541804400001",url:"javascript:actions(47457)"},{id:"49166",title:"<span><strong>REVISION DE LA AUTORIZACION DE VERTIDO DE AGUAS RESIDUALES PROCEDENTES DE LA ENTIDAD URBANISTICA DE CONSERVACION, S.A.U DEPORTIVO LARRABEA UBICADA EN LEGUTIANO, T.M. DE LEGUTIANO (ARABA).</strong><ul class='ps-3'><li>Nºexp.:&nbsp;RAV-A-2012-0332</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li></ul></span>",start:"1541545200000",class:" vertido vigilancia",end:"1541545200001",url:"javascript:actions(49166)"},{id:"48640",title:"<span><strong>REVISION DE AUTORIZACION DE VERTIDO DE AGUAS RESIDUALES PROCEDENTES DEL LABORATORIO PECUARIO DE ESKALMENDI T.M. ARRATZUA-UBARRUNDIA(ALAVA)</strong><ul class='ps-3'><li>Nºexp.:&nbsp;RAV-A-2012-0274</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li></ul></span>",start:"1543359600000",class:" vertido vigilancia",end:"1543359600001",url:"javascript:actions(48640)"},{id:"49111",title:"<span><strong>REVISION DE LA AUTORIZACION DE VERTIDO DE AGUAS RESIDUALES DE LA LOCALIDAD DE ULLIBARRI DE LOS OLLEROS, T.M. DE VITORIA-GASTEIZ. (REV. 2009-S-0396)</strong><ul class='ps-3'><li>Nºexp.:&nbsp;RAV-A-2014-0056</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li></ul></span>",start:"1543186800000",class:" vertido vigilancia",end:"1543186800001",url:"javascript:actions(49111)"},{id:"56120",title:"<span><strong>AUTORIZACIÓN DE VERTIDO DE AGUAS RESIDUALES PROCEDENTES DE LA VIVIENDA CTRA. DE BERGARA, Nº 15 DE DURANA, T. M. DE ARRATZUA-UBARRUNDIA</strong><ul class='ps-3'><li>Nºexp.:&nbsp;VDP-A-2014-0005</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li><li>Requiere muestra&nbsp;</li></ul></span>",start:"1543186800000",class:" vertido muestreo",end:"1543186800001",url:"javascript:actions(56120)"},{id:"58023",title:"<span><strong>EXPEDIENTE DE AUTORIZACIÓN DE OBRAS DE ADECUACIÓN DEL TRAMO INICIAL DE LA CARRETERA GI-3112 AL BARRIO DE UZARRAGA, EN EL TÉRMINO MUNICIPAL DE ANTZUOLA (GIPUZKOA)</strong><ul class='ps-3'><li>Nºexp.:&nbsp;SAO-A-2018-0131</li><li>Id. zona:&nbsp;ZO1</li></ul></span>",start:"1543100400000",class:" obra",end:"1543100400001",url:"javascript:actions(58023)"},{id:"56110",title:"<span><strong>AUTORIZACIÓN DE VERTIDO DE AGUAS RESIDUALES PROCEDENTES DE LA VIVIENDA CTRA. DE BERGARA, Nº 19 DE DURANA, T. M. DE ARRATZUA-UBARRUNDIA</strong><ul class='ps-3'><li>Nºexp.:&nbsp;VDP-A-2014-0017</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li><li>Requiere muestra&nbsp;</li></ul></span>",start:"1543186800000",class:" vertido muestreo",end:"1543186800001",url:"javascript:actions(56110)"},{id:"45976",title:"<span><strong>REVISION DE LA AUTORIZACION DE VERTIDOS DE AGUAS RESIDUALES PROCEDENTES DE LA EDAR MUNICIPAL DE OTXANDIO (RV: 1992-S-0149)</strong><ul class='ps-3'><li>Nºexp.:&nbsp;RAV-A-2012-0362</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li><li>Requiere muestra&nbsp;</li></ul></span>",start:"1541026800000",class:" vertido muestreo",end:"1541026800001",url:"javascript:actions(45976)"},{id:"47216",title:"<span><strong>AUTORIZACION VERTIDO AGUAS RESIDUALES DE ESTACION DE SERVICIO IBAIA ENERGY, S. L. CTRA. N-102 KM.347 (LADO DCHA. DIRECC. IRUN) (LEGAL. V-01-03023)</strong><ul class='ps-3'><li>Nºexp.:&nbsp;VDP-A-2012-0830</li><li>P.vertido:&nbsp;PV-1</li><li>Id.flujo:&nbsp;F1</li></ul></span>",start:"1542495600000",class:" vertido vigilancia",end:"1542495600001",url:"javascript:actions(47216)"},{id:"47475",title:"<span><strong>REVISION DE LA AUTORIZACION DE VERTIDO DE AGUAS RESIDUALES DEL POLIGONO INDUSTRIAL DE GOIAIN Y DE LA POBLACION DE LEGUTIO, T.M. DE LEGUTIO. (Rev. 2008-S-0043)</strong><ul class='ps-3'><li>Nºexp.:&nbsp;RAV-A-2014-0030</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li><li>Requiere muestra&nbsp;</li></ul></span>",start:"1543359600000",class:" vertido muestreo",end:"1543359600001",url:"javascript:actions(47475)"},{id:"49207",title:"<span><strong>REVISION DE AUTORIZACIÓN DE VERTIDO DE AGUA RESIDUALES PROCEDENTES DE CAMPO DE TIRO LAS COLINAS EN ZUAZO DE VITORIA, T.M. VITORIA-GASTEIZ (ALAVA) (REV. 2005-S-0107)</strong><ul class='ps-3'><li>Nºexp.:&nbsp;RAV-A-2013-0029</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li></ul></span>",start:"1543359600000",class:" vertido vigilancia",end:"1543359600001",url:"javascript:actions(49207)"},{id:"49200",title:"<span><strong>REVISIÓN DE LA AUTORIZACIÓN DE VERTIDO DE AGUAS RESIDUALES PROCEDENTES DE LA ACTIVIDAD DE LA EMPRESA FRIGORÍFICOS INDUSTRIALES ALAVESES, UBICADA EN DURANA, T.M. DE ARRAZUA-UBARRUNDIA (Rev.2005-S-34)</strong><ul class='ps-3'><li>Nºexp.:&nbsp;RAV-A-2012-0297</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li></ul></span>",start:"1542150000000",class:" vertido vigilancia",end:"1542150000001",url:"javascript:actions(49200)"},{id:"47464",title:"<span><strong>AUTORIZACION DE VERTIDO DE AGUAS RESIDUALES PROCEDENTES DE LA LOCALIDAD DE URBINA (2 FOSAS)</strong><ul class='ps-3'><li>Nºexp.:&nbsp;VDP-A-2012-0781</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li></ul></span>",start:"1542841200000",class:" vertido vigilancia",end:"1542841200001",url:"javascript:actions(47464)"},{id:"48795",title:"<span><strong>AUTORIZACIÓN (LEGALIZACIÓN) DE VERTIDO DE AGUAS RESIDUALES PROCEDENTE DEL CLUB NÁUTICO DE VITORIA (LEGAL.EXP. V-01-05021)</strong><ul class='ps-3'><li>Nºexp.:&nbsp;VDP-A-2012-0343</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li></ul></span>",start:"1543446000000",class:" vertido vigilancia",end:"1543446000001",url:"javascript:actions(48795)"},{id:"51469",title:"<span><strong>REVISION DE AUTORIZACION DE VERTIDO DE AGUAS RESIDUALES PROCEDENTES DEL BARRIO DE NAFARRATE, EN LA LOCALIDAD DE URRUNAGA, T.M. DE LEGUTIANO (ARABA) (Rev. 2010-S-0285)</strong><ul class='ps-3'><li>Nºexp.:&nbsp;RAV-A-2016-0054</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li><li>Requiere muestra&nbsp;</li></ul></span>",start:"1543273200000",class:" vertido muestreo",end:"1543273200001",url:"javascript:actions(51469)"},{id:"49164",title:"<span><strong>AUTORIZACIÓN DE VERTIDO DE AGUAS RESIDUALES PROCEDENTES DE LA POBLACION DE AMARITA, T.M. DE VITORIA-GASTEIZ (ALAVA).</strong><ul class='ps-3'><li>Nºexp.:&nbsp;VDP-A-2012-0268</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li></ul></span>",start:"1541372400000",class:" vertido vigilancia",end:"1541372400001",url:"javascript:actions(49164)"},{id:"47488",title:"<span><strong>REVISION DE AUTORIZACION DE VERTIDO DE AGUAS RESIDUALES PROCEDENTES DE LA POBLACION DE GAMARRA MENOR, T.M. DE VITORIA-GASTEIZ (ARABA) (Rev. 2013-S-0095)</strong><ul class='ps-3'><li>Nºexp.:&nbsp;RAV-A-2016-0055</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li></ul></span>",start:"1543446000000",class:" vertido vigilancia",end:"1543446000001",url:"javascript:actions(47488)"},{id:"49143",title:"<span><strong>AUTORIZACION DE VERTIDO DE AGUAS RESIDUALES PROCEDENTES DE UNA GRANJA EXPERIMENTAL DE AVES EN LA LOCALIDAD DE CASTILLO, EN EL T.M. DE VITORIA-GASTEIZ (ALAVA).</strong><ul class='ps-3'><li>Nºexp.:&nbsp;VDP-A-2012-0379</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li></ul></span>",start:"1542495600000",class:" vertido vigilancia",end:"1542495600001",url:"javascript:actions(49143)"}],monthMap={Enero:1,Febrero:2,Marzo:3,Abril:4,Mayo:5,Junio:6,Julio:7,Agosto:8,Septiembre:9,Octubre:10,Noviembre:11,Diciembre:12},calendarUtils={leapYear:e=>e%4==0&&(e%100!=0||e%400==0),countWeeks:(e,a)=>calendarUtils.leapYear(a)&&7===new Date(e.rup_calendar("getYear")-1,0,1,0,0,0).getDay()?53:52};describe("Test rup_calendar (default)",(()=>{var e;beforeAll((e=>{testutils.loadCss(e)})),beforeEach((a=>{createCalendar(opts1,(()=>{e=$("#calendar"),a()}))})),afterEach((()=>{void 0!==e.data("cal")&&e.rup_calendar("destroy"),$("#content").html(""),$("#content").nextAll().remove()})),describe(" > Métodos públicos",(()=>{describe(" > Método navigate",(()=>{describe(" > navigate por defecto",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.rup_calendar("navigate")})),e.rup_calendar("navigate","prev"),a()})),it(" > el view debe estar establecido a una vista actual",(()=>{expect(e.rup_calendar("isToday")).toBeTruthy()}))})),describe(" > navigate erróneo",(()=>{it(" > El método debe dar error",(()=>{expect((()=>{e.rup_calendar("navigate","randomData")})).toThrowError("Parámetro inválido")}))})),describe(" > navigate prev/today/next",(()=>{describe(" > navigate prev",(()=>{describe(" > año",(()=>{var a;beforeEach((t=>{e.on("afterRender",(()=>{e.off("afterRender"),a=e.rup_calendar("getYear"),e.rup_calendar("navigate","prev"),t()})),e.rup_calendar("setView","year")})),it(" > Debe haber retrocedido un año",(()=>{expect(e.rup_calendar("getYear")+1).toBe(a)}))})),describe(" > mes",(()=>{var a;beforeEach((t=>{e.on("afterRender",(()=>{e.off("afterRender"),a=e.rup_calendar("getMonth"),e.rup_calendar("navigate","prev"),t()})),e.rup_calendar("setView","month")})),it(" > Debe haber retrocedido un mes",(()=>{if(1===a)expect(monthMap[e.rup_calendar("getMonth")]).toBe(12);else{let t=monthMap[e.rup_calendar("getMonth")]+1;t>12&&(t-=12),expect(t).toBe(monthMap[a])}}))})),describe(" > semana",(()=>{var a;beforeEach((t=>{e.on("afterRender",(()=>{e.off("afterRender"),a=e.rup_calendar("getWeek"),e.rup_calendar("navigate","prev"),t()})),e.rup_calendar("setView","week")})),it(" > Debe haber retrocedido una semana",(()=>{if(1===a)expect(e.rup_calendar("getWeek")).toBe(calendarUtils.countWeeks(e,e.rup_calendar("getYear")-1));else{let t=e.rup_calendar("getWeek")+1;t>52&&(t-=52),expect(t).toBe(a)}}))})),describe(" > día",(()=>{var a;beforeEach((t=>{e.on("afterRender",(()=>{e.off("afterRender"),a=e.rup_calendar("getStartDate").getDate(),e.rup_calendar("navigate","prev"),t()})),e.rup_calendar("setView","day")})),it(" > Debe haber retrocedido un día",(()=>{var t;if(1===a){let a=monthMap[e.rup_calendar("getMonth")];a%2==0?2===a?calendarUtils.leapYear(e.rup_calendar("getYear")-1)?(t=29,expect(e.rup_calendar("getStartDate").getDate()).toBe(29)):(t=28,expect(e.rup_calendar("getStartDate").getDate()).toBe(28)):(t=30,expect(e.rup_calendar("getStartDate").getDate()).toBe(30)):(t=31,expect(e.rup_calendar("getStartDate").getDate()).toBe(31))}else 1===a?expect(e.rup_calendar("getStartDate").getDate()).toBe(t):expect(e.rup_calendar("getStartDate").getDate()+1).toBe(a)}))}))})),describe(" > navigate today",(()=>{describe(" > año",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender",(()=>{e.off("afterRender"),e.rup_calendar("navigate","today"),a()})),e.rup_calendar("navigate","prev")})),e.rup_calendar("setView","year")})),it(" > La vista debe contener el día actual",(()=>{expect(e.rup_calendar("isToday")).toBeTruthy()}))})),describe(" > mes",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender",(()=>{e.off("afterRender"),e.rup_calendar("navigate","today"),a()})),e.rup_calendar("navigate","prev")})),e.rup_calendar("setView","month")})),it(" > La vista debe contener el día actual",(()=>{expect(e.rup_calendar("isToday")).toBeTruthy()}))})),describe(" > semana",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender",(()=>{e.off("afterRender"),e.rup_calendar("navigate","today"),a()})),e.rup_calendar("navigate","prev")})),e.rup_calendar("setView","week")})),it(" > La vista debe contener el día actual",(()=>{expect(e.rup_calendar("isToday")).toBeTruthy()}))})),describe(" > día",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender",(()=>{e.off("afterRender"),e.rup_calendar("navigate","today"),a()})),e.rup_calendar("navigate","prev")})),e.rup_calendar("setView","day")})),it(" > La vista debe contener el día actual",(()=>{expect(e.rup_calendar("isToday")).toBeTruthy()}))}))})),describe(" > navigate next",(()=>{describe(" > año",(()=>{var a;beforeEach((t=>{a=e.rup_calendar("getYear"),e.on("afterRender",(()=>{e.off("afterRender"),e.rup_calendar("navigate","next"),t()})),e.rup_calendar("setView","year")})),it(" > La vista debe mostrar el año siguiente",(()=>{expect(e.rup_calendar("getYear")-1).toBe(a)}))})),describe(" > mes",(()=>{var a;beforeEach((t=>{a=e.rup_calendar("getMonth"),e.on("afterRender",(()=>{e.off("afterRender"),e.rup_calendar("navigate","next"),t()})),e.rup_calendar("setView","month")})),it(" > La vista debe mostrar el año siguiente",(()=>{12===monthMap[a]?expect(monthMap[e.rup_calendar("getMonth")]).toBe(1):expect(monthMap[e.rup_calendar("getMonth")]-1).toBe(monthMap[a])}))})),describe(" > semana",(()=>{var a;beforeEach((t=>{e.on("afterRender",(()=>{e.off("afterRender"),a=e.rup_calendar("getWeek"),e.rup_calendar("navigate","next"),t()})),e.rup_calendar("setView","week")})),it(" > Debe mostrarse la semana siguiente",(()=>{let t=calendarUtils.countWeeks(e,e.rup_calendar("getYear"));a===t?expect(e.rup_calendar("getWeek")).toBe(1):expect(e.rup_calendar("getWeek")-1).toBe(a)}))})),describe(" > día",(()=>{var a,t,r;beforeEach((n=>{e.on("afterRender",(()=>{e.off("afterRender"),r=e.rup_calendar("getYear"),t=e.rup_calendar("getMonth"),a=e.rup_calendar("getStartDate").getDate(),e.rup_calendar("navigate","next"),n()})),e.rup_calendar("setView","day")})),it(" > Debe mostrar la vista del siguiente día",(()=>{var n;n=(t=monthMap[t])%2==0?2===t?calendarUtils.leapYear(r)?29:28:30:31,a===n?expect(e.rup_calendar("getStartDate").getDate()).toBe(1):expect(e.rup_calendar("getStartDate").getDate()-1).toBe(a)}))}))}))}))})),describe(" > Métodos setView y getView",(()=>{describe(" > setView y getView por defecto",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.rup_calendar("setView"),a()})),e.rup_calendar("setView","week")})),it(" > Debe establecer la vista por defecto (month)",(()=>{expect(e.rup_calendar("getView")).toBe("month")}))})),describe(" > setView y getView erróneo",(()=>{it(" > Debe lanzar un error si recibe parámetros incorrectos",(()=>{expect((()=>{e.rup_calendar("setView","randomData")})).toThrowError("Parámetro inválido")}))})),describe(" > setView y getView año",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.rup_calendar("setView","year"),a()})),e.rup_calendar("setView","week")})),it(" > Debe establecer la vista anual",(()=>{expect(e.rup_calendar("getView")).toBe("year")}))})),describe(" > setView y getView mes",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.rup_calendar("setView","month"),a()})),e.rup_calendar("setView","week")})),it(" > Debe establecer la vista mensual",(()=>{expect(e.rup_calendar("getView")).toBe("month")}))})),describe(" > setView y getView semana",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.rup_calendar("setView","week"),a()})),e.rup_calendar("setView","year")})),it(" > Debe establecer la vista semanal",(()=>{expect(e.rup_calendar("getView")).toBe("week")}))})),describe(" > setView y getView día",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.rup_calendar("setView","day"),a()})),e.rup_calendar("setView","week")})),it(" > Debe establecer la vista diaria",(()=>{expect(e.rup_calendar("getView")).toBe("day")}))}))})),describe(" > Método isToday",(()=>{describe(" > Funciona cuando es true",(()=>{it(" > Segun se genera debería ser visible el today",(()=>{expect(e.rup_calendar("isToday")).toBeTruthy()}))})),describe(" > Funciona cuando es false",(()=>{beforeEach((a=>{e.rup_calendar("navigate","next"),a()})),it(" > Si nos movemos fuera del rango debe dar false",(()=>{expect(e.rup_calendar("isToday")).toBeFalsy()}))}))})),describe(" > Método getTitle",(()=>{beforeEach((a=>{e.on("afterViewLoad",(()=>{a()})),e.rup_calendar("navigate",new Date(2018,5,2,0,0,0))})),it(" > El titulo devuelto debe ser igual al del DOM",(()=>{expect(e.rup_calendar("getTitle")).toBe($(".page-header > h3").text())}))})),describe(" > Método getYear",(()=>{beforeEach((a=>{e.rup_calendar("navigate",new Date(2e3,1,20,0,0,0)),a()})),it(" > Debe devolver el año correctamente",(()=>{expect(e.rup_calendar("getYear")).toBe(2e3)}))})),describe(" > Método getMonth",(()=>{beforeEach((a=>{e.rup_calendar("navigate",new Date(2e3,1,20,0,0,0)),a()})),it(" > Debe devolver el mes correctamente",(()=>{expect(e.rup_calendar("getMonth")).toBe("Febrero")}))})),describe(" > Método getDay",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),e.rup_calendar("navigate",new Date(2e3,1,20,0,0,0)),a()})),e.rup_calendar("setView","day")})),it(" > Debe devolver el día correctamente",(()=>{expect(e.rup_calendar("getDay")).toBe("Domingo")}))})),describe(" > Método getStartDate",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.rup_calendar("navigate",new Date(2018,0,20,0,0,0)),a()})),e.rup_calendar("setView","year")})),it(" > Debe devolver la startDate apropiada",(()=>{expect(e.rup_calendar("getStartDate").toLocaleDateString()).toBe(new Date(2018,0,1,0,0,0).toLocaleDateString())}))})),describe(" > Método getEndDate",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.rup_calendar("navigate",new Date(2018,0,20,0,0,0)),a()})),e.rup_calendar("setView","year")})),it(" > Debe devolver la endDate apropiada",(()=>{expect(e.rup_calendar("getEndDate").toLocaleDateString()).toBe(new Date(2019,0,1,0,0,0).toLocaleDateString())}))})),describe(" > Método getEventsBetween",(()=>{it(" > Debe devolver los eventos entre las fechas especificadas",(()=>{expect(e.rup_calendar("getEventsBetween",new Date(1541890799999),new Date(1541890800001))).toEqual([{id:"48605",title:"<span><strong>AUTORIZACIÓN DE VERTIDO DE AGUAS RESIDUALES PROCEDENTES DE ESTACIÓN DE SERVICIO Nº 7338 EN ARKAUTE, T.M .DE VITORIA-GASTEIZ</strong><ul class='ps-3'><li>Nºexp.:&nbsp;VDP-A-2012-0382</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li><li>Requiere muestra&nbsp;</li><li><i class='mdi mdi-check pe-1' aria-hidden='true'></i>COMPLETADA</li></ul></span>",start:"1541890800000",class:" vertido muestreo completada",end:"1541890800001",url:"javascript:actions(48605)"},{id:"49203",title:"<span><strong>AUTORIZACION DE VERTIDO DE AGUAS RESIDUALES EN ESTACION DE SERVICIO (FECALES, HIDROCARBUROS Y LAVADO DE VEHICULOS EN OTXANDIO</strong><ul class='ps-3'><li>Nºexp.:&nbsp;VDP-A-2012-0164</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li></ul></span>",start:"1541890800000",class:" vertido vigilancia",end:"1541890800001",url:"javascript:actions(49203)"}])}))})),describe(" > Método option",(()=>{beforeEach((a=>{e.on("afterRender"),e.rup_calendar("option","weekbox",!0),a()})),it(" > El cambio en la option debe afectar a la funcionalidad del componente",(()=>{$(".cal-row-fluid").mouseover(),expect($("#cal-week-box").is(":visible")).toBeTruthy()})),it(" > Se debe poder recuperar el valor",(()=>{expect(e.rup_calendar("option","weekbox")).toBeTruthy()}))})),describe(" > Método refresh",(()=>{beforeEach((a=>{EVENTS.push({id:"48506",title:"<span><strong>AUTORIZACIÓN DE VERTIDO DE AGUAS RESIDUALES PROCEDENTES DE ESTACIÓN DE SERVICIO Nº 7338 EN ARKAUTE, T.M .DE VITORIA-GASTEIZ</strong><ul class='ps-3'><li>Nºexp.:&nbsp;VDP-A-2012-0382</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li><li>Requiere muestra&nbsp;</li><li><i class='mdi mdi-check pe-1' aria-hidden='true'></i>COMPLETADA</li></ul></span>",start:"1541890800000",class:" vertido muestreo completada",end:"1541890800000",url:"javascript:actions(48506)"}),e.on("afterRefresh"),e.rup_calendar("refresh"),a()})),afterEach((()=>{EVENTS=EVENTS.filter((e=>"48506"!=e.id))})),it(" > Debe haber actualizado los events",(()=>{var a=e.rup_calendar("getEventsBetween",new Date(1541890799999),new Date(1541890800001));expect(a.length).toBe(3)}))})),describe(" > Método destroy",(()=>{beforeEach((a=>{e.on("afterDestroy"),e.rup_calendar("destroy"),a()})),it(" > Debe eliminar la estructura del calendario.",(()=>{expect(e.children().length).toBe(0)})),it(" > Debe dar error al intentar ejecutar los métodos",(()=>{expect((()=>{e.rup_calendar("getTitle")})).toThrowError()}))})),describe(" > Método showCell",(()=>{beforeEach((a=>{e.on("afterViewLoad",(()=>{e.on("afterShowCell",(()=>{a()})),e.rup_calendar("showCell",new Date(15436188e5))})),e.rup_calendar("navigate",new Date(15436188e5))})),it(" > Deben mostrarse los eventos de la celda seleccionada",(()=>{expect($("#cal-slide-box").css("display")).toBe("block")}))})),describe(" > Método hideCell",(()=>{beforeEach((a=>{e.on("afterViewLoad",(()=>{e.on("afterShowCell",(()=>{e.on("afterHideCell"),e.rup_calendar("hideCells"),a()})),e.rup_calendar("showCell",new Date(15436188e5))})),e.rup_calendar("navigate",new Date(15436188e5))})),it(" > Deben ocultarse los eventos desplegados",(()=>{expect($("#cal-slide-box").css("display")).toBe("none")}))}))}))})),describe("Test rup_calendar (alternative)",(()=>{var e;beforeAll((e=>{testutils.loadCss(e)})),beforeEach((a=>{createCalendar(opts2,(()=>{e=$("#calendar"),a()}))})),afterEach((()=>{void 0!==e.data("cal")&&e.rup_calendar("destroy"),$("#content").html(""),$("#content").nextAll().remove()})),describe(" > Métodos públicos",(()=>{describe(" > Método navigate",(()=>{describe(" > navigate por defecto",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),e.rup_calendar("navigate"),a()})),e.rup_calendar("navigate","prev")})),it(" > el view debe estar establecido a una vista actual",(()=>{expect(e.rup_calendar("isToday")).toBeTruthy()}))})),describe(" > navigate erróneo",(()=>{it(" > El método debe dar error",(()=>{expect((()=>{e.rup_calendar("navigate","randomData")})).toThrowError("Parámetro inválido")}))})),describe(" > navigate prev/today/next",(()=>{describe(" > navigate prev",(()=>{describe(" > año",(()=>{var a;beforeEach((t=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),a=e.rup_calendar("getYear"),e.rup_calendar("navigate","prev"),t()})),e.rup_calendar("navigate",new Date(2020,0,1,0,0,0))})),e.rup_calendar("setView","year")})),it(" > Debe haber retrocedido un año",(()=>{expect(e.rup_calendar("getYear")+1).toBe(a)}))})),describe(" > mes",(()=>{var a;beforeEach((t=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),a=e.rup_calendar("getMonth"),e.rup_calendar("navigate","prev"),t()})),e.rup_calendar("setView","month")})),it(" > Debe haber retrocedido un mes",(()=>{if(1===a)expect(monthMap[e.rup_calendar("getMonth")]).toBe(12);else{let t=monthMap[e.rup_calendar("getMonth")]+1;t>12&&(t-=12),expect(t).toBe(monthMap[a])}}))})),describe(" > semana",(()=>{var a;beforeEach((t=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),a=e.rup_calendar("getWeek"),e.rup_calendar("navigate","prev"),t()})),e.rup_calendar("setView","week")})),it(" > Debe haber retrocedido una semana",(()=>{if(1===a)expect(e.rup_calendar("getWeek")).toBe(calendarUtils.countWeeks(e,e.rup_calendar("getYear")-1));else{let t=e.rup_calendar("getWeek")+1;t>52&&(t-=52),expect(t).toBe(a)}}))})),describe(" > día",(()=>{var a;beforeEach((t=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),a=e.rup_calendar("getStartDate").getDate(),e.rup_calendar("navigate","prev"),t()})),e.rup_calendar("setView","day")})),it(" > Debe haber retrocedido un día",(()=>{if(1===a){let a=monthMap[e.rup_calendar("getMonth")];a%2==0?2===a?calendarUtils.leapYear(e.rup_calendar("getYear")-1)?expect(e.rup_calendar("getStartDate").getDate()).toBe(29):expect(e.rup_calendar("getStartDate").getDate()).toBe(28):expect(e.rup_calendar("getStartDate").getDate()).toBe(30):expect(e.rup_calendar("getStartDate").getDate()).toBe(31)}else expect(e.rup_calendar("getStartDate").getDate()+1).toBe(a)}))}))})),describe(" > navigate today",(()=>{describe(" > año",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),e.rup_calendar("navigate","today"),a()})),e.rup_calendar("navigate","prev")})),e.rup_calendar("setView","year")})),it(" > La vista debe contener el día actual",(()=>{expect(e.rup_calendar("isToday")).toBeTruthy()}))})),describe(" > mes",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),e.rup_calendar("navigate","today"),a()})),e.rup_calendar("navigate","prev")})),e.rup_calendar("setView","month")})),it(" > La vista debe contener el día actual",(()=>{expect(e.rup_calendar("isToday")).toBeTruthy()}))})),describe(" > semana",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),e.rup_calendar("navigate","today"),a()})),e.rup_calendar("navigate","prev")})),e.rup_calendar("setView","week")})),it(" > La vista debe contener el día actual",(()=>{expect(e.rup_calendar("isToday")).toBeTruthy()}))})),describe(" > día",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),e.rup_calendar("navigate","today"),a()})),e.rup_calendar("navigate","prev")})),e.rup_calendar("setView","day")})),it(" > La vista debe contener el día actual",(()=>{expect(e.rup_calendar("isToday")).toBeTruthy()}))}))})),describe(" > navigate next",(()=>{describe(" > año",(()=>{var a;beforeEach((t=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),a=e.rup_calendar("getYear"),e.rup_calendar("navigate","next"),t()})),e.rup_calendar("navigate",new Date(2019,0,2,0,0,0))})),e.rup_calendar("setView","year")})),it(" > La vista debe mostrar el año siguiente",(()=>{expect(e.rup_calendar("getYear")-1).toBe(a)}))})),describe(" > mes",(()=>{var a;beforeEach((t=>{a=e.rup_calendar("getMonth"),e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),e.rup_calendar("navigate","next"),t()})),e.rup_calendar("setView","month")})),it(" > La vista debe mostrar el año siguiente",(()=>{12===monthMap[a]?expect(monthMap[e.rup_calendar("getMonth")]).toBe(1):expect(monthMap[e.rup_calendar("getMonth")]-1).toBe(monthMap[a])}))})),describe(" > semana",(()=>{var a;beforeEach((t=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),a=e.rup_calendar("getWeek"),e.rup_calendar("navigate","next"),t()})),e.rup_calendar("setView","week")})),it(" > Debe mostrarse la semana siguiente",(()=>{let t=calendarUtils.countWeeks(e,e.rup_calendar("getYear"));a===t?expect(e.rup_calendar("getWeek")).toBe(1):expect(e.rup_calendar("getWeek")-1).toBe(a)}))})),describe(" > día",(()=>{var a,t,r;beforeEach((n=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),r=e.rup_calendar("getYear"),t=e.rup_calendar("getMonth"),a=e.rup_calendar("getStartDate").getDate(),e.rup_calendar("navigate","next"),n()})),e.rup_calendar("setView","day")})),it(" > Debe mostrar la vista del siguiente día",(()=>{var n;n=(t=monthMap[t])%2==0?2===t?calendarUtils.leapYear(r)?29:28:30:31,a===n?expect(e.rup_calendar("getStartDate").getDate()).toBe(1):expect(e.rup_calendar("getStartDate").getDate()-1).toBe(a)}))}))}))}))})),describe(" > Métodos setView y getView",(()=>{describe(" > setView y getView por defecto",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),e.rup_calendar("setView"),a()})),e.rup_calendar("setView","week")})),it(" > Debe establecer la vista por defecto (month)",(()=>{expect(e.rup_calendar("getView")).toBe("month")}))})),describe(" > setView y getView erróneo",(()=>{it(" > Debe lanzar un error si recibe parámetros incorrectos",(()=>{expect((()=>{e.rup_calendar("setView","randomData")})).toThrowError("Parámetro inválido")}))})),describe(" > setView y getView año",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),e.rup_calendar("setView","year"),a()})),e.rup_calendar("setView","week")})),it(" > Debe establecer la vista anual",(()=>{expect(e.rup_calendar("getView")).toBe("year")}))})),describe(" > setView y getView mes",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),e.rup_calendar("setView","month"),a()})),e.rup_calendar("setView","week")})),it(" > Debe establecer la vista mensual",(()=>{expect(e.rup_calendar("getView")).toBe("month")}))})),describe(" > setView y getView semana",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),e.rup_calendar("setView","week"),a()})),e.rup_calendar("setView","year")})),it(" > Debe establecer la vista semanal",(()=>{expect(e.rup_calendar("getView")).toBe("week")}))})),describe(" > setView y getView día",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),e.rup_calendar("setView","day"),a()})),e.rup_calendar("setView","week")})),it(" > Debe establecer la vista diaria",(()=>{expect(e.rup_calendar("getView")).toBe("day")}))}))})),describe(" > Método isToday",(()=>{describe(" > Funciona cuando es true",(()=>{beforeEach((a=>{e.on("afterRender"),e.rup_calendar("navigate",new Date(2019,0,3,0,0,0)),a()})),it(" > Según se genera no debería ser visible el today",(()=>{expect(e.rup_calendar("isToday")).toBeFalsy()}))})),describe(" > Funciona cuando es false",(()=>{beforeEach((a=>{e.on("afterChangeView"),e.rup_calendar("navigate","next"),a()})),it(" > Si nos movemos fuera del rango debe dar false",(()=>{expect(e.rup_calendar("isToday")).toBeFalsy()}))}))})),describe(" > Método getTitle",(()=>{beforeEach((a=>{e.on("afterViewLoad",(()=>{a()})),e.rup_calendar("navigate","next")})),it(" > El titulo devuelto debe ser igual al del DOM",(()=>{expect(e.rup_calendar("getTitle")).toBe($(".page-header > h3").text())}))})),describe(" > Método getYear",(()=>{beforeEach((a=>{e.on("afterRender"),e.rup_calendar("navigate",new Date(2019,1,20,0,0,0)),a()})),it(" > Debe devolver el año correctamente",(()=>{expect(e.rup_calendar("getYear")).toBe(2019)}))})),describe(" > Método getMonth",(()=>{beforeEach((a=>{e.on("afterRender"),e.rup_calendar("navigate",new Date(2019,1,20,0,0,0)),a()})),it(" > Debe devolver el mes correctamente",(()=>{expect(e.rup_calendar("getMonth")).toBe("Febrero")}))})),describe(" > Método getDay",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),e.rup_calendar("navigate",new Date(2019,1,19,0,0,0)),a()})),e.rup_calendar("setView","day")})),it(" > Debe devolver el día correctamente",(()=>{expect(e.rup_calendar("getDay")).toBe("Martes")}))})),describe(" > Método getStartDate",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),e.rup_calendar("navigate",new Date(2019,0,19,0,0,0)),a()})),e.rup_calendar("setView","year")})),it(" > Debe devolver la startDate apropiada",(()=>{expect(e.rup_calendar("getStartDate").toLocaleDateString()).toBe(new Date(2019,0,1,0,0,0).toLocaleDateString())}))})),describe(" > Método getEndDate",(()=>{beforeEach((a=>{e.on("afterRender",(()=>{e.off("afterRender"),e.on("afterRender"),e.rup_calendar("navigate",new Date(2019,0,20,0,0,0)),a()})),e.rup_calendar("setView","year")})),it(" > Debe devolver la endDate apropiada",(()=>{expect(e.rup_calendar("getEndDate").toLocaleDateString()).toBe(new Date(2020,0,1,0,0,0).toLocaleDateString())}))})),describe(" > Método getEventsBetween",(()=>{it(" > Debe devolver los eventos entre las fechas especificadas",(()=>{expect(e.rup_calendar("getEventsBetween",new Date(2019,5,1,0,0,0),new Date(2019,5,7,0,0,0))).toEqual([{id:"48605",title:"<span><strong>AUTORIZACIÓN DE VERTIDO DE AGUAS RESIDUALES PROCEDENTES DE ESTACIÓN DE SERVICIO Nº 7338 EN ARKAUTE, T.M .DE VITORIA-GASTEIZ</strong><ul class='ps-3'><li>Nºexp.:&nbsp;VDP-A-2012-0382</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li><li>Requiere muestra&nbsp;</li><li><i class='mdi mdi-check pe-1' aria-hidden='true'></i>COMPLETADA</li></ul></span>",start:"1559433600000",class:" vertido muestreo completada",end:"1559520000000",url:"javascript:actions(48605)"},{id:"47278",title:"<span><strong>REVISION DE LA AUTORIZACION DE VERTIDO DE AGUAS RESIDUALES DE LA LOCALIDAD DE ILARRATZA (2 P. VERTIDO), T.M. DE VITORIA-GASTEIZ. (REV. 2009-S-0372)</strong><ul class='ps-3'><li>Nºexp.:&nbsp;RAV-A-2014-0058</li><li>P.vertido:&nbsp;PV1</li><li>Id.flujo:&nbsp;F1</li></ul></span>",start:"1559692800000",class:" vertido vigilancia",end:"1559779200000",url:"javascript:actions(47278)"}])}))})),describe(" > Método option",(()=>{beforeEach((a=>{e.on("afterRender"),e.rup_calendar("option","weekbox",!0),a()})),it(" > El cambio en la option debe afectar a la funcionalidad del componente",(()=>{$(".cal-row-fluid").mouseover(),expect($("#cal-week-box").is(":visible")).toBeTruthy()})),it(" > Se debe poder recuperar el valor",(()=>{expect(e.rup_calendar("option","weekbox")).toBeTruthy()}))})),describe(" > Método refresh",(()=>{beforeEach((a=>{$.post("/demo/calendar/events/add").done((()=>{e.on("afterRefresh"),e.rup_calendar("refresh"),a()})),e.rup_calendar("navigate",new Date(2019,5,2,0,0,0))})),afterEach((e=>{$.post("/demo/calendar/events/restore").done((()=>{e()}))})),it(" > Debe haber actualizado los events",(()=>{var a=e.rup_calendar("getEventsBetween",new Date(2019,5,1,0,0,0),new Date(2019,5,10,0,0,0));expect(a.length).toBe(3)}))})),describe(" > Método destroy",(()=>{beforeEach((a=>{e.on("afterDestroy"),e.rup_calendar("destroy"),a()})),it(" > Debe eliminar la estructura del calendario.",(()=>{expect(e.children().length).toBe(0)})),it(" > Debe dar error al intentar ejecutar los métodos",(()=>{expect((()=>{e.rup_calendar("getTitle")})).toThrowError()}))})),describe(" > Método showCell",(()=>{beforeEach((a=>{e.on("afterViewLoad",(()=>{e.on("afterShowCell",(()=>{a()})),e.rup_calendar("showCell",new Date(2019,5,2,0,0,0))})),e.rup_calendar("navigate",new Date(2019,5,2,0,0,0))})),it(" > Deben mostrarse los eventos de la celda seleccionada",(()=>{expect($("#cal-slide-box").css("display")).toBe("block")}))})),describe(" > Método hideCell",(()=>{beforeEach((a=>{e.on("afterViewLoad",(()=>{e.on("afterShowCell",(()=>{e.on("afterHideCell"),e.rup_calendar("hideCells"),a()})),e.rup_calendar("showCell",new Date(2019,5,2,0,0,0))})),e.rup_calendar("navigate",new Date(2019,5,2,0,0,0))})),it(" > Deben ocultarse los eventos desplegados",(()=>{expect($("#cal-slide-box").css("display")).toBe("none")}))}))})),describe(" > Funcionalidad de las opciones",(()=>{describe(" > Weekbox",(()=>{beforeEach((a=>{let t=$($(".cal-before-eventlist")[0]);e.on("afterShowWeekBox"),t.mouseover(),a()})),it(" > Debe mostrar un div con la semana correcta",(()=>{let a=e.rup_calendar("getWeek");expect($("#cal-week-box").text()).toBe("Semana "+a.toString())}))})),describe(" > Cell navigation",(()=>{describe(" > Haciendo click en el span con el número del día",(()=>{beforeEach((e=>{$($(".cal-day-inmonth span")[0]).click(),setTimeout((()=>{e()}),400)})),it(" > Debe mantenerse en la misma vista",(()=>{expect(e.rup_calendar("getView")).toBe("month")}))})),describe(" > Haciendo doble click en la celda de día",(()=>{beforeEach((e=>{$($(".cal-day-inmonth")[0]).dblclick(),setTimeout((()=>{e()}),400)})),it(" > Debe mantenerse en la misma vista",(()=>{expect(e.rup_calendar("getView")).toBe("month")}))}))})),describe(" > Classes",(()=>{beforeEach((()=>{e.rup_calendar("setView","week"),e.rup_calendar("navigate",new Date(2019,5,1,0,0,0))})),it(" > Debe tener la clase especificada",(()=>{expect($('span[data-cal-date="2019-06-01"]').parent().parent().is(".randomClass")).toBeTruthy()}))}))}))}));var opts1={tmpl_path:testutils.DIST+"/html/templates/rup_calendar/",events_source:function(){return EVENTS},rupAfterEventsLoad:function(e){if(e){var a=$("#eventlist");a.html(""),$.each(e,(function(e,t){$(document.createElement("li")).html('<div href="'+t.url+'">'+t.title+"</div>").appendTo(a)}))}},rupAfterViewLoad:function(e){$(".page-header h3").text(this.getTitle()),$(".btn-group button").removeClass("active"),$('button[data-calendar-view="'+e+'"]').addClass("active")}},opts2={tmpl_path:testutils.DIST+"/html/templates/rup_calendar/",events_source:"/demo/calendar/events",weekbox:!0,cell_navigation:!1,day:(()=>{var e=new Date,a=e=>e<10?"0"+e:e;return e.getFullYear()+"-"+a(e.getMonth()+1)+"-"+a(e.getDate())})(),position:{start:new Date((new Date).getFullYear(),0,1,0,0,0),end:new Date((new Date).getFullYear()+1,0,1,0,0,0)},classes:{week:{saturday:"randomClass"}},date_range_start:new Date(2019,0,1,0,0,0),date_range_end:new Date(2030,1,1,0,0,0),rupAfterEventsLoad:function(e){if(e){var a=$("#eventlist");a.html(""),$.each(e,(function(e,t){$(document.createElement("li")).html('<div href="'+t.url+'">'+t.title+"</div>").appendTo(a)}))}},rupAfterViewLoad:function(e){$(".page-header h3").text(this.getTitle()),$(".btn-group button").removeClass("active"),$('button[data-calendar-view="'+e+'"]').addClass("active")}};function createCalendar(e,a){$("#content").append('\n    <div class="row"></br>\n        <div class="col-xl-12 mb-3">\n            <h3>Ejemplo</h3>\n            <hr>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xl-12">\n            <div class="page-header w-100 mb-3">\n                <div class="pull-right d-flex flex-row align-items-center flex-wrap">\n                    <div class="btn-group mb-3">\n                        <span class="btn btn-primary" data-calendar-nav="prev">\n                            <i class="mdi mdi-chevron-left-circle" aria-hidden="true"></i>&nbsp;Prev.\n                        </span>\n                        <span class="btn light" data-calendar-nav="today">Hoy</span>\n                        <span class="btn btn-primary" data-calendar-nav="next">\n                            Sig.&nbsp;<i class="mdi mdi-chevron-right-circle" aria-hidden="true"></i>\n                        </span>\n                    </div>\n                    <div class="ps-3 d-xs-none"></div>\n                    <div class="btn-group mb-3">\n                        <span class="btn btn-light" data-calendar-view="year">Año</span>\n                        <span class="btn btn-light active" data-calendar-view="month">Mes</span>\n                        <span class="btn btn-light" data-calendar-view="week">Semana</span>\n                        <span class="btn btn-light" data-calendar-view="day">Día</span>\n                    </div>\n                </div>\n                <h3></h3>\n            </div>\n        </div>\n    </div>\n    <div class="row mb-3">\n        <div class="col-xl-12">\n            <div id="calendar" class="calendar"></div>\n        </div>\n    </div>\n    <div id="divLeyenda" class="row">\n        <div class="col-xl-5 noPadding">\n            <div id="divLegend" class="">\n                <span class="separator" style="color: #666;"> Leyenda:\n                </span>\n                <div class="row row-noPadding">\n                    <div class="col-md-1">\n                        <div class="legend bgNegro"></div>\n                    </div>\n                    <div class="col-md-11">\n                        Vigilancia de vertido\n                    </div>\n                </div>\n                <div class="row row-noPadding">\n                    <div class="col-md-1">\n                        <div class="legend bgNegroyRojo"></div>\n                    </div>\n                    <div class="col-md-11">\n                        Muestreo\n                    </div>\n                </div>\n                <div class=" row row-noPadding">\n                    <div class="col-md-1">\n                        <div class="legend bgAmarillo"></div>\n                    </div>\n                    <div class="col-md-11">\n                        Inspección de vertido\n                    </div>\n                </div>\n                <div class="row row-noPadding">\n                    <div class="col-md-1">\n                        <div class="legend bgNaranja"></div>\n                    </div>\n                    <div class="col-md-11">\n                        Inspección de obra\n                    </div>\n                </div>\n                <div class="row row-noPadding">\n                    <div class="col-md-1">\n                        <div class="legend bgAzul"></div>\n                    </div>\n                    <div class="col-md-11">\n                        Inspección de concesión\n                    </div>\n                </div>\n                <div class="row row-noPadding">\n                    <div class="col-md-1">\n                        <div class="legend bgCheck">\n                            <i class="mdi mdi-check pe-1" style="color: black" aria-hidden="true"></i>\n                        </div>\n                    </div>\n                    <div class="col-md-11">\n                        Completada\n                    </div>\n                </div>\n                <div class="row row-noPadding">\n                    <div class="col-md-1">\n                        <div class="legend bgExclamation">\n                            <i class="mdi mdi-exclamation pe-1" style="color: black; padding: 6px 7px;" aria-hidden="true"></i>\n                        </div>\n                    </div>\n                    <div class="col-md-11">\n                        La fecha fin de trámite está próxima/vencida\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <br>');var t=$("#calendar");$(".btn-group span[data-calendar-nav]").each(((e,a)=>{let r=$(a);r.click((function(){t.rup_calendar("navigate",r.data("calendar-nav"))}))})),$(".btn-group span[data-calendar-view]").each(((e,a)=>{let r=$(a);r.click((function(){t.rup_calendar("setView",r.data("calendar-view")),$(".btn-group span[data-calendar-view].active").removeClass("active"),r.addClass("active")}))})),$("#calendar").on("afterInitCalendar",(()=>{a()})),$("#calendar").rup_calendar(e)}
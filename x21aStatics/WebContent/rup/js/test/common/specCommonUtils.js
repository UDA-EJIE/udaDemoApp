import"jquery";export const DIST="/dist";export const DEMO="/demo";export function testTrace(e,o){console.info("\n\n*****************************************************\n\n"+e+"\n--------------------------------\n\n"+o+"\n\n*****************************************************\n\n")}export function loadCss(e){return $("head > style").remove(),$("head").append("<style></style>"),$.when($.ajax("/dist/css/rup.min.css")).always((o=>{$("head > style").append(o),0===$("#content").length&&($("body").append('<div id="content" class="container mt-4"></div>'),$(".jasmine_html-reporter").css("margin","0px"),$("body").css("overflow-x","hidden")),e()}))}export function isHeadlessEnvironment(){const e=window.navigator.userAgent;return e.includes("HeadlessChrome")||e.includes("Chrome Headless")||!0===window.navigator.webdriver||!window.chrome||window.chrome&&!window.chrome.runtime||void 0===window.orientation}export function expectElementCount(e,o,s=Math.ceil(o/2)){const n=isHeadlessEnvironment();console.log(`üîç User Agent: ${window.navigator.userAgent}`),console.log(`üîç Running in headless: ${n}, Element count: ${e}`),console.log(`üîç Chrome object: ${!!window.chrome}, Runtime: ${!!window.chrome?.runtime}`),n?(expect(e).toBeGreaterThanOrEqual(s),console.log(`‚úÖ Headless mode - expecting at least ${s} elements`)):(expect(e).toEqual(o),console.log(`‚úÖ Browser mode - expecting exactly ${o} elements`))}export function isDropdownVisible(e){const o=isHeadlessEnvironment();if(!e||!e.length)return console.log("‚ö†Ô∏è Dropdown element not found"),!1;console.log("üîç Dropdown visibility check:");const s=e.hasClass("dropdown-menu")||e.attr("aria-labelledby")||e.closest(".navbar").length>0,n=e.hasClass("select2-results")||e.closest(".select2-dropdown").length>0;console.log(`  - isNavbarDropdown: ${s}`),console.log(`  - isSelectDropdown: ${n}`);const l=e.hasClass("show"),t=e.hasClass("in"),i=e.css("display"),a="none"===i,r=e.css("visibility");return console.log(`  - hasShowClass: ${l}`),console.log(`  - hasInClass: ${t}`),console.log(`  - displayStyle: ${i}`),console.log(`  - isDisplayNone: ${a}`),console.log(`  - visibility: ${r}`),s?checkNavbarDropdownVisibility(e,o):n?checkSelectDropdownVisibility(e,o):checkGenericDropdownVisibility(e,o)}function checkNavbarDropdownVisibility(e,o){const s=e.attr("aria-labelledby"),n=s?$(`#${s}`):$(),l=e.hasClass("show"),t=e.hasClass("in"),i=e.hasClass("collapse"),a="true"===n.attr("aria-expanded"),r="none"===e.css("display"),c=e.hasClass("dropdown-menu")&&e.hasClass("show"),d=e.closest("li"),h=d.hasClass("show"),u=d.hasClass("open")||d.hasClass("rup-open");if(console.log(`  - navbar ariaExpanded: ${a}`),console.log(`  - navbar hasCollapseClass: ${i}`),console.log(`  - navbar hasDropdownMenuShow: ${c}`),console.log(`  - navbar parentHasShow: ${h}`),console.log(`  - navbar parentHasOpen: ${u}`),o){if(!1===a||"false"===n.attr("aria-expanded"))return console.log("  - navbar explicitly hidden (aria-expanded=false)"),!1;if(r)return console.log("  - navbar hidden (display=none)"),!1;if(i&&!l&&!t&&!c&&!h&&!u)return console.log("  - navbar hidden (collapse without show classes)"),!1;const e=a&&!r&&(l||t||c||h||u||!i);return console.log(`  - navbar headless result: ${e}`),e}return(l||t||c||h)&&!r}function checkSelectDropdownVisibility(e,o){const s=e.hasClass("show"),n=e.hasClass("in"),l=e.css("display"),t="none"===l,i="hidden"===e.css("visibility"),a=parseFloat(e.css("opacity")),r=0===a,c=e.closest(".select2-dropdown"),d=0===c.length||c.is(":visible");if(console.log(`  - select containerVisible: ${d}`),console.log(`  - select opacity: ${a}`),console.log(`  - select isTransparent: ${r}`),o){const o=!t&&!i&&!r&&d&&(s||n||"block"===l||e.is(":visible"));return console.log(`  - select headless result: ${o}`),o}return e.is(":visible")&&d&&!r}function checkGenericDropdownVisibility(e,o){const s=e.hasClass("show"),n=e.hasClass("in"),l=e.css("display"),t="none"===l,i="hidden"===e.css("visibility");if(console.log("  - generic dropdown check"),o){const o=!t&&!i&&(s||n||"block"===l||e.is(":visible"));return console.log(`  - generic headless result: ${o}`),o}return e.is(":visible")}export function waitForToggleEnd(e,o=3e3){return new Promise((s=>{if(isHeadlessEnvironment())setTimeout((()=>{console.log("‚ö†Ô∏è Headless mode - toggle operation completed"),s()}),300);else{const n=setTimeout((()=>{console.log("‚ö†Ô∏è toggleEnd timeout - resolving anyway"),s()}),o);e.one("toggleEnd",(()=>{clearTimeout(n),s()}))}}))}export function waitForCondition(e,o=5,s=100){return new Promise((n=>{let l=0;const t=()=>{const i=e();l++,console.log(`üîç Condition check attempt ${l}: ${i}`),i||l>=o?n(i):setTimeout(t,s)};t()}))}export function validateScrollBehavior(e,o,s="default"){const n=isHeadlessEnvironment();if(console.log(`üîç Scroll behavior check (${s}):`),console.log(`  - scrollBefore: ${e}`),console.log(`  - scrollAfter: ${o}`),console.log(`  - isHeadless: ${n}`),n){const n="remote firstLoad"===s?50:10,l=Math.abs(o-e);if(console.log(`  - difference: ${l}`),console.log(`  - tolerance: ${n}`),"remote firstLoad"===s){const s=o>e+n;return console.log(`  - dramaticScrollDown: ${s}`),!s}return l<=n||o<=e}return o>=e-5}export function waitForSelectOperation(e,o,s=200){return new Promise((e=>{isHeadlessEnvironment()?setTimeout((()=>{o&&o(),setTimeout(e,s)}),100):(o&&o(),setTimeout(e,50))}))}export function hasOnlySearchIndicators(e){if(!e||!e.length)return!0;const o=e.find("li[role=option]"),s=o.length;if(console.log("üîç Search indicators check:"),console.log(`  - optionsCount: ${s}`),0===s)return!0;let n=0;return o.each((function(){const e=$(this),o=e.text().trim(),s=/^(Searching|Buscando|Recherche|Suchen)‚Ä¶/.test(o),l=e.hasClass("loading-results")||e.hasClass("select2-results__message")||e.hasClass("select2-results__option--loading-results");console.log(`    - Option: "${o.substring(0,50)}..." | isSearching: ${s} | isLoading: ${l}`),s||l||""===o||n++})),console.log(`  - realOptionsCount: ${n}`),0===n}
(function(){FuncUnit._incallback=false;var b=0,c=false;FuncUnit.timeout=10000;FuncUnit._queue=[];FuncUnit._needSyncQuery=function(){if(FuncUnit._queue.length===1){if(FuncUnit._queue[0].type==="query"){FuncUnit._queue=[];return true}}if(FuncUnit._queue.length===0){return true}return false};FuncUnit._lastQueuedItem=function(){if(!FuncUnit._queue.length){return null}return FuncUnit._queue[FuncUnit._queue.length-1]};FuncUnit._haveAsyncQueries=function(){for(var d=0;d<FuncUnit._queue.length;d++){if(FuncUnit._queue[d].type==="action"||FuncUnit._queue[d].type==="wait"){return true}}return false};FuncUnit.add=function(d){if(FuncUnit._incallback){FuncUnit._queue.splice(b,0,d);b++}else{FuncUnit._queue.push(d)}if(FuncUnit._queue.length==1&&!FuncUnit._incallback){stop();setTimeout(FuncUnit._done,13)}};var a;FuncUnit._done=function(f,d){var e,h,g=0;if(FuncUnit.speed=="slow"){g=500}if(FuncUnit._queue.length>0){e=FuncUnit._queue.shift();b=0;setTimeout(function(){h=setTimeout(function(){e.stop&&e.stop();ok(false,e.error);FuncUnit._done()},(e.timeout||FuncUnit.timeout)+g);if(f&&f.jquery){a=f}if(a){e.bind=a}e.selector=d;e.method(function(i){if(i&&i.jquery){e.bind=i}clearTimeout(h);FuncUnit._incallback=true;if(e.success){e.success.apply(e.bind,arguments)}FuncUnit._incallback=false;FuncUnit._done(e.bind,e.selector)},function(i){clearTimeout(h);ok(false,i);FuncUnit._done()})},g)}else{start()}}})();
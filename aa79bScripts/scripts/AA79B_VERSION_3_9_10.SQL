DEFINE DIR_SCRIPTS = '/aplic/aa79b/scripts';

CREATE TABLE AA79BB3T00 (
                ID_NOTA_0B3 NUMBER(20),
            	ANYO_0B2 NUMBER(4),
            	NUM_EXP_0B2 NUMBER(6),
            	DNI_USUARIO_0B2 VARCHAR2(10),
            	FECHA_0B2 DATE,
            	OBSV_0B2 VARCHAR2(4000) 
)TABLESPACE  AA7901E00;

ALTER TABLE AA79BB3T00 ADD CONSTRAINT PK_AA79BB3T00 PRIMARY KEY (ID_NOTA_0B3);
ALTER INDEX PK_AA79BB3T00 REBUILD TABLESPACE AA7902E00;

COMMENT ON TABLE AA79BB3T00 IS 'Notas del expediente';
COMMENT ON COLUMN AA79BB3T00.ID_NOTA_0B3 IS 'Código de la nota';
COMMENT ON COLUMN AA79BB3T00.ANYO_0B2 IS 'Anyo del expediente.';
COMMENT ON COLUMN AA79BB3T00.NUM_EXP_0B2 IS 'Número del expediente';
COMMENT ON COLUMN AA79BB3T00.DNI_USUARIO_0B2 IS 'Dni del usuario registrado';
COMMENT ON COLUMN AA79BB3T00.FECHA_0B2 IS 'Fecha en la que se ha introducido la nota';
COMMENT ON COLUMN AA79BB3T00.OBSV_0B2 IS 'Observaciones';

-- AA79BB3T00
CREATE SEQUENCE AA79B.AA79BB3Q00 MINVALUE 1 MAXVALUE 9999999999 INCREMENT BY 1 START WITH 1 NOCACHE ORDER;

-- ACTUALIZAMOS LA TABLA  AA79B15T00 
UPDATE AA79B15T00 SET DESC_ES_015 = 'Revisión y entrega a cliente',DESC_EU_015 = 'Berrikusketa eta bezeroari entregatzea'
WHERE ID_015 = 19;

-- INSERTAMOS NUEVO CAMPO A LA TABLA  AA79B15T00 
INSERT INTO AA79B15T00 (ID_015,DESC_ES_015,DESC_EU_015,IND_GESTION_ASOC_015,IND_FACTURABLE_015,IND_REQ_CIERRE_015,IND_AUTOMATICA_015,IND_TRADUCCION_015,IND_REVISION_015,IND_INTERPRETACION_015,IND_HORAS_EJECUCION_015,ESTADO_015)
values ('22','Traducción y entrega a cliente','Itzulpena eta bezeroari entregatzea','S','N','S','N','S','N','N','N','A');

-- INSERCIÓN DE DOS PROPIEDADES NUEVAS
INSERT INTO AA79B00T00 (ID_000, VALOR_000) VALUES (4, '349');
INSERT INTO AA79B00T00 (ID_000, VALOR_000) VALUES (5, '366');

--CAMPO NUEVO EN LA TABLA AA79B29T00
ALTER TABLE AA79B29T00 ADD IND_TRAMITACION_RAPIDA_029 VARCHAR2(1) DEFAULT 'N' NOT NULL;

-- CREAR TABLA AA79BB2T00
CREATE TABLE AA79BB2T00 (
                ID_PROCESO_EMAIL_0B2 NUMBER(20),
		NUM_EMAIL_0B2 NUMBER(2),
		ID_TIPO_AVISO_0B2 NUMBER(2),
		ANYO_0B2 NUMBER(4),
		NUM_EXP_0B2 NUMBER(6),
		TITULO_EXP_0B2 VARCHAR2(150),
		ID_TAREA_0B2 NUMBER(20),
		ID_TIPO_TAREA_0B2 NUMBER(2,0),
		DESC_TAREA_ES_0B2 VARCHAR2(150), 
		DESC_TAREA_EU_0B2 VARCHAR2(150),
		DNI_DESTINATARIO_0B2 VARCHAR2(10),  
		EMAIL_DESTINATARIO_0B2 VARCHAR2(256)
)TABLESPACE  AA7901E00;

ALTER TABLE AA79BB2T00 ADD CONSTRAINT PK_AA79BB2T00 PRIMARY KEY (ID_PROCESO_EMAIL_0B2, NUM_EMAIL_0B2);
ALTER INDEX PK_AA79BB2T00 REBUILD TABLESPACE AA7902E00;

COMMENT ON TABLE AA79BB2T00 IS 'Proceso de correos electrónicos';
COMMENT ON COLUMN AA79BB2T00.ID_PROCESO_EMAIL_0B2 IS 'Código de proceso';
COMMENT ON COLUMN AA79BB2T00.NUM_EMAIL_0B2 IS 'Número de e-mail';
COMMENT ON COLUMN AA79BB2T00.ID_TIPO_AVISO_0B2 IS 'Id del tipo de aviso';
COMMENT ON COLUMN AA79BB2T00.ANYO_0B2 IS 'Año del expediente.';
COMMENT ON COLUMN AA79BB2T00.NUM_EXP_0B2 IS 'Número del expediente';
COMMENT ON COLUMN AA79BB2T00.TITULO_EXP_0B2 IS 'Título del expediente';
COMMENT ON COLUMN AA79BB2T00.ID_TAREA_0B2 IS 'Id de la tarea';
COMMENT ON COLUMN AA79BB2T00.ID_TIPO_TAREA_0B2 IS 'Id del tipo de la tarea';
COMMENT ON COLUMN AA79BB2T00.DESC_TAREA_ES_0B2 IS 'Descripción del tipo de la tarea en castellano';
COMMENT ON COLUMN AA79BB2T00.DESC_TAREA_EU_0B2 IS 'Descripción del tipo de la tarea en euskera';
COMMENT ON COLUMN AA79BB2T00.DNI_DESTINATARIO_0B2 IS 'Dni del destinatario';
COMMENT ON COLUMN AA79BB2T00.EMAIL_DESTINATARIO_0B2 IS 'Correo electrónico del destinatario';

-- AA79BB2T00
CREATE SEQUENCE AA79B.AA79BB2Q00 MINVALUE 1 MAXVALUE 9999999999 INCREMENT BY 1 START WITH 1 NOCACHE ORDER;

@@&DIR_SCRIPTS/Functions/CREAR_TAREAS_EXPEDIENTE.SQL;
@@&DIR_SCRIPTS/Functions/ESTADO_TAREAS_DEPENDIENTES.SQL;
@@&DIR_SCRIPTS/Functions/COMPROBAR_ORDEN_TAREAS.SQL;
@@&DIR_SCRIPTS/Functions/COMPROBAR_REAPERTURA_TAREA.SQL;
@@&DIR_SCRIPTS/Functions/COMPROBAR_TIPO_TAREA.SQL;
@@&DIR_SCRIPTS/Functions/ESTADO_TAREAS_ASIGNADAS.SQL;
@@&DIR_SCRIPTS/Procedures/CREAR_TAREAS_RELACIONADAS.SQL;
@@&DIR_SCRIPTS/Functions/TIENE_TAREAS_ENTREGA.SQL;
@@&DIR_SCRIPTS/Functions/OBTENER_RESPONSABLE_TRABAJO.SQL;



exit;

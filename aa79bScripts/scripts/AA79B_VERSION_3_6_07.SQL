DEFINE DIR_SCRIPTS = '/aplic/aa79b/scripts';

DROP PROCEDURE CREAR_TAREAS_RELACIONADAS;

@@&DIR_SCRIPTS/Tipos/DROP_TIPOS.SQL;
@@&DIR_SCRIPTS/Tipos/STRUCT_ESTUDIO.SQL;
@@&DIR_SCRIPTS/Tipos/ESTUDIO_TABLE.SQL;
@@&DIR_SCRIPTS/Tipos/STRUCT_LIM_PRESUPUESTO.SQL;
@@&DIR_SCRIPTS/Tipos/LIM_PRESUPUESTO_TABLE.SQL;
@@&DIR_SCRIPTS/Tipos/NT_SPLIT_RESULT.SQL;
@@&DIR_SCRIPTS/Procedures/CARGAR_CALENDARIO_SERVICIO.SQL;
@@&DIR_SCRIPTS/Functions/FORMAT_HORA_MINUTOS.SQL;
@@&DIR_SCRIPTS/Functions/COMPROBAR_FINALIZACION_ESTUDIO.SQL;
@@&DIR_SCRIPTS/Functions/OBTENER_NUM_EXPEDIENTE.SQL;
@@&DIR_SCRIPTS/Functions/OBTENER_PLAZO_MINIMO_ENTREGA.SQL;
@@&DIR_SCRIPTS/Procedures/ACT_DATOS_DOCUMENTACION.SQL;
@@&DIR_SCRIPTS/Functions/OBTENER_ESTADO_SOLICITANTE.SQL;
@@&DIR_SCRIPTS/Procedures/CREAR_TAREAS_DEFECTO.SQL;
@@&DIR_SCRIPTS/Functions/HORAS_ENTRE_FECHAS_CALENDAR.SQL;
@@&DIR_SCRIPTS/Functions/CALCULO_HORAS_INTERPRETACION.SQL;
@@&DIR_SCRIPTS/Functions/F_SPLIT_STRING_INTO_ARRAY.SQL;
@@&DIR_SCRIPTS/Functions/CALCULO_HORAS_TRADUCCION.SQL;
@@&DIR_SCRIPTS/Functions/CALCULO_PRESUPUESTO_INTERPRETACION.SQL;
@@&DIR_SCRIPTS/Functions/CALCULO_PRESUPUESTO_TRADUCCION.SQL;
@@&DIR_SCRIPTS/Functions/COMPROBAR_FECHA_FIN_TAREA.SQL;
@@&DIR_SCRIPTS/Functions/COMPROBAR_ORDEN_TAREAS.SQL;
@@&DIR_SCRIPTS/Functions/COMPROBAR_TIPO_TAREA.SQL;
@@&DIR_SCRIPTS/Functions/COSTE_EXPEDIENTE_LOTE.SQL;
@@&DIR_SCRIPTS/Functions/ES_EXPEDIENTE_URGENTE.SQL;
@@&DIR_SCRIPTS/Functions/ES_RECURSO_DISPONIBLE.SQL;
@@&DIR_SCRIPTS/Functions/ESTADO_TAREAS_ASIGNADAS.SQL;
@@&DIR_SCRIPTS/Functions/ESTADO_TAREAS_DEPENDIENTES.SQL;
@@&DIR_SCRIPTS/Functions/OBTENER_ESTUDIO.SQL;
@@&DIR_SCRIPTS/Functions/OBTENER_RESPONSABLE_TRABAJO.SQL;
@@&DIR_SCRIPTS/Functions/TIENE_TAREAS_ENTREGA.SQL;
@@&DIR_SCRIPTS/Functions/IMPORTE_PREVISTO_LOTE.SQL;
@@&DIR_SCRIPTS/Functions/REQUIERE_TRADOS.SQL;
@@&DIR_SCRIPTS/Procedures/CALCULO_IMPORTES_INTERPRETACION.SQL;
@@&DIR_SCRIPTS/Functions/OBTENER_LIM_PRESUPUESTO.SQL;
@@&DIR_SCRIPTS/Functions/OBTENER_GRUPO_TRABAJO.SQL;
@@&DIR_SCRIPTS/Procedures/CREAR_TAREAS_RELACIONADAS.SQL;
@@&DIR_SCRIPTS/Functions/COMPROBAR_REAPERTURA_TAREA.SQL;
@@&DIR_SCRIPTS/Functions/COMPROBAR_PAGADO.SQL;
@@&DIR_SCRIPTS/Functions/PARSE_HORA_MINUTOS.SQL;
@@&DIR_SCRIPTS/Procedures/ASOCIAR_DOC_A_ENTREGA.SQL;
@@&DIR_SCRIPTS/Functions/TIENE_NEGOCIACION_FECHA.SQL;
@@&DIR_SCRIPTS/Functions/OBTENER_ESTADO_NEGOCIACION.SQL;
/

--  TABLA DE ASOCIACION ENTIDADES R75 X54
CREATE TABLE ERRORES_MIG (
    ANYO_EXP NUMBER(4) NOT NULL,
	NUM_EXP NUMBER(6) NOT NULL,
    ERROR_DET VARCHAR2(400) NOT NULL,
    FECHA DATE NOT NULL
)TABLESPACE  AA7901E00;

ALTER TABLE ERRORES_MIG ADD CONSTRAINT PK_ERRORES_MIG PRIMARY KEY (ANYO_EXP, NUM_EXP );
ALTER INDEX PK_ERRORES_MIG REBUILD TABLESPACE AA7902E00;
/

ALTER TABLE AA79B29T00 ADD COD_R75_029 NUMBER(4) NULL;
ALTER TABLE AA79B99T00 ADD COD_R75_099 NUMBER(8) NULL;

ALTER TABLE AA79B51T00 ADD DESC_R75_051 VARCHAR2(4000) NULL;
/

UPDATE AA79B44T00 set DESC_EU_044 = 'Espediente-klonazio zerbitzua' WHERE ID_PUNTO_MENU_044 = 26;
UPDATE AA79B44T00 set DESC_EU_044 = 'Dokumentuen sinapena' WHERE ID_PUNTO_MENU_044 = 28;
UPDATE AA79B44T00 set DESC_EU_044 = 'Errekerimendua eskatu' WHERE ID_PUNTO_MENU_044 = 19;

Insert into CODR75X54J ( ID_R75, TIPO_X54, ID_X54) values (16,'L',26);
Insert into CODR75X54J ( ID_R75, TIPO_X54, ID_X54) values (17,'L',24);
Insert into CODR75X54J ( ID_R75, TIPO_X54, ID_X54) values (27,'L',25);
Insert into CODR75X54J ( ID_R75, TIPO_X54, ID_X54) values (53,'L',27);
Insert into CODR75X54J ( ID_R75, TIPO_X54, ID_X54) values (164,'L',23);
Insert into CODR75X54J ( ID_R75, TIPO_X54, ID_X54) values (168,'L',28);


INSERT INTO AA79BA7T00 (ID_0A7, NOMBRE_PLANTILLA_0A7, VAR_PLANTILLA_0A7, ID_FICHERO_PLANTILLA_0A7)
VALUES(3, 'Hornitzaileentzako eskuliburua-Itzulpena', '-', 3);
INSERT INTO AA79BA7T00 (ID_0A7, NOMBRE_PLANTILLA_0A7, VAR_PLANTILLA_0A7, ID_FICHERO_PLANTILLA_0A7)
VALUES(4, 'Hornitzaileentzako eskuliburua-Interpretazioa', '-', 4);
INSERT INTO AA79BA7T00 (ID_0A7, NOMBRE_PLANTILLA_0A7, VAR_PLANTILLA_0A7, ID_FICHERO_PLANTILLA_0A7)
VALUES(5, 'Hornitzaileentzako eskuliburua-Kontsulta Albaranak', '-', 5);
INSERT INTO AA79BA7T00 (ID_0A7, NOMBRE_PLANTILLA_0A7, VAR_PLANTILLA_0A7, ID_FICHERO_PLANTILLA_0A7)
VALUES(6, 'Eskatzailearen eskuliburua-Eskaera', '-', 6);
INSERT INTO AA79BA7T00 (ID_0A7, NOMBRE_PLANTILLA_0A7, VAR_PLANTILLA_0A7, ID_FICHERO_PLANTILLA_0A7)
VALUES(7, 'Eskatzailearen eskuliburua-Faktura', '-', 7);
INSERT INTO AA79BA7T00 (ID_0A7, NOMBRE_PLANTILLA_0A7, VAR_PLANTILLA_0A7, ID_FICHERO_PLANTILLA_0A7)
VALUES(8, 'Manual  para el hornitzaile traductor', '-', 8);
INSERT INTO AA79BA7T00 (ID_0A7, NOMBRE_PLANTILLA_0A7, VAR_PLANTILLA_0A7, ID_FICHERO_PLANTILLA_0A7)
VALUES(9, 'Manual para el usuario de interpretación', '-', 9);
INSERT INTO AA79BA7T00 (ID_0A7, NOMBRE_PLANTILLA_0A7, VAR_PLANTILLA_0A7, ID_FICHERO_PLANTILLA_0A7)
VALUES(10, 'Manual de Albaranes para el hornitzaile', '-', 10);
INSERT INTO AA79BA7T00 (ID_0A7, NOMBRE_PLANTILLA_0A7, VAR_PLANTILLA_0A7, ID_FICHERO_PLANTILLA_0A7)
VALUES(11, 'Manual  solicitante', '-', 11);
INSERT INTO AA79BA7T00 (ID_0A7, NOMBRE_PLANTILLA_0A7, VAR_PLANTILLA_0A7, ID_FICHERO_PLANTILLA_0A7)
VALUES(12, 'Manual facturación solicitante', '-', 12);

COMMIT;
/

exit;
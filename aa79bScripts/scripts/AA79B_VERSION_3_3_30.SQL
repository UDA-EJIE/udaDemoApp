DEFINE DIR_SCRIPTS = '/aplic/aa79b/scripts';

@@&DIR_SCRIPTS/Tipos/DROP_TIPOS.SQL;
@@&DIR_SCRIPTS/Tipos/STRUCT_ESTUDIO.SQL;
@@&DIR_SCRIPTS/Tipos/ESTUDIO_TABLE.SQL;
@@&DIR_SCRIPTS/Tipos/STRUCT_LIM_PRESUPUESTO.SQL;
@@&DIR_SCRIPTS/Tipos/LIM_PRESUPUESTO_TABLE.SQL;
@@&DIR_SCRIPTS/Tipos/NT_SPLIT_RESULT.SQL;
@@&DIR_SCRIPTS/Procedures/CARGAR_CALENDARIO_SERVICIO.SQL;
@@&DIR_SCRIPTS/Functions/FORMAT_HORA_MINUTOS.SQL;
@@&DIR_SCRIPTS/Functions/COMPROBAR_FINALIZACION_ESTUDIO.SQL;
@@&DIR_SCRIPTS/Functions/OBTENER_NUM_EXPEDIENTE.SQL;
@@&DIR_SCRIPTS/Functions/OBTENER_PLAZO_MINIMO_ENTREGA.SQL;
@@&DIR_SCRIPTS/Procedures/ACT_DATOS_DOCUMENTACION.SQL;
@@&DIR_SCRIPTS/Functions/OBTENER_ESTADO_SOLICITANTE.SQL;
@@&DIR_SCRIPTS/Procedures/CREAR_TAREAS_DEFECTO.SQL;
@@&DIR_SCRIPTS/Functions/HORAS_ENTRE_FECHAS_CALENDAR.SQL;
@@&DIR_SCRIPTS/Functions/CALCULO_HORAS_INTERPRETACION.SQL;
@@&DIR_SCRIPTS/Functions/F_SPLIT_STRING_INTO_ARRAY.SQL;
@@&DIR_SCRIPTS/Functions/CALCULO_HORAS_TRADUCCION.SQL;
@@&DIR_SCRIPTS/Functions/CALCULO_PRESUPUESTO_INTERPRETACION.SQL;
@@&DIR_SCRIPTS/Functions/CALCULO_PRESUPUESTO_TRADUCCION.SQL;
@@&DIR_SCRIPTS/Functions/COMPROBAR_FECHA_FIN_TAREA.SQL;
@@&DIR_SCRIPTS/Functions/COMPROBAR_ORDEN_TAREAS.SQL;
@@&DIR_SCRIPTS/Functions/COMPROBAR_TIPO_TAREA.SQL;
@@&DIR_SCRIPTS/Functions/COSTE_EXPEDIENTE_LOTE.SQL;
@@&DIR_SCRIPTS/Functions/ES_EXPEDIENTE_URGENTE.SQL;
@@&DIR_SCRIPTS/Functions/ES_RECURSO_DISPONIBLE.SQL;
@@&DIR_SCRIPTS/Functions/ESTADO_TAREAS_ASIGNADAS.SQL;
@@&DIR_SCRIPTS/Functions/ESTADO_TAREAS_DEPENDIENTES.SQL;
@@&DIR_SCRIPTS/Functions/OBTENER_ESTUDIO.SQL;
@@&DIR_SCRIPTS/Functions/OBTENER_RESPONSABLE_TRABAJO.SQL;
@@&DIR_SCRIPTS/Functions/TIENE_TAREAS_ENTREGA.SQL;
@@&DIR_SCRIPTS/Functions/IMPORTE_PREVISTO_LOTE.SQL;
@@&DIR_SCRIPTS/Functions/REQUIERE_TRADOS.SQL;
@@&DIR_SCRIPTS/Procedures/CALCULO_IMPORTES_INTERPRETACION.SQL;
@@&DIR_SCRIPTS/Functions/OBTENER_LIM_PRESUPUESTO.SQL;
@@&DIR_SCRIPTS/Functions/OBTENER_GRUPO_TRABAJO.SQL;
@@&DIR_SCRIPTS/Procedures/CREAR_TAREAS_RELACIONADAS.SQL
@@&DIR_SCRIPTS/Functions/COMPROBAR_REAPERTURA_TAREA.SQL;
@@&DIR_SCRIPTS/Functions/COMPROBAR_PAGADO.SQL;
@@&DIR_SCRIPTS/Procedures/ASOCIAR_DOC_A_ENTREGA.SQL

/

UPDATE AA79B61T00 set ID_ESTADO_061 = 6 WHERE ID_061 = 10;

UPDATE AA79B59T00 set ID_ESTADO_EXP_059 = 6 WHERE ID_ESTADO_EXP_059 = 3 AND ID_FASE_EXPEDIENTE_059 = 10;

INSERT INTO AA79B41T00 (ID_041, DESC_ES_041, DESC_EU_041, DESTINATARIO_041, ESTADO_041)
VALUES (29,'Notificación corrección proveedor','Hornitzaileari zuzenketa jakinaraztea', 3,'A');

INSERT INTO AA79B48T00 (ID_048, DESC_EU_048, DESC_ES_048, CLASS_048) VALUES (23,'Bezeroaren desadostasuna','No conformidad con el cliente','noConf');
UPDATE AA79B48T00 SET CLASS_048 = 'noConf' WHERE ID_048 = 23;


UPDATE AA79B78T00 set DESC_ES_078 = 'Ind. Confidencial (**)',DESC_EU_078='Isilpekoa (**)' WHERE ID_078 = 11;
INSERT INTO AA79B78T00 (ID_078,DESC_ES_078,DESC_EU_078,NAME_AA79_078,NAME_AA06_078,ID_TIPO_EXPEDIENTE_078) 
VALUES (22,'Ind. Confidencial (**)','Isilpekoa (**)','indConfidencial','confidencialCheck','T');


SET DEFINE OFF;
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Modificaci&oacute;n calendario personal--' WHERE ID_006 = 1;
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Requerimiento subsanaci&oacute;n--' WHERE ID_006 = 3;
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Expiraci&oacute;n plazo requerimiento--' WHERE ID_006 = 4;
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Asignaci&oacute;n de tarea--' WHERE ID_006 = 5;
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Reasignaci&oacute;n de tareas--' WHERE ID_006 = 6;
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Eliminaci&oacute;n de tareas--' WHERE ID_006 = 7;
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Modificaci&oacute;n datos tarea--' WHERE ID_006 = 8;
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Asignaci&oacute;n de tarea a Proveedor--' WHERE ID_006 = 9;
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Modificaci&oacute;n contenido documentos tarea--' WHERE ID_006 = 10;
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Rechazo asignaci&oacute;n tareas--' WHERE ID_006 = 11;
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Finalizaci&oacute;n tareas dependientes--' WHERE ID_006 = 12;
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Requerimiento aceptaci&oacute;n presupuesto--' WHERE ID_006 = 14;
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Requerimiento aceptaci&oacute;n fecha y hora de entrega--' WHERE ID_006 = 15;
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Requerimiento aceptaci&oacute;n presupuesto y fecha y hora de entrega--' WHERE ID_006 = 16;
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Eliminaci&oacute;n de tareas proveedor--' WHERE ID_006 = 19;
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Finalizaci&oacute;n tarea de Proveedor--' WHERE ID_006 = 23;
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Modificaci&oacute;n datos tarea externa--' WHERE ID_006 = 24;
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Anulaci&oacute;n expediente--' WHERE ID_006 = 25;
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Env&iacute;o de albar&aacute;n al IZO--' WHERE ID_006 = 26;
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Petici&oacute;n de ausencia--' WHERE ID_006 = 28;
INSERT INTO AA79B06T00 (ID_006, TEXTO_MAIL_ES_006, TEXTO_MAIL_EU_006, ASUNTO_ES_006, ASUNTO_EU_006)
VALUES (29,'--Notificaci&oacute;n correcci&oacute;n proveedor--','--Hornitzaileari zuzenketa jakinaraztea--','Notificación corrección proveedor','Hornitzaileari zuzenketa jakinaraztea');
UPDATE AA79B06T00 SET TEXTO_MAIL_ES_006 = '--Notificaci&oacute;n correcci&oacute;n proveedor--' WHERE ID_006 = 29;
SET DEFINE ON;

COMMIT;
/

-- AA79B1T00 (documentos tarea expediente)
CREATE TABLE AA79BB1T00 (
	ID_TAREA_0B1 NUMBER(20) NOT NULL, -- 81
    ID_FICHERO_0B1 NUMBER(20) NOT NULL -- 88
)TABLESPACE AA7901E00;

ALTER TABLE AA79BB1T00 ADD CONSTRAINT PK_AA79BB1T00 PRIMARY KEY (ID_TAREA_0B1, ID_FICHERO_0B1);
ALTER INDEX PK_AA79BB1T00 REBUILD TABLESPACE AA7902E00;

COMMENT ON TABLE AA79BB1T00 IS 'Documentos de notificacion de correccion';
COMMENT ON COLUMN AA79BB1T00.ID_TAREA_0B1 IS 'Id. interno de la tarea';
COMMENT ON COLUMN AA79BB1T00.ID_FICHERO_0B1 IS 'Id interno del fichero';
/

ALTER TABLE AA79BB1T00 ADD CONSTRAINT AA79B81T00_B1_FK
FOREIGN KEY (ID_TAREA_0B1)
REFERENCES AA79B81T00 (ID_TAREA_081)
ON DELETE CASCADE;
/

CREATE OR REPLACE SYNONYM AA79BB1S01 FOR AA79BB1T00;
/

ALTER TABLE AA79BA5T00 ADD CONSTRAINT AA79BA4T00_A5_FK
FOREIGN KEY (ID_FACTURA_0A5)
REFERENCES AA79BA4T00 (ID_FACTURA_0A4)
ON DELETE CASCADE;
/



exit;